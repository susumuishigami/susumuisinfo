<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7"  prefix="og: http://ogp.me/ns#">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8"  prefix="og: http://ogp.me/ns#">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html  prefix="og: http://ogp.me/ns#">
<!--<![endif]-->

<!-- Mirrored from www.susumuis.info/java?paged=18 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Mar 2025 06:03:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Java | susumuis Info | Page 18</title>
<link rel="pingback" href="xmlrpc.php" />
<!--[if lt IE 9]>
<script src="https://susumuishigami.github.io/susumuisinfo/wp-content/themes/susumuis-1/js/html5.js" type="text/javascript"></script>
<![endif]-->
<meta name='robots' content='max-image-preview:large' />
<link rel="alternate" type="application/rss+xml" title="susumuis Info &raquo; フィード" href="indexd784.html?feed=rss2" />
<link rel="alternate" type="application/rss+xml" title="susumuis Info &raquo; コメントフィード" href="indexa6da.html?feed=comments-rss2" />
<link rel="alternate" type="application/rss+xml" title="susumuis Info &raquo; Java カテゴリーのフィード" href="index2333.html?feed=rss2&amp;cat=42" />
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.susumuis.info\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.4.3"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id='wp-emoji-styles-inline-css' type='text/css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel='stylesheet' id='wp-block-library-css' href='wp-includes/css/dist/block-library/style.min84fc.css?ver=6.4.3' type='text/css' media='all' />
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
</style>
<link rel='stylesheet' id='twentytwelve-style-css' href='wp-content/themes/susumuis-1/style84fc.css?ver=6.4.3' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css' href='https://susumuishigami.github.io/susumuisinfo/wp-content/themes/susumuis-1/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<link rel="https://api.w.org/" href="index52f0.json?rest_route=/" /><link rel="alternate" type="application/json" href="indexb9c9.json?rest_route=/wp/v2/categories/42" />
<!-- Open Graph Meta Data by WP-Open-Graph plugin-->
<meta property="og:site_name" content="susumuis Info" />
<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />
<meta property="og:image:width" content="64" />
<meta property="og:image:height" content="64" />
<meta property="og:image" content="https://secure.gravatar.com/avatar/b9552281c780c119878649245f8d255d?s=64&amp;d=httpssecure.gravatar.comavatarad516503a11cd5ca435acc9bb6523536s64&amp;r=G" />
<meta property="og:title" content="Java" />
<meta property="og:url" content="https://www.susumuis.info/java" />
<!-- /Open Graph Meta Data -->
<meta name="description" content="Webエンジニア susumuis の技術ブログ" /><!-- /susumuis description --><meta name="google-site-verification" content="r8bsyozVM-2rih_MefUIAFQLk8LTc-o7dpT0oIvLi8w" />
	<style type="text/css" id="twentytwelve-header-css">
			.site-header h1 a,
		.site-header h2 {
			color: #353535;
		}
		</style>
	<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; }
</style>
	<!--
	<script type="text/javascript" src="http://stg2.replyze.me/assets/js/site.js" replyze-app-id="1"></script>
	-->
</head>

<body class="archive paged category category-java category-42 custom-background paged-18 category-paged-18 custom-background-white custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="index.html" title="susumuis Info" rel="home">susumuis Info</a></h1>
 			<h2 class="site-description">
Webエンジニア <a href="http://twitter.com/susumuis">susumuis</a> の技術ブログ
</h2>
			<p style="color: gray;">このブログの内容は個人の見解であり、所属する組織の公式見解ではありません</p>
		</hgroup>

			</header><!-- #masthead -->

	<div id="main" class="wrapper">

	<section id="primary" class="site-content">
		<div id="content" role="main">

					<header class="archive-header">
				<h1 class="archive-title">Category Archives: <span>Java</span></h1>

						</header><!-- .archive-header -->

			
	<article id="post-643" class="post-643 post type-post status-publish format-standard hentry category-java category-mayaa">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="entry/20110708/p1.html" rel="bookmark">そろそろ2年間Mayaa使ってわかったことを書く</a>
			</h1>
										<div class="comments-link">
					<a href="entry/20110708/p1.html#comments">3 Replies</a>				</div><!-- .comments-link -->
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p>僕は、2年ほど前に、所属している会社の主要プロダクトであるのリニューアルに係わりました。その際、Mayaaを採用し、今日までにそれを運用してノウハウが蓄積してきたので、ここに発表しようと思います。</p>

<h2>経緯</h2>

<p>私たちはコンシューマ向けのビューを多く扱うので、プログラミング工数を要せずデザイナーがダイレクトにデザインをカスタマイズできる仕組みの実現が急務でした。</p>

<p>以前はテンプレートにJSPを採用していたため、デザインを作る（HTMLを書く）デザイナーと、プログラムに打ち込むJSPコーダーが必要という状況でした。一方ブログサイトなどでは、CSSレベルでのデザインカスタマイズをサポートしていることは多いですが、それでは自由度に限りが出てしまいます。フルHTMLレベルでのテンプレートエンジンが必要でした。</p>

<p>結果的に、この状況がどのように変化したのかは下記のエントリにも書きましたので、こちらも合わせて読んでいただけると幸いです。</p>

<p><a href="entry/20101109/1289292233.html">プログラマーとデザイナーの境界が縮まってきた気がする</a></p>

<p>今回は技術よりのこと、及び運用していく上で培ったノウハウを紹介したいと思います。</p>

<h2>JavaServerTemplates "Mayaa" とは</h2>

<p>前置きが長くなってしまいましたが、自由なテンプレートの実現のため、Mayaaというライブラリを採用しました。</p>

<p><a href="http://mayaa.seasar.org/">http://mayaa.seasar.org/</a></p>

<p>MayaaはSeasar2系の日本発オープンソースライブラリですが、Seasar2に関係なく使用することができます。JSPと同じレイヤーで動作し、JSPのようにServletからforwardして使うことができます。以下のページの図が分かりやすいです。</p>

<p><a href="http://mayaa.seasar.org/documentation/about.html">http://mayaa.seasar.org/documentation/about.html</a></p>

<p>Mayaaを導入する以前のテンプレートエンジンはこんな感じでした。</p>

<pre><code>&lt;% if (a != null) { %&gt;
hello, &lt;%= a %&gt;
&lt;% } %&gt;
</code></pre>

<p>同じようなテンプレートをMayaaで書くとこんな感じです。</p>

<pre><code class="language-markup">&lt;div m:id="IF_A_EXIST"&gt;
    hello, &lt;span m:id="A_HERE"&gt;dummy&lt;/span&gt;
&lt;/div&gt;
</code></pre>

<p>という感じで、普通のHTMLにm:idという属性が付いていますね。このようにしておくと、テンプレートファイルをそのままブラウザでプレビューすることが可能ですし、HTMLエディタ、例えば　Dreamweaver で編集することができます。</p>

<h2>Mayaaのすばらしさ</h2>

<p>「テンプレートファイルをそのままブラウザでプレビューすることが可能です」といっても、簡単なようで簡単なことではありません。例えば画像の相対パスです。</p>

<pre><code class="language-markup">&lt;img src="images/xxx.jpg" /&gt;
</code></pre>

<p>ローカルではこのようになんの変哲もなく動く感じですが、サーバにデプロイしてみるとうまく動かないかもしれません。例えば、テンプレートは"view/hello.html"だけど、URLマッピングは別に管理されていて、"action/hello.do"かもしれません。そうすると、上記部分は</p>

<pre><code class="language-markup">&lt;img src="../view/images/xxx.jpg" /&gt;
</code></pre>

<p>や</p>

<pre><code class="language-markup">&lt;img src="http://something.example.com/view/images/xxx.jpg" /&gt;
</code></pre>

<p>のように書き換えるか必要があります。しかし、このようにしてしまったら、今度はローカルで画像が見られなくなったりします。Mayaaにはこの問題を解決するために、PathAdjusterという機構があります。</p>

<p><a href="http://mayaa.seasar.org/documentation/path_adjust.html">http://mayaa.seasar.org/documentation/path_adjust.html</a></p>

<p>詳しくは上記リンクに任せて割愛しますが、大ざっぱに言うと、一番目の記述を三番目の記述に実行時に書き換えてくれる機構です。これを応用すると、例えば「画像パスにtimestampを付与してmod_expireと組み合わせたクライアントキャッシュ対応」なんてこともできてしまいます。</p>

<p>その他にも、Webのフロントとして使う上でかゆいところに手が届く機能が結構付いているので気に入っています。</p>

<h2>はまったこと</h2>

<p>とはいえ、ここまで順風満帆というわけではありませんでした。例えばこんなころにハマりました。</p>

<h3>最初が取っ付きにくい</h3>

<p>よく言われます。これが故に、敬遠する方も多いようです。しかし、慣れてみると何も苦はなく、もうJSPには戻れません。ドキュメントが非常によく整備されていますので、とっつきやすさで言えば取っ付き易いほうだと思います。</p>

<h3>とはいえ教育コストがかかります(mayaaファイルを覚えなければならない)</h3>

<p>mayaaファイルという聞きなれない独自のファイルの記述が必要です。しかも、これを書くには、幾つかあるmayaaプロセッサーをマスターしていないと心もとないところです。</p>

<p><a href="http://mayaa.seasar.org/documentation/processor_reference.html">http://mayaa.seasar.org/documentation/processor_reference.html</a></p>

<p>そこで、mayaaファイルを書ける技術者の数は限られてしまいます。そのためには、「なるべくテンプレート(HTML)側に制御を委ねる」アプローチが必要かなと思います。（詳しくは後ほど書きます）</p>

<h3>JavaScriptが気持ち悪い</h3>

<p>mayaaでは、Javaオブジェクトとテンプレートとの橋渡しにJavaScript(Rhino)を使用します。Javaとそのまま埋め込めるJSPとは異なるので、「Javaのように見えて少し違う」書き方をしなければなりません。Javaだと思って書いていると、うっかり思いもよらないバグを作ってしまってハマります。これに対するアプローチは以下の二つかなあと思っています。</p>

<ul>
<li>出来る限りJavaに委譲する</li>
<li>出来る限りJavaScriptに統一する</li>
</ul>

<p>従来ならば、前者の書き方が理想だと思われますが、そのような方法を2年ほどやってきた結果、少々冗長さを感じています。ちょっとした変更でもサーバの再起動が必要なのも億劫です。（本番環境だと簡単に再起動できませんしね？）<del>今はサーバーサイドJavaScriptも広く利用されています。今後は後者のアプローチも有効ではないかと思っています。</del> 実際にやってみて失敗でした。JavaScriptのビルドや実行はJavaより遅いので多用するとパフォーマンス上の問題があります。JavaScriptはなるべく使わず可能な限りJavaに寄せるのが正解です（2014/07/02 追記）</p>

<p>また、別件ですが、mayaaファイルはXMLなので、以下のような冗談みたいな記述もあります</p>

<pre><code class="language-markup">&lt;m:if test="${hoge &amp;gt; 0}"&gt;
</code></pre>

<p>本当はif (hoge > 0)と書きたいところなのですが、mayaaがxmlファイルなので、">"が書けずこのような書き方になってしまいます（笑）どうしても">"と書きたい場合は、""の中をCDATAにすればいいのですが、</p>

<pre><code class="language-markup">&lt;m:if test="${&lt;![CDATA[hoge &gt; 0]]&gt;}"&gt;
</code></pre>

<p>さらに冗長になっちゃいました（笑）</p>

<p>負け惜しみとしてはmayaaのおかげで鍛えられて、もうltとgtがどっちかなんて迷うことはなくなりました（笑）</p>

<h2>私たちが採用したノウハウ集</h2>

<p>実際に使っていて培ったノウハウを発表します。</p>

<h3>m:idに命名規則を使用する</h3>

<p>mayaaには数多くのプロセッサーが存在しますが、HTML側から見ると、下記の4種類に集約されることがわかりました。</p>

<ul>
<li>変数を出力する</li>
<li>属性を書き換える</li>
<li>条件を満たす場合のみ表示する（条件を満たさなければ消える）</li>
<li>特定の条件のもと繰り返す</li>
</ul>

<p>それぞれを、"〜<em>HERE"、"〜_TAG"、"IF</em>〜"、"LOOP_〜"と命名するように統一しました。このようにすると、こんなこともできてしまいます。</p>

<p><a href="entry/20110330/p1.html">Mayaaファイルを命名規則から一括作成するEmEditorマクロ</a></p>

<h3>デザイナーとプログラマーで使う名前空間を分ける</h3>

<p>Mayaaでは、動的なタグの紐付けにHTMLの"id"属性を使用できますが、"m:id"のように独自の属性を使用することができます。まずは有無を言わずそちらを採用します。</p>

<p><a href="http://mayaa.seasar.org/documentation/equals_id_resolver.html">http://mayaa.seasar.org/documentation/equals_id_resolver.html</a></p>

<p>それでもどうしても、id属性やclass属性を使用したくなることがあります。これはMayaaに限らず一般論ですが。そこで、「プログラマーは全て大文字を使う」「デザイナーは全て小文字を使う」などの棲み分けをすると良いと思います。</p>

<h3>xpath指定は使用しない</h3>

<p>Mayaaではidの代わりにxpath指定でタグをコントロールすることができます。</p>

<p><a href="http://mayaa.seasar.org/documentation/xpath.html">http://mayaa.seasar.org/documentation/xpath.html</a></p>

<p>が、この方法は緊急時を除いて使用するべきではありません。あとからどうにもならなくなって泣けてきます。。。</p>

<p>また、パフォーマンス上の問題もありますので、できれば、templateResolverリストから外してしまうことをおすすめします。（2014/07/02　追記）</p>

<h3>デバッグ用関数は値を返す</h3>

<p>こんな関数を用意してdefault.mayaaから呼び出すようにするとデバッグで便利です。Javaのような豪華なデバッガがあれば本当はいいんですけどね</p>

<pre><code class="language-javascript">function debug(value, tag) {
    if (tag == null) tag = 'debug';
    java.lang.System.out.println(tag + "t" + tag);
    return value;
}
</code></pre>

<h3>プログラムは文言を吐き出さない</h3>

<p>以下のような書き方は、文言の変更にプログラムの修正が必要となってしまいます。</p>

<pre><code class="language-markup">性別：&lt;span m:id="USER_SE×_HERE"&gt;男性&lt;/span&gt;
</code></pre>

<p><span style="font-size:x-small;">※上記コードは、中学生並みの恥ずかしがりではなく、変なサーチキーワードに引っかからないように一部改変しています。</span></p>

<p>例えば、「男性」という文言ではなく、画像にしたいかもしれません。英語化するかもしれません。以下の書き方が良いです。</p>

<pre><code class="language-markup">性別：&lt;span m:id="IF_USER_MAN"&gt;男性&lt;/span&gt;&lt;span m:id="IF_USER_WOMAN"&gt;女性&lt;/span&gt;
</code></pre>

<h3>id一覧表を自動生成する</h3>

<p>mayaaファイルはxmlファイルなので、比較的簡単にパースできます。XMLコメントもパースの対象にできるので、それを元にid一覧表を作るのは容易です。JavaDocを自作するイメージです。（ソース載せようとしたらちょっと長いので割愛します。SAXを使うとスムーズに実装できました。</p>

<p><a href="http://www.atmarkit.co.jp/fxml/rensai/xmljava04/xmljava02.html">http://www.atmarkit.co.jp/fxml/rensai/xmljava04/xmljava02.html</a></p>

<p>また、ドキュメントの出力部分では、以下を参考に、ここでもMayaaを使用しました（笑）</p>

<p><a href="http://d.hatena.ne.jp/terazzo/20071116/1195250832">http://d.hatena.ne.jp/terazzo/20071116/1195250832</a></p>

<h3>PathAdjusterをうまく使う！</h3>

<p>Webサイトですから、ハイパーリンクを多用します。この時、いちいちリンク一つ一つにm:idを発行していたら大変です。そういう時は、PathAdjusterでなんとかしましょう。僕は、adjustRelativePathのオーバーライドで、拡張子が".html"の場合はsuper.adjustRelativePath(base, path)に引き継がず、独自で処理するようにしました。結果的に、リンクは以下のように書くことになっています。</p>

<pre><code class="language-markup">&lt;a href="member_input.html"&gt;会員登録&lt;/a&gt;&lt;!-- 実行すると、servlet用のURLに変換される --&gt;
</code></pre>

<p>このように、PathAdjusterをうまく使うことで、発行するidの数を減らすことは非常に強力です！</p>

<h3>一つのmayaaファイルで複数のテンプレートを使い回す。</h3>

<p>Mayaaは設定ファイル</p>

<ul>
<li>org.seasar.mayaa.provider.ServiceProvider</li>
<li>org.seasar.mayaa.source.PageSourceFactory</li>
</ul>

<p>などの記述で非常に柔軟にエンジンをカスタマイズできます。</p>

<p>前述したとおり、mayaaファイルはできるだけ少なくしたほうが得策です。そこで、一つのページをベースに複数の派生ページがデザインレベルで作れると幸せです。以下のエントリでその試みを成功させました。</p>

<p><a href="entry/20091205/1259983924.html">Mayaa ファイルの共通化</a></p>

<p>そうこうしていると、「派生したページでちょっとだけm:idを追加したい」なんていう要望も発生してしまいました。これについても、EqualsIDInjectionResolverのカスタマイズで対応することができてしまいました。</p>

<p><a href="http://ml.seasar.org/archives/mayaa-user/2010-January/000893.html">http://ml.seasar.org/archives/mayaa-user/2010-January/000893.html</a></p>

<p>これは、当時での実現方法ですので今は、<a href="https://www.seasar.org/issues/browse/MAYAA-76">https://www.seasar.org/issues/browse/MAYAA-76</a><br />
が実装されたのでさらに簡単にできると思います。</p>

<h3>m:idの数を減らす</h3>

<p>例えば、「名前の頭30文字を出力して残りは...にする」「名前の頭60文字を出力して残りは...にする」「名前の頭60文字を出力して残りは...にする」のように、パラメータが存在する制御をしたい時があります。そんなとき、</p>

<ul>
<li>NAME_30_HERE</li>
<li>NAME_60_HERE</li>
</ul>

<p>のようにいちいちつくっていたらヤボです。はじめのうちは本当にそんな感じで対応していたためミスもありました。</p>

<p>今は以下の方法でパラメータ化を実現しています。</p>

<pre><code class="language-javascript">function $p(name, defaultValue) {
    var attr = originalNode.getAttribute(
        Packages.org.seasar.mayaa.impl.engine.specification.SpecificationUtil.createQName(name)
    );
    if (attr != null) return attr.value;
    attr = originalNode.getAttribute(
        Packages.org.seasar.mayaa.impl.engine.specification.SpecificationUtil.createQName(originalNode.getDefaultNamespaceURI(), name)
    );
    return defaultValue;
}
</code></pre>

<p>テンプレート側では、以下のように書けばOKです。</p>

<pre><code class="language-markup">&lt;span m:id="FREE_HERE" m:free_no="20"&gt;自由項目20番&lt;/span&gt;
</code></pre>

<p><code>m:</code>を抜かすと実行後のマークアップにfree_noが残ってしまいますのでつけることをおすすめします（2014/07/03　追記）</p>

<h3>コメントはこう書け！</h3>

<p>JSPだとこんな風なコメントが使用できました。</p>

<pre><code>&lt;%-- ほげほげ --%&gt;
</code></pre>

<p>開発が切羽詰ってくるとコメントも荒れてきます。うっかり外に出してはまずい言葉を書いてしまうかもしれません。JSPコメントならば出力されないのでセーフですが、mayaa+HTMLだと、この書き方ができないので、うっかりテンプレートに開発者しかしらない内部情報を書いては大問題です。そんな時はこう書きましょう。</p>

<pre><code class="language-markup">&lt;!-- ${/* FIXME:ここ意味がわからないけどなぜかそれっぽく動く＞＜ */} --&gt;
</code></pre>

<p>これでブラウザには出力されなくなります（笑）</p>

<h2>最後に</h2>

<p>今どきUIに強いプログラマー＝モテです。さあ、ここまで読めば、君も立派なMayaa使い！<br /><br />
ちなみに、弊社の求人はこちらです↓<br /><br />
<a href="http://www.interfactory.co.jp/recruit/index.html">http://www.interfactory.co.jp/recruit/index.html</a><br />
</p></p>

<h2>（2011/07/16）書き忘れたことを別エントリで追記しました</h2>

<p><a href="entry/20110715/p1.html">2年間Mayaaを使ってわかったこと その２</a></p>

<p>この記事は以前多くのブックマーク・コメントを頂きました。<br />
<a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20110708/p1" class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" title="以前のURLでのブックマーク件数"></a><br />
これからブックマークされる方はこちら↓</p>
<p style="margin-top: 0px; margin-bottom: 32px;>
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-4600091038664361"
     data-ad-slot="6658249733"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="java.html" rel="category">Java</a>, <a href="mayaa.html" rel="category">Mayaa</a> on <a href="entry/20110708/p1.html" title="12:00 AM" rel="bookmark"><time class="entry-date published" datetime="2011-07-08T00:00:00+09:00">2011年7月8日</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="indexcd64.html?author=1" title="View all posts by susumuis" rel="author">susumuis</a></span></span>. 更新日: <time class="updated" datetime="2016-01-02T21:27:56+09:00">2016年1月2日</time>								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-645" class="post-645 post type-post status-publish format-standard hentry category-java">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="entry/20110615/p1.html" rel="bookmark">TreeSetのComparatorではまったのでメモ（初心者向け）</a>
			</h1>
										<div class="comments-link">
					<a href="entry/20110615/p1.html#comments">1 Reply</a>				</div><!-- .comments-link -->
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p>今更感のある話題ですが、初心者＝僕が、ドハマリして、いろいろ面白い現象に遭遇しました。<br />
内容はいたって基本中の基本のため、仕事でプログラミングしている者としては恥ずかしい限りですが、後に同じようにハマる人がいたときのために、メモを残します。</p>

<div class="section">
<h4>やろうとしたこと：</h4>
<p>もともとこんなコードがあって</p>
<pre class="code lang-java" data-lang="java" data-unlink>set = <span class="synStatement">new</span> TreeSet();
<span class="synStatement">for</span> (DBの取得結果) {
set.add(取得した値);
}
</pre><p>この後、setをつかって、UIを生成していたのだけど、順番が違うよって指摘を受けた。DBには、よくある、「表示順」のカラムがある。SQLならorder byで取れる。TreeSetの場合はCompatatorを渡せば良い。ということで、こんなHashMapをつくって</p>
<pre class="code lang-java" data-lang="java" data-unlink>Map&lt;String, Integer&gt; idToSortOrderMap = <span class="synStatement">new</span> HashMap&lt;String, Integer&gt;();
<span class="synStatement">for</span> (DBの取得結果) {
idToSortOrderMap.put(id, order);
}
</pre><p>みたいにして。こんなstatic内部クラスを作る</p>
<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">private</span> <span class="synType">static</span> <span class="synType">class</span> MyComparator <span class="synType">implements</span> Comparator, Serializable {
<span class="synType">private</span> HashMap&lt;String, Integer&gt; idToOrderMap;
<span class="synType">public</span> MyComparator(HashMap&lt;String, Integer&gt; idToOrderMap) {
<span class="synType">this</span>.idToOrderMap= idToOrderMap;
}
<span class="synType">public</span> <span class="synType">int</span> compare(String o1, String o2) {
Integer i1 = idToOrderMap.get(o1);
Integer i2 = idToOrderMap.get(o2);
<span class="synStatement">if</span> (i1 == <span class="synConstant">null</span>) { <span class="synStatement">return</span> <span class="synConstant">1</span>; }
<span class="synStatement">if</span> (i2 == <span class="synConstant">null</span>) { <span class="synStatement">return</span> -<span class="synConstant">1</span>; }
<span class="synStatement">return</span> i1 - i2;
}
}
</pre><p>これで一見すると、表示順は正常で、あたいもちゃんと追加されているので、完了…そう思っていました。</p>
</div>

<div class="section">
<h4>問題発生</h4>
<p>ところが、例えば</p>
<pre class="code lang-java" data-lang="java" data-unlink>idToOrderMap.put(<span class="synConstant">&quot;hoge&quot;</span>, <span class="synConstant">1</span>);
idToOrderMap.put(<span class="synConstant">&quot;hoge2&quot;</span>, <span class="synConstant">2</span>);
idToOrderMap.put(<span class="synConstant">&quot;fuga&quot;</span>, <span class="synConstant">1</span>);
</pre><p>のとき、</p>
<pre class="code lang-java" data-lang="java" data-unlink>set.add(<span class="synConstant">&quot;hoge&quot;</span>);
set.add(<span class="synConstant">&quot;hoge2&quot;</span>);
System.out.println(set.contains(<span class="synConstant">&quot;fuga&quot;</span>)); <span class="synComment">// falseのはず</span>
</pre><p>ところが、結果はtrueになってしまいます。</p>
</div>

<div class="section">
<h4>問題の原因</h4>
<p>初歩的なことですが、Java APIリファレンスに、<br />
<a href="http://java.sun.com/javase/ja/6/docs/ja/api/java/util/TreeSet.html">http://java.sun.com/javase/ja/6/docs/ja/api/java/util/TreeSet.html</a></p>
<blockquote>
<p>あるセットが Set インタフェースを正しく実装するには、明示的なコンパレータが提供されているかどうかにかかわらず、そのセットによって維持される順序付けが「equals との一貫性」のあるものでなければいけないことに注意してください。</p>
</blockquote>
<p><a href="http://java.sun.com/javase/ja/6/docs/ja/api/java/util/Comparator.html">http://java.sun.com/javase/ja/6/docs/ja/api/java/util/Comparator.html</a></p>
<blockquote>
<p>たとえば、(a.equals(b) && c.compare(a, b) != 0) である 2 つの要素 a および b をコンパレータ c で空の TreeSet に追加すると仮定します。a と b はツリーセットの点から見て等価ではないため、2 番目の add オペレーションは、Set.add メソッドの仕様とは異なる場合でも、true を返し、ツリーセットのサイズは大きくなります。</p>
</blockquote>
<p>と記述されています。</p><p>噛み砕いていうと「compareの結果が0と、equalsが同値でないと、TreeSetは異常な動きをするよ」というところです。</p><p>Effective Java<br />
<a href="http://www.amazon.co.jp/gp/product/489471499X/ref=as_li_ss_il?ie=UTF8&amp;tag=esuai-22&amp;linkCode=as2&amp;camp=247&amp;creative=7399&amp;creativeASIN=489471499X"><img decoding="async" border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&amp;Format=_SL110_&amp;ASIN=489471499X&amp;MarketPlace=JP&amp;ID=AsinImage&amp;WS=1&amp;tag=esuai-22&amp;ServiceVersion=20070822" ></a><img decoding="async" src="http://www.assoc-amazon.jp/e/ir?t=&amp;l=as2&amp;o=9&amp;a=489471499X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p><p>を持っている人は、Effective Javaの第2版 「項目12 Comparableの実装を検討する」に関連する記述があります。</p><p>はまりどころは、compareとequalsの一貫性は、必須ではないというところです。しかし、TreeSetやTreeMapのようにこの一貫性を要求する実装クラスがあるということです。</p>
</div>

<div class="section">
<h4>完成コード</h4>
<p>上記クラスの修正版は以下のとおりです。</p>
<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">private</span> <span class="synType">static</span> <span class="synType">class</span> MyComparator <span class="synType">implements</span> Comparator, Serializable {
<span class="synType">private</span> HashMap&lt;String, Integer&gt; idToOrderMap;
<span class="synType">public</span> MyComparator(HashMap&lt;String, Integer&gt; idToOrderMap) {
<span class="synType">this</span>.idToOrderMap= idToOrderMap;
}
<span class="synType">public</span> <span class="synType">int</span> compare(String o1, String o2) {
<span class="synStatement">if</span> (o1 == <span class="synConstant">null</span>) {
<span class="synStatement">return</span> o2 == <span class="synConstant">null</span> ? <span class="synConstant">0</span> : -<span class="synConstant">1</span>;
}
Integer i1 = idToOrderMap.get(o1);
Integer i2 = idToOrderMap.get(o2);
<span class="synStatement">if</span> (i1 == <span class="synConstant">null</span>) {
<span class="synStatement">if</span> (i2 != <span class="synConstant">null</span>) {
<span class="synStatement">return</span> -<span class="synConstant">1</span>;
}
<span class="synStatement">return</span> o1.compareTo(o2);
}
<span class="synStatement">if</span> (i2 == <span class="synConstant">null</span>) {
<span class="synStatement">return</span> <span class="synConstant">1</span>;
}
<span class="synStatement">if</span> (i1.equals(i2)) {
<span class="synStatement">return</span> o1.compareTo(o2);
}
<span class="synStatement">return</span> i1.compareTo(i2);
}
}
</pre>
</div>

<div class="section">
<h4>2011/06/24 修正</h4>
<p>ソースを修正しました。修正した箇所は、</p>
<pre class="code lang-java" data-lang="java" data-unlink><span class="synStatement">if</span> (i1 == i2) {
</pre><p>の箇所で、i1,i2がintではなく、Integerだったので、値の比較ではなく、オブジェクトの比較がされていました。equalsを使うべきでしたが、そうすると、nullの場合にヌルポになるので、上記の対応になります。やりたいことは最終行の</p>
<pre class="code lang-java" data-lang="java" data-unlink><span class="synStatement">return</span> i1.compareTo(i2);
</pre><p>なんですよね。Javaが冗長とか言われるのも、こういったNull対策があったりとかするところなんでしょうね……。</p><p>まあ、SQLでもこう言うのありますけどね。</p>
</div>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="java.html" rel="category">Java</a> on <a href="entry/20110615/p1.html" title="12:00 AM" rel="bookmark"><time class="entry-date published updated" datetime="2011-06-15T00:00:00+09:00">2011年6月15日</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="indexcd64.html?author=1" title="View all posts by susumuis" rel="author">susumuis</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-646" class="post-646 post type-post status-publish format-standard hentry category-java">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="entry/20110520/p1.html" rel="bookmark">JavaでPDF生成する方法(LibreOffice, jodConverterによる方法）</a>
			</h1>
										<div class="comments-link">
					<a href="entry/20110520/p1.html#respond"><span class="leave-reply">Leave a reply</span></a>				</div><!-- .comments-link -->
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p>JavaでPDFを生成する場合、こういった方法や、<a href="http://allabout.co.jp/gm/gc/80691/">http://allabout.co.jp/gm/gc/80691/</a> こういった方法<a href="http://www.atmarkit.co.jp/fjava/javatips/121jspservlet41.html">http://www.atmarkit.co.jp/fjava/javatips/121jspservlet41.html</a> がある。しかし、どちらも低レベル過ぎて、美しいビジネス文書や帳票を出力するにはワープロを作るくらいの気合が必要となる。</p>

<p>手っ取り早いのは、ExcelやWordの文書をApache POI経由で編集し、そいつをPDFにして出力出来れば、美しいPDFが任意のテンプレートで作れるというプランである。</p>

<p>最近のOfficeならPDF出力をできるので、もしMSマンセーな組織なら、Windowsサーバ上でExcelを常駐させて、COMなんちゃらを利用して実現するのが良いと思う。しかし僕はJava屋だ。サーバはLinuxが好きだ。というわけで、今回は、以下の組み合わせで実現したので、ポイントを抜粋して紹介します。</p>

<ul>
<li>アプリはWebアプリ、開発言語はJava</li>
<li>テンプレートはExcel</li>
<li>帳票の生成はApache POI</li>
<li>PDF化のエンジンはLibre Office (<a href="http://ja.libreoffice.org/">http://ja.libreoffice.org/</a>)</li>
<li>アプリとLibreOfficeの橋渡しはJodConvertor (<a href="http://www.artofsolving.com/opensource/jodconverter">http://www.artofsolving.com/opensource/jodconverter</a>)</li>
</ul>

<p>なお、POIのことについては割愛します。<br />
まずはPOIなので、HSSFWorkbookを生成します。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">final</span> HSSFWorkbook book = <span class="synStatement">new</span> HSSFWorkbook(templateStream);
</pre>

<p>そして、bookを使って色々操作します（ｗ<br />
最後にoutputStreamをbook#writeに渡せばExcelファイルが出力されます。（ここまでは普通のPOIです）</p>

<pre class="code lang-java" data-lang="java" data-unlink>book.write(out);
</pre>

<p>次はPDF化です。LibreOfficeをインストールして、インストールディレクトリの<br />
program/soffice (Windowsの場合はsoffice.exe)に、次のオプションを付けて起動します。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink> <span class="synSpecial">-accept</span><span class="synStatement">=&quot;</span><span class="synConstant">socket,port=8100;urp;</span><span class="synStatement">&quot;</span>
</pre>

<p>これでソケット通信を受け付けるようになります。</p>

<p>次に、jodConverterを用意しましょう。<a href="http://sourceforge.net/projects/jodconverter/files/JODConverter/2.2.2/">http://sourceforge.net/projects/jodconverter/files/JODConverter/2.2.2/</a> から jodconverter-webapp-2.2.2.zip をダウンロードして解凍します。zip中身にwarが入っているので、そいつをtomcatのwebappの下に配置したらすぐに使用できるようになります。</p>

<p>次に、アプリとjodConterverの連携です。幸い、jodConverterにはWebサービス機能があるのでそれを使うのが良さそうです。<br />
ぐぐっても見つからないと思ったら本家に書いてありました（笑）<br />
<a href="http://www.artofsolving.com/node/15">http://www.artofsolving.com/node/15</a></p>

<p>ということで、ざっくりこんな感じでユーティリティメソッドを作ります。</p>

<pre><code class="language-java">public int convertExcepToPdf(final InputStream in, OutputStream out) throws IOException {
    HttpClient httpClient = new HttpClient();
    PostMethod post = new PostMethod("http://localhost:8080/jodconverter-webapp-2.2.2/service");
    post.setRequestHeader("Accept", "application/pdf");
    post.setRequestHeader("Content-Type", "application/vnd.ms-excel");
    post.setRequestBody(in);
    try {
        int status = httpClient.executeMethod(post);
        if (status != HttpStatus.SC_OK) {
            return status;
        }
        InputStream response = post.getResponseBodyAsStream();
        byte[] buf = new byte[256];
        for (int len; (len = response.read(buf)) != -1;) {
            out.write(buf, 0, len);
        }
        return status;
    } finally {
        post.releaseConnection();
    }
}
</code></pre>

<p>これで接続ができますが、POIのwriteはOutputStream、今回作った関数のパラメータはInputStreamという問題が残ります。<br />
ByteArrayInputやOutputStreamを使ってメモリに全部記憶すればできますが、Excelファイルも大きめのファイルなので、メモリは節約したいです。かと言って、一旦ファイルに保存するのはなんともダサい感じです。HDDガリガリとかナンセンスです！</p>

<p>悩んだ結果、僕はPipedOutputStream, PipedInputStreamを使用しました。</p>

<pre><code class="language-java">final PipedOutputStream pipeout = new PipedOutputStream();
PipedInputStream pipeIn = new PipedInputStream(pipeout);
Thread t = new Thread(new Runnable() {
    public void run() {
        try {
            try {
                book.write(pipeout);
            } finally {
                pipeout.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
});
t.start();
PDFConverterConnector pdfC = new PDFConverterConnector();
BufferedOutputStream out = new BufferedOutputStream(response.getOutputStream());
try {
    pdfC.convertDocumentFileToPdf(pipeIn, out);
} catch (Exception e) {
    e.printStackTrace();
}
</code></pre>

<p>無事PDFが出力されたのを見ると感激しますね！<br />
<span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/s-ishigami/20110520174644" class="hatena-fotolife" itemprop="url"><img decoding="async" src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/s-ishigami/20110520/20110520174644.png" alt="f:id:s-ishigami:20110520174644p:image" title="f:id:s-ishigami:20110520174644p:image" class="hatena-fotolife" itemprop="image"></a></span><br />
</p>

<div class="section">
<h4>2011/05/26 追記</h4>
<p>本番環境にインストールするに当たって、CentOS5に入れたのですが、バージョンが古くてLibreOfficeではなく、OpenOffice.orgになってしまったのと、コマンドラインから実行すると、</p>
<blockquote>
<p>Set DISPLAY environment variable, use -display option or check permissions of your X-Server (See "man X" resp. "man xhost" for details)</p>
</blockquote>
<p>というようなエラーが出てしまいました。これは、</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>yum <span class="synStatement">install</span> openoffice.org-headless
</pre><p>とすればOKでした。<br />
参考：<a href="http://stackoverflow.com/questions/4004456/centos-server-openoffice-headless">http://stackoverflow.com/questions/4004456/centos-server-openoffice-headless</a></p><p></p>
<div class="section">
<h5>追記（2014/04/26）</h5>
<p>ここではJodConverter2を使っていますが、OpenOffice, LibreOffice側にメモリリーク問題があり、デーモンとして起動したOOo(LibreOffice)がクラッシュしてしまう問題があります。実際に私の現場でも、容量の大きいExcelファイルを連続して扱うとクラッシュしてしまう現象を観測し、現在は、JodConverter3に移行しています。</p><p>JodConverter3については、下記の記事を参照してください<br />
<a href="https://code.google.com/p/jodconverter/wiki/WhatsNewInVersion3">https://code.google.com/p/jodconverter/wiki/WhatsNewInVersion3</a></p><p>JodConverter3はずっとbetaで開発が止まっていて作者によると</p>
<blockquote>
<p>I started this project back in 2003, but I am no longer maintaining it. I moved the code here at GitHub in the hope that a well-maintained fork will emerge.</p>
</blockquote>
<p>という立場のようです。すでに多数のforkされてpull requestもあるようです。<br />
<a href="https://github.com/mirkonasato/jodconverter">https://github.com/mirkonasato/jodconverter</a></p><p>私の現場では最新betaを使用していますが、とりたてて問題は発生していません。ただ、jodConverter3には便利なWebサービス機能がありませんので、自前でJodConnver2のものを元にWevServiceを作成しました。<br />
その辺りを後日紹介したいと思います。</p>
</div>
</div>

<p>この記事は以前多くのブックマーク・コメントを頂きました。<br />
<a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20110520/p1" class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" title="以前のURLでのブックマーク件数"></a><br />
これからブックマークされる方はこちら↓</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="java.html" rel="category">Java</a> on <a href="entry/20110520/p1.html" title="12:00 AM" rel="bookmark"><time class="entry-date published" datetime="2011-05-20T00:00:00+09:00">2011年5月20日</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="indexcd64.html?author=1" title="View all posts by susumuis" rel="author">susumuis</a></span></span>. 更新日: <time class="updated" datetime="2014-07-03T00:12:24+09:00">2014年7月3日</time>								</footer><!-- .entry-meta -->
	</article><!-- #post -->
		<nav id="nav-below" class="navigation" role="navigation">
			<h3 class="assistive-text">Post navigation</h3>
			<div class="nav-previous"><a href="java0680.html?paged=19" ><span class="meta-nav">&larr;</span> Older posts</a></div>
			<div class="nav-next"><a href="java8096.html?paged=17" >Newer posts <span class="meta-nav">&rarr;</span></a></div>
		</nav><!-- #nav-below .navigation -->
	
		
		</div><!-- #content -->
	</section><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="text-4" class="widget widget_text"><h3 class="widget-title">このブログの人</h3>			<div class="textwidget"><a href="http://twitter.com/susumuis"><img src="http://1.gravatar.com/avatar/b9552281c780c119878649245f8d255d" alt="susumuis-icon" /></a>
<div>
<a href="http://twitter.com/susumuis">susumuis</a>
</div>

<p>テンプレートエンジン<a href="www.susumuis.info/entry/2015/mayaa_advent25/index.html">Mayaaコミッターの末席</a>、Webエンジニア、秋葉原に出没</p></div>
		</aside><aside id="text-3" class="widget widget_text"><h3 class="widget-title">Twitter</h3>			<div class="textwidget"><a class="twitter-timeline" href="https://twitter.com/susumuis" data-widget-id="463289983378272257" data-tweet-limit="3">@susumuis からのツイート</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
		</aside><aside id="text-7" class="widget widget_text">			<div class="textwidget"><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- サイドバー2 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-4600091038664361"
     data-ad-slot="3158543332"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
		</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">カテゴリー</h3>
			<ul>
					<li class="cat-item cat-item-49"><a href="index3cd0.html?cat=49">Android</a> (2)
</li>
	<li class="cat-item cat-item-47"><a href="db.html">DB関連</a> (5)
</li>
	<li class="cat-item cat-item-42 current-cat"><a aria-current="page" href="java.html">Java</a> (71)
</li>
	<li class="cat-item cat-item-52"><a href="mayaa.html">Mayaa</a> (44)
</li>
	<li class="cat-item cat-item-56"><a href="indexdcf7.html?cat=56">Python</a> (3)
</li>
	<li class="cat-item cat-item-40"><a href="web.html">Web技術</a> (65)
</li>
	<li class="cat-item cat-item-39"><a href="infra.html">インフラ技術</a> (13)
</li>
	<li class="cat-item cat-item-41"><a href="nomad.html">ノマド情報</a> (5)
</li>
	<li class="cat-item cat-item-53"><a href="indexf170.html?cat=53">メイドさんでも分かるプログラミング</a> (5)
</li>
	<li class="cat-item cat-item-48"><a href="indexb0b4.html?cat=48">モバイル</a> (4)
</li>
	<li class="cat-item cat-item-43"><a href="seminar.html">勉強会レポート</a> (13)
</li>
	<li class="cat-item cat-item-1"><a href="indexb31a.html?cat=1">未分類</a> (18)
</li>
	<li class="cat-item cat-item-55"><a href="index1e3b.html?cat=55">機械学習</a> (1)
</li>
	<li class="cat-item cat-item-51"><a href="indexfa15.html?cat=51">生活</a> (6)
</li>
	<li class="cat-item cat-item-44"><a href="essay.html">論評</a> (23)
</li>
	<li class="cat-item cat-item-46"><a href="hobby.html">趣味</a> (7)
</li>
	<li class="cat-item cat-item-45"><a href="environment.html">開発環境</a> (10)
</li>
			</ul>

			</aside><aside id="text-9" class="widget widget_text"><h3 class="widget-title">人気記事</h3>			<div class="textwidget"><script language="javascript" type="text/javascript" src="http://b.hatena.ne.jp/js/widget.js" charset="utf-8"></script>
<script language="javascript" type="text/javascript">
Hatena.BookmarkWidget.url   = "index.html";
Hatena.BookmarkWidget.sort  = "count";
Hatena.BookmarkWidget.width = 0;
Hatena.BookmarkWidget.num   = 2;
Hatena.BookmarkWidget.theme = "notheme";
Hatena.BookmarkWidget.load();
</script></div>
		</aside><aside id="text-8" class="widget widget_text"><h3 class="widget-title">以前反響を頂いた記事</h3>			<div class="textwidget"><div id="hatena_hotentry">

<div id="hatena-bookmark-widget1" class="hatena-bookmark hatena-bookmark-widget-notheme"><div class="hatena-bookmark-widget-title"><a href="http://b.hatena.ne.jp/entrylist?url=http://susumuis.hateblo.jp&amp;sort=count"><img src="http://b.hatena.ne.jp/images/widget/favicon.gif"></a></div><div class="hatena-bookmark-widget-body"><ul><li><a class="hatena-bookmark-entrytitle" href="entry/20110728/p1.html">EclipseのJavaScript環境（JSDT）を快適に使う方法 - s-ishigamiの日...</a><span class="hatena-bookmark-count"><strong><a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20110728/p1">62users</a></strong></span></li><li><a class="hatena-bookmark-entrytitle" href="entry/20110916/p1.html">Androidの標準Webブラウザでセキュア属性付きのCookieの扱いがP...</a><span class="hatena-bookmark-count"><strong><a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20110916/p1">29users</a></strong></span></li><li><a class="hatena-bookmark-entrytitle" href="entry/20111203/p1.html">JVM用のJavaScriptエンジンをまとめてみる - s-ishigamiの日記</a><span class="hatena-bookmark-count"><strong><a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20111203/p1">28users</a></strong></span></li><li><a class="hatena-bookmark-entrytitle" href="entry/20110708/p1.html">そろそろ2年間Mayaa使ってわかったことを書く - s-ishigamiの日...</a><span class="hatena-bookmark-count"><strong><a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20110708/p1">27users</a></strong></span></li><li><a class="hatena-bookmark-entrytitle" href="entry/20101109/1289292233.html"> プログラマーとデザイナーの境界が縮まってきた気がする ...</a><span class="hatena-bookmark-count"><strong><a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20101109/1289292233">26users</a></strong></span></li><li><a class="hatena-bookmark-entrytitle" href="entry/20110520/p1.html">JavaでPDF生成する方法(LibreOffice, jodConverterによる方法） - s-ish...</a><span class="hatena-bookmark-count"><strong><a href="http://b.hatena.ne.jp/entry/http://susumuis.hateblo.jp/entry/20110520/p1">22users</a></strong></span></li></ul></div><div class="hatena-bookmark-widget-footer"><a href="http://b.hatena.ne.jp/"><span>Hatena::Bookmark</span></a></div></div>

<a href="http://b.hatena.ne.jp/entrylist?url=http%3A%2F%2Fsusumuis.hateblo.jp%2F">もっと見る</a>
</div>

<!--
<script language="javascript" type="text/javascript" src="http://b.hatena.ne.jp/js/widget.js" charset="utf-8"></script>
<script language="javascript" type="text/javascript">
Hatena.BookmarkWidget.url   = "http://susumuis.hateblo.jp";
Hatena.BookmarkWidget.sort  = "count";
Hatena.BookmarkWidget.width = 0;
Hatena.BookmarkWidget.num   = 6;
Hatena.BookmarkWidget.theme = "notheme";
Hatena.BookmarkWidget.load();
</script>

<a href="http://b.hatena.ne.jp/entrylist?url=http%3A%2F%2Fsusumuis.hateblo.jp%2F">もっと見る</a>
</div>

<script language="javascript" type="text/javascript">
var $div = document.getElementById('hatena_hotentry');
if ($div) {
  $div.addEventListener('DOMNodeInserted', function() {
    $link = document.querySelectorAll('div#hatena_hotentry .hatena-bookmark-entrytitle');
    for (var i = 0; i < $link.length; i++) {
      $link[i].href = $link[i].href.replace('susumuis.hateblo.jp', 'www.susumuis.info');
    }
  });
}
/*
jQuery('div#hatena_hotentry').on('DOMNodeInserted', function() {
  $links = jQuery('div#hatena_hotentry .hatena-bookmark-entrytitle');
  $links.each(function() {
    jQuery(this).attr('href', jQuery(this).attr('href').replace('susumuis.hateblo.jp', 'www.susumuis.info'))
  });
});
*/
</script>
-->
</div>
		</aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h3 class="widget-title">最近の投稿</h3>
		<ul>
											<li>
					<a href="entry/2022/riptwitter.html">「Twitter終了」と聞いたら俄然意欲が湧いてきた</a>
											<span class="post-date">2022年11月19日</span>
									</li>
											<li>
					<a href="entry/2018/bot.html">メイドちゃんbotの今と前世?</a>
											<span class="post-date">2018年12月19日</span>
									</li>
											<li>
					<a href="entry/2018/beproud.html">ビープラウドに入社して2年間で一番学んだこと</a>
											<span class="post-date">2018年12月3日</span>
									</li>
											<li>
					<a href="entry/2018/eclipse_html_charset.html">eclipseでHTMLエディタの文字化けを直す方法</a>
											<span class="post-date">2018年7月23日</span>
									</li>
											<li>
					<a href="entry/2018/pypro3.html">PyPro3は機械学習の仕事に初めて関わるプログラマーにもおすすめの本です</a>
											<span class="post-date">2018年6月23日</span>
									</li>
					</ul>

		</aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">アーカイブ</h3>
			<ul>
					<li><a href='indexe0a6.html?m=202211'>2022年11月</a>&nbsp;(1)</li>
	<li><a href='index25cd.html?m=201812'>2018年12月</a>&nbsp;(2)</li>
	<li><a href='indexc090.html?m=201807'>2018年7月</a>&nbsp;(1)</li>
	<li><a href='indexcca2.html?m=201806'>2018年6月</a>&nbsp;(1)</li>
	<li><a href='indexe1e7.html?m=201712'>2017年12月</a>&nbsp;(2)</li>
	<li><a href='index670f.html?m=201710'>2017年10月</a>&nbsp;(2)</li>
	<li><a href='indexcb8c.html?m=201701'>2017年1月</a>&nbsp;(1)</li>
	<li><a href='index824a.html?m=201612'>2016年12月</a>&nbsp;(2)</li>
	<li><a href='index1233.html?m=201608'>2016年8月</a>&nbsp;(1)</li>
	<li><a href='indexf032.html?m=201601'>2016年1月</a>&nbsp;(3)</li>
	<li><a href='index35fc.html?m=201512'>2015年12月</a>&nbsp;(28)</li>
	<li><a href='indexe696.html?m=201509'>2015年9月</a>&nbsp;(2)</li>
	<li><a href='index01b8.html?m=201508'>2015年8月</a>&nbsp;(1)</li>
	<li><a href='indexe04d.html?m=201506'>2015年6月</a>&nbsp;(1)</li>
	<li><a href='index2b58.html?m=201505'>2015年5月</a>&nbsp;(2)</li>
	<li><a href='index8dad.html?m=201502'>2015年2月</a>&nbsp;(1)</li>
	<li><a href='index44ad.html?m=201412'>2014年12月</a>&nbsp;(2)</li>
	<li><a href='indexec75.html?m=201411'>2014年11月</a>&nbsp;(2)</li>
	<li><a href='index8ce2.html?m=201409'>2014年9月</a>&nbsp;(3)</li>
	<li><a href='indexe10b.html?m=201408'>2014年8月</a>&nbsp;(3)</li>
	<li><a href='index8ba2.html?m=201407'>2014年7月</a>&nbsp;(3)</li>
	<li><a href='index8af2.html?m=201406'>2014年6月</a>&nbsp;(4)</li>
	<li><a href='indexddcf.html?m=201405'>2014年5月</a>&nbsp;(7)</li>
	<li><a href='index570a.html?m=201404'>2014年4月</a>&nbsp;(4)</li>
	<li><a href='indexd907.html?m=201403'>2014年3月</a>&nbsp;(2)</li>
	<li><a href='index03da.html?m=201402'>2014年2月</a>&nbsp;(1)</li>
	<li><a href='indexd44c.html?m=201312'>2013年12月</a>&nbsp;(1)</li>
	<li><a href='index2501.html?m=201311'>2013年11月</a>&nbsp;(1)</li>
	<li><a href='index0b82.html?m=201308'>2013年8月</a>&nbsp;(1)</li>
	<li><a href='index29b3.html?m=201210'>2012年10月</a>&nbsp;(1)</li>
	<li><a href='indexde88.html?m=201205'>2012年5月</a>&nbsp;(1)</li>
	<li><a href='index9b14.html?m=201204'>2012年4月</a>&nbsp;(2)</li>
	<li><a href='index0aef.html?m=201202'>2012年2月</a>&nbsp;(2)</li>
	<li><a href='indexfa64.html?m=201201'>2012年1月</a>&nbsp;(1)</li>
	<li><a href='index334d.html?m=201112'>2011年12月</a>&nbsp;(3)</li>
	<li><a href='indexb976.html?m=201111'>2011年11月</a>&nbsp;(2)</li>
	<li><a href='indexb4d5.html?m=201110'>2011年10月</a>&nbsp;(2)</li>
	<li><a href='indexd1c5.html?m=201109'>2011年9月</a>&nbsp;(3)</li>
	<li><a href='index62cc.html?m=201107'>2011年7月</a>&nbsp;(3)</li>
	<li><a href='indexc61a.html?m=201106'>2011年6月</a>&nbsp;(2)</li>
	<li><a href='indexa80d.html?m=201105'>2011年5月</a>&nbsp;(2)</li>
	<li><a href='index08fb.html?m=201103'>2011年3月</a>&nbsp;(2)</li>
	<li><a href='index52f4.html?m=201102'>2011年2月</a>&nbsp;(3)</li>
	<li><a href='index74f1.html?m=201101'>2011年1月</a>&nbsp;(3)</li>
	<li><a href='index8956.html?m=201012'>2010年12月</a>&nbsp;(3)</li>
	<li><a href='indexa1aa.html?m=201011'>2010年11月</a>&nbsp;(18)</li>
	<li><a href='indexe3d5.html?m=201010'>2010年10月</a>&nbsp;(2)</li>
	<li><a href='index1ff0.html?m=201008'>2010年8月</a>&nbsp;(1)</li>
	<li><a href='index9f11.html?m=201007'>2010年7月</a>&nbsp;(1)</li>
	<li><a href='index6e30.html?m=201002'>2010年2月</a>&nbsp;(1)</li>
	<li><a href='index5c0a.html?m=200912'>2009年12月</a>&nbsp;(1)</li>
	<li><a href='index3e04.html?m=200909'>2009年9月</a>&nbsp;(2)</li>
	<li><a href='index425a.html?m=200908'>2009年8月</a>&nbsp;(1)</li>
	<li><a href='index9907.html?m=200907'>2009年7月</a>&nbsp;(1)</li>
			</ul>

			</aside><aside id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="https://www.susumuis.info/">
				<div>
					<label class="screen-reader-text" for="s">検索:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="検索" />
				</div>
			</form></aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
</div><!-- #page -->

<link rel="stylesheet" href="wp-content/plugins/susumuis-custom-info/prism.css" type="text/css">
<script type="text/javascript" src="wp-content/plugins/susumuis-custom-info/prism.js"></script>
<script type="text/javascript" src="http://s.hatena.ne.jp/js/HatenaStar.js"></script>
<script type="text/javascript">
Hatena.Star.Token = 'cbaff54dacef622bc4799fc25e29f5ac04b44130';
Hatena.Star.SiteConfig = {
  entryNodes: {
    'article.post': {
      uri: '.entry-title a',
      title: '.entry-title',
      container: '.entry-title'
    }
  }
};
</script><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-49433426-2', 'susumuis.info');
ga('send', 'pageview');
</script></body>

<!-- Mirrored from www.susumuis.info/java?paged=18 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Mar 2025 06:03:41 GMT -->
</html>
