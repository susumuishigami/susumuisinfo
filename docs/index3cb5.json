{"id":628,"date":"2012-02-14T00:00:00","date_gmt":"2012-02-13T15:00:00","guid":{"rendered":"http:\/\/blog.susumuis.info\/?p=628"},"modified":"2014-07-02T22:33:30","modified_gmt":"2014-07-02T13:33:30","slug":"postgresql-%e3%81%a7-lan%e3%82%b1%e3%83%bc%e3%83%96%e3%83%ab%e3%81%8c%e6%8a%9c%e3%81%91%e3%81%9f%e5%a0%b4%e5%90%88%e3%81%abconnection%e3%82%92%e7%a0%b4%e6%a3%84%e3%81%99%e3%82%8b%e6%96%b9%e6%b3%95","status":"publish","type":"post","link":"https:\/\/www.susumuis.info\/entry\/20120214\/p1","title":{"rendered":"PostgreSQL \u3067 LAN\u30b1\u30fc\u30d6\u30eb\u304c\u629c\u3051\u305f\u5834\u5408\u306bConnection\u3092\u7834\u68c4\u3059\u308b\u65b9\u6cd5"},"content":{"rendered":"<p>Tomcat\u3067Web\u30a2\u30d7\u30ea\u3092\u958b\u767a\u3057\u3066\u3044\u3066DB\u3068\u306e\u63a5\u7d9a\u306f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30ea\u30f3\u30b0\u3092\u3057\u3066\u3044\u308b\u3068\u306f\u3044\u3048\u3001\u4f55\u3089\u304b\u306e\u539f\u56e0\u3067Connection\u304c\u4f7f\u3044\u7269\u306b\u306a\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u518d\u63a5\u7d9a\u3092\u3059\u308b\u305f\u3081\u306b\u3001Connection\u53d6\u5f97\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306aSQL\u3092\u6295\u3052\u3066\u6b7b\u6d3b\u30c1\u30a7\u30c3\u30af\u3092\u884c\u306a\u3063\u3066\u3044\u307e\u3059\u3002<\/p>\n\n<pre><code class=\"language-sql\">select 1\n<\/code><\/pre>\n\n<p>\u3068\u3053\u308d\u304c\u3001\u4f8b\u3048\u3070DB\u30b5\u30fc\u30d0\u3078\u306eLAN\u30b1\u30fc\u30d6\u30eb\u304c\u629c\u3051\u305f\u5834\u5408\u3001\u3053\u306eSQL\u3092\u3044\u3064\u307e\u3067\u3082\u5b9f\u884c\u3057\u3066\u3057\u307e\u3044\u3001\u7d50\u679c\u7684\u306bConnectionPool\u304b\u3089\u306e\u53d6\u5f97\u5f85\u3061\u884c\u5217\u304c\u305f\u307e\u308a\u3001Tomcat\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u6d88\u8cbb\u3057\u3066DB\u304c\u4e0d\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u306b\u307e\u3067\u5f71\u97ff\u3092\u53ca\u307c\u3057\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002<\/p>\n\n<p>\u305d\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u30af\u30a8\u30ea\u306b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u65bd\u3057\u305f\u3044\u3068\u601d\u3044\u3001\u307e\u305a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002<\/p>\n\n<pre><code class=\"language-java\">Statement stmt = connection.createStatement();\nstmt.setQueryTimeout(1);\n<\/code><\/pre>\n\n<p>\u3068\u3053\u308d\u304c\u3053\u306e\u65b9\u6cd5\u306f\u4e0a\u624b\u304f\u3044\u304d\u307e\u305b\u3093\u3002<\/p>\n\n<blockquote>\n<p>Method setQueryTimeout(int) is not yet implemented. <\/p>\n<\/blockquote>\n\n<p>\u306a\u3069\u306e\u3088\u3046\u306b\u8a00\u308f\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u5b9f\u88c5\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u304b\uff1f\uff08\u306a\u305c\uff1f\uff09\u305d\u308c\u3067\u306f\u3001\u30bf\u30a4\u30de\u30fc\u3092\u7528\u610f\u3057\u3066\u6a2a\u304b\u3089cancel\u3092\u3055\u305b\u308b\u3053\u3068\u3092\u8003\u3048\u307e\u3057\u305f\u3002<\/p>\n\n<pre><code class=\"language-java\">final Statement stmt = connection.createStatement();\nRunnable canceler = new Runnable() {\n    public void run() {\n        try {\n            stmt.cancel();\n        } catch (SQLException e) {\n            \/\/ I can do nothing :)\n        }\n    }\n};\nScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\nexecutor.schedule(canceler, 500, TimeUnit.MILLISECONDS);\n<\/code><\/pre>\n\n<p>\u3053\u306e\u65b9\u6cd5\u306f\u4e0a\u624b\u304f\u3044\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u306a\u306b\u305bLAN\u30b1\u30fc\u30d6\u30eb\u304c\u629c\u3051\u3066\u3044\u308b\u306e\u3067cancel\u3059\u3089\u5230\u9054\u3057\u306a\u3044\u3088\u3046\u3067\u3059\u3002<\/p>\n\n<p>\u305d\u308c\u3067\u306f\u3001\u9006\u306e\u767a\u60f3\u3067\u3001\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u30c6\u30b9\u30c8\u3092\u3055\u305b\u3066\u3001\u30e1\u30a4\u30f3\u306e\u30b9\u30ec\u30c3\u30c9\u306fjoin\u3092\u3057\u3066\u3001\u5236\u9650\u6642\u9593\u3092\u904e\u304e\u308c\u3070\u30b9\u30eb\u30fc\u3057\u3066\u7d42\u4e86\u3059\u308b\u5b9f\u88c5\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002<\/p>\n\n<pre><code class=\"language-java\">final Statement stmt = connection.createStatement();\nclass Checker implements Runnable {\n    boolean succeeded = false;\n    public void run() {\n        try {\n            try {\n                stmt.execute(\"SELECT 1\");\n                succeeded = true;\n            } finally {\n                stmt.close();\n            }\n        } catch (SQLException e) {\n            \/\/ I can do nothing :)\n        }\n    }\n}\nChecker checker = new Checker();\nThread thread = new Thread(checker);\nthread.start();\ntry {\n    thread.join(1000);\n} catch (InterruptedException e) {\n   \/\/ i can do nothing :)\n}\nreturn !checker.succeeded;\n<\/code><\/pre>\n\n<p>\u3053\u306e\u65b9\u6cd5\u3067\u3068\u308a\u3042\u3048\u305a\u4f55\u3068\u304b\u3057\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3067\u3082\u306a\u3093\u3060\u304bchecker\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u6d88\u8cbb\u3057\u305d\u3046\u306a\u306e\u3068\u6bce\u56de\u30b9\u30ec\u30c3\u30c9\u751f\u6210\u3059\u308b\u306e\u3067\u9045\u304f\u306a\u308a\u305d\u3046\u3067\u3059\u306d\u2026\u2026\u3002\u80cc\u306b\u8179\u306f\u5909\u3048\u3089\u308c\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u304b\uff1f<\/p>\n<p style=\"margin-top: 0px; margin-bottom: 32px;>\n<script async src=\"\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:336px;height:280px\"\n     data-ad-client=\"ca-pub-4600091038664361\"\n     data-ad-slot=\"6658249733\"><\/ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n<\/script>\n<\/p>","protected":false},"excerpt":{"rendered":"<p>Tomcat\u3067Web\u30a2\u30d7\u30ea\u3092\u958b\u767a\u3057\u3066\u3044\u3066DB\u3068\u306e\u63a5\u7d9a\u306f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30ea\u30f3\u30b0\u3092\u3057\u3066\u3044\u308b\u3068\u306f\u3044\u3048\u3001\u4f55\u3089\u304b\u306e\u539f\u56e0\u3067Connection\u304c\u4f7f\u3044\u7269\u306b\u306a\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u518d\u63a5\u7d9a\u3092\u3059\u308b\u305f\u3081\u306b\u3001Co [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[47,42],"tags":[],"_links":{"self":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts\/628"}],"collection":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=628"}],"version-history":[{"count":4,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts\/628\/revisions"}],"predecessor-version":[{"id":1085,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts\/628\/revisions\/1085"}],"wp:attachment":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=628"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=628"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=628"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}