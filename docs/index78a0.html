<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>susumuis &#8211; susumuis Info</title>
	<atom:link href="https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;author=1" rel="self" type="application/rss+xml" />
	<link>https://susumuishigami.github.io/susumuisinfo</link>
	<description>Webエンジニア susumuis の技術ブログ</description>
	<lastBuildDate>Fri, 18 Nov 2022 16:55:34 +0000</lastBuildDate>
	<language>ja</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.4.3</generator>
	<item>
		<title>「Twitter終了」と聞いたら俄然意欲が湧いてきた</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2022/riptwitter</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Fri, 18 Nov 2022 16:36:59 +0000</pubDate>
				<category><![CDATA[Web技術]]></category>
		<category><![CDATA[生活]]></category>
		<category><![CDATA[論評]]></category>
		<guid isPermaLink="false"https://susumuishigami.github.io/susumuisinfo/?p=2024</guid>

					<description><![CDATA[「Twitter終了」がトレンドらしい。 当方、Twitter廃民の一人であるので、終了したら困る。非常に困る。 移行先どうこうではない。Twitterは空気だ。ツイートは呼吸だ。残念だがこの体は異国の地では生きられそう [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>「<a href="https://twitter.com/search?q=Twitter%E7%B5%82%E4%BA%86">Twitter終了</a>」がトレンドらしい。</p>

<p><strong>当方、Twitter廃民の一人であるので、終了したら困る。非常に困る。</strong></p>

<p>移行先どうこうではない。Twitterは空気だ。ツイートは呼吸だ。残念だがこの体は異国の地では生きられそうにない。</p>

<p>朝起きたらツイートをし、仕事の息抜きにツイートをし、ご飯を食べながらツイートをし、夜寝る前にツイートをする。休日もツイートしながら過ごしている。</p>

<p>最近の友達つながりはほぼ全てTwitterで作ってきた。「いいね」送り合うところから始まり、リプで絡んで、「ここぞ」というタイミングでDM送ってリアルに出会う。最近はそうして作った友達ばかりだ。</p>

<p>家にテレビがない、新聞も購読していない僕は、Twitterでニュースを知る。Twitterがなければ世の中を知ることもできないだろう。</p>

<p><strong>つまり、Twitterが終わったら、生活が終了する。僕の人生は終わりだ。</strong></p>

<p>どうしてこうなってしまったのだろうか？考えてみたら、むしろ意欲が湧いてきた。</p>

<p>そもそも、僕はASPというものが嫌いだった。Gmailもはてなも使いたくなかった。本来インターネットというのはオープンなプロトコルで分散された素敵な世界なのだ。それを「Web」という論文を共有するためのプロトコルの上に、Webメールやインターネット掲示板、Webチャットのような劣化されたソフトウェアを構築して何が嬉しいのだろうか。しかもソースコードはクローズドだ。SMTP/IMAP4、NNTP、IRCを使おう！それらはオープンだから誰でもサーバーやクライアントを作れる。SNSなんて「オープンなインターネッツをクローズドなものにする、なんてとんでもない邪悪なやつ！絶対にやるもんか！」</p>

<p>ところが「絶対にやるもんか！」と言った半年後mixi廃人になってた。Gmail以外のメールをもう10年以上使っていない。負けた。俺が悪かった。もうTwitterでつぶやいているだけで良いや。そして、いつしかブログも書かない「つい廃人」になっていた。</p>

<p><strong>しかし、今「Twitterが終わる」かもしれない。これは転機かもしれない！</strong></p>

<p>「Twitterがあるからいいや」という怠惰から目を覚ませ！Tweetはなんのオープンなプロトコルでもない。一企業のクローズドソースサービスじゃないか！お前の大事な発信を一企業にゆだねて良いのか！「HTML」というオープンフォーマットをなぜ使わない！</p>

<p>今、<a href="https://mstdn.jp/">mstdn.jp</a>や<a href="https://fedibird.com/">fedibird.com</a>のユーザーが増えているらしい。急なトラフィック増で、Twitterよりも瀕死になりつつ、中の人は頑張っている。僕もアカウントを作った。</p>

<p><a href="https://mstdn.jp/@susumuis">https://mstdn.jp/@susumuis</a></p>

<p><a href="https://fedibird.com/@susumuis">https://fedibird.com/@susumuis</a></p>

<p>これらを今後使うかどうかはこれから考える。しかし分かったことがある。面白いのは「マストドン」ではない、これらをつなぐ<a href="https://ja.wikipedia.org/wiki/Fediverse">Fediverse</a>というプロトコルがあるということだ！マストドンのユーザーが増えれば増えるほどFediverseのユーザーが増える。これこそがインターネッツではないか！</p>

<p>僕はプログラマーだ。簡単なWebアプリなら作れる。AWSを使えば個人用途のサーバーも立てられる。自分のサーバーから、自分のドメインを使って、Fediverseに発信したい！これが理想だと思う。毎月費用を払って取得しているドメイン、SSL証明書、まさに「公式」ではないか！</p>

<p>それに、何かまとめて発信したければブログを書けば良い。ストックされるし後から参照しやすい。今はWordPressで構築したブログを使っているけど、全然気に入っていないので、一旦廃止して、Djangoかなにかで独自のブログサービスを作りたい。その方がWordPressのプラグインをごった煮にするよりも楽に開発できる気がする。今はAWSもGitHub ActionsもあるからソースをPushしてDeployする仕組みを構築するのは容易だ。</p>

<p>10年前はこうは行かなかった。自分でサーバーを立てて、自分でWebアプリを作るのはバカのすることで、「天才」が作ったサービスに乗るのが良いとされた。だがどうだっただろう？末路はツイートしかできない廃人ではないか！</p>

<p><strong>よし！わかった手始めにこのブログを何とかしよう</strong></p>

<p>その次に、自分でMastdonサーバーを立ててFediverseに参加しよう。それには勉強しなければならないこともあるだろうから、初めはmstdn.jpかfedibird.comを使って勉強しよう。自分の発信をTwitterやFacebookのようなクローズドなプラットフォームを介さずにできたらなんて幸せだろう。そうだ、僕はそのためにインターネットをやっていたのだ！</p>

<p><strong>Twitter終了するならすれば良い。僕は技術者として大切なものを思い出せた気がした。</strong></p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>メイドちゃんbotの今と前世?</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2018/bot</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Wed, 19 Dec 2018 13:29:18 +0000</pubDate>
				<category><![CDATA[Python]]></category>
		<category><![CDATA[生活]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=2000</guid>

					<description><![CDATA[この記事はメイドアドベントカレンダー2018の19日目と、BeProud Advent Calendar 2018の19日目です。（BeProudの話は最後にちょっと出てきます！） 僕が運営するコミュニティ「メイドカフェ [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>この記事は<a href="https://adventar.org/calendars/3422">メイドアドベントカレンダー2018</a>の19日目と、<a href="https://adventar.org/calendars/3338">BeProud Advent Calendar 2018</a>の19日目です。（BeProudの話は最後にちょっと出てきます！）</p>

<p>僕が運営するコミュニティ「メイドカフェでノマド会」のSlackには「メイドちゃん」というbotが生息しています。一年前にも紹介しましたが、そのときはまだ生まれたてほやほやでした。</p>

<p><a href="http://www.susumuis.info/entry/2017/maidchan_bot">メイドちゃんbotをあなたに！ | susumuis.info</a></p>

<p>そのメイドちゃんがこの一年でどれだけ成長したかという話をします。</p>

<h1>メイドちゃんはソースコードも可愛くなきゃ！</h1>

<p>その前に<a href="https://github.com/susumuishigami/maidchan-slackbot">こちら</a>を見てください。</p>

<p>これはメイドちゃんbotのソースコードです。ところどころ日本語のソースコードがあります。</p>

<pre class=" language-python"><code class=" language-python" data-language="python">
雑談お仕事リスト = (
    どれがいいかな(),
    可愛い(),
    占って(),
    おはよう(),
    おやすみ(),
    おかえり(),
    お疲れ様(),
    行ってらっしゃい()
)

def 雑談カフェのお仕事(body):
    """
    雑談カフェチャネルでのメイドちゃんのお仕事だよ！
    """
    text = body['text']

    for お仕事 in 雑談お仕事リスト:
        if お仕事.呼び出し(text, body):
            return お仕事.やったよ(text, body)

    if 'XXX' == text:
        # 例外テスト
        print(10/0)
</code></pre>

<p>なぜこんなことをしているのでしょうか？それは、その方が「可愛い」と思ったからです。ゆくゆくはノマド会のメイドさんにもプログラミングして機能を追加してもらいたいと思っています。その時、</p>

<pre class=" language-python"><code class=" language-python" data-language="python">
WORK_OF_RANDOM = (
    ChoiseWork(),
    CuteWork(),
    FortuneTelling(),
    GoodBorning(),
    GoodNight(),
)
</code></pre>

<p>これでは外国のメイドさんみたいですね。まあ、メイドの本場は英国なので良いかも知れませんが、敷居が高すぎな気がします。そんなことを考えてたら自然とソースコードが日本語になってました。</p>

<p>ただ、Pythonで日本語プログラミングすると、色々難があることがわかりました。</p>

<ul>
    <li>大文字小文字の概念がなく、定数と変数の区別ができない</li>
    <li>ならば【】みたいな記号を使って区別しようとしようとしたが、律儀にも多バイト文字も記号は記号と判定されて変数や関数名の先頭に使えない</li>
    <li>何より入力がめんどくさい！</li>
</ul>

<p>せめてローマ字にすればよかったと思います。</p>

<h1>メイドちゃんは何ができるようになったのか？</h1>

<p>さて、お披露目以降にできるようになったことは次の機能です</p>

<ul>
    <li>占い</li>
    <li>毎朝の天気予報</li>
    <li>褒めてくれる</li>
    <li>セクハラ防止機能</li>
    <li>メイドちゃんを口説ける</li>
</ul>

<p>それぞれ紹介します。</p>

<h2>占い機能</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c.png"><img fetchpriority="high" decoding="async" class="alignnone wp-image-2008 size-large" src="http://www.susumuis.info/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c-1024x410.png" alt="" width="625" height="250" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c-1024x410.png 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c-300x120.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c-768x308.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c-624x250.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/cd6907c781214ce213810bf6a6e4256c.png 1502w" sizes="(max-width: 625px) 100vw, 625px" /></a></p>

<h2>毎朝の天気予報</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1.png"><img decoding="async" class="alignnone size-large wp-image-2009" src="http://www.susumuis.info/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1-1024x225.png" alt="" width="625" height="137" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1-1024x225.png 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1-300x66.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1-768x169.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1-624x137.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/b1faeb29e759cd800d73a4b09f4cfbb1.png 1520w" sizes="(max-width: 625px) 100vw, 625px" /></a></p>

<p>メイドちゃんのおかげで傘を忘れないで済んだことは何度かあります。</p>

<h2>褒めてくれる</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/0e3a4a08fe911b65ac032a33891915c0.png"><img decoding="async" class="alignnone size-full wp-image-2011" src="http://www.susumuis.info/wp-content/uploads/2018/12/0e3a4a08fe911b65ac032a33891915c0.png" alt="" width="550" height="129" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/0e3a4a08fe911b65ac032a33891915c0.png 550w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/0e3a4a08fe911b65ac032a33891915c0-300x70.png 300w" sizes="(max-width: 550px) 100vw, 550px" /></a></p>

<p>自分を褒めてもらうこともできます</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/e79b26f0390af2b7c89f6028cb36a985.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-2012" src="http://www.susumuis.info/wp-content/uploads/2018/12/e79b26f0390af2b7c89f6028cb36a985.png" alt="" width="437" height="99" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/e79b26f0390af2b7c89f6028cb36a985.png 437w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/e79b26f0390af2b7c89f6028cb36a985-300x68.png 300w" sizes="(max-width: 437px) 100vw, 437px" /></a></p>

<h2>セクハラ防止機能</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/c2e72547f846b55a5e395387cc629976.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-2015" src="http://www.susumuis.info/wp-content/uploads/2018/12/c2e72547f846b55a5e395387cc629976.png" alt="" width="426" height="210" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/c2e72547f846b55a5e395387cc629976.png 426w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/c2e72547f846b55a5e395387cc629976-300x148.png 300w" sizes="(max-width: 426px) 100vw, 426px" /></a></p>

<p>とかいう人がたまにいるので作りました。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/004aebd600ead0ad3e7e62a9b7cb925a.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-2014" src="http://www.susumuis.info/wp-content/uploads/2018/12/004aebd600ead0ad3e7e62a9b7cb925a.png" alt="" width="458" height="115" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/004aebd600ead0ad3e7e62a9b7cb925a.png 458w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/004aebd600ead0ad3e7e62a9b7cb925a-300x75.png 300w" sizes="(max-width: 458px) 100vw, 458px" /></a></p>

<p>桁数はプログラミングした僕が覚えてる範囲までです(；・∀・)</p>

<h2>メイドちゃんを口説こう！</h2>

<p>他にもいろんなことができます。でも、ヘルプコマンドはありません！だって仕様をさらけ出すなんて恥ずかしいじゃないですか(<em>´ω｀</em>)！どうしても知りたければメイドちゃんを口説きましょう。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/d3a9239ffbb56b708be613c2820275c0.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-2013" src="http://www.susumuis.info/wp-content/uploads/2018/12/d3a9239ffbb56b708be613c2820275c0.png" alt="" width="511" height="123" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/d3a9239ffbb56b708be613c2820275c0.png 511w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/d3a9239ffbb56b708be613c2820275c0-300x72.png 300w" sizes="(max-width: 511px) 100vw, 511px" /></a></p>

<p>メイドちゃん「可愛い」というと何回かに一回、できることを教えてくれます！</p>

<h1>メイドさんの前世？</h1>

<p>僕の勤務先のBeProud社では業務にSlackを活用しています。そこにはharoというbotが住んでいます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/ba9ee01a1216e2e54227c878ca049a29.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-2017" src="http://www.susumuis.info/wp-content/uploads/2018/12/ba9ee01a1216e2e54227c878ca049a29.png" alt="" width="693" height="254" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/ba9ee01a1216e2e54227c878ca049a29.png 693w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/ba9ee01a1216e2e54227c878ca049a29-300x110.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/ba9ee01a1216e2e54227c878ca049a29-624x229.png 624w" sizes="(max-width: 693px) 100vw, 693px" /></a></p>

<p>お分かりですね。メイドちゃんの一部の機能はharoから移植しました。</p>

<p><a href="https://github.com/beproud/beproudbot">haro</a>もソースコードが公開されています。haroはMITライセンスなので</p>

<pre class=" language-python"><code class=" language-python" data-language="python">
        # The uranai() function is:
        #
        #    Copyright (c) 2016 beproud
        #    https://github.com/beproud/beproudbot</code></pre>

<p>このように書いて正しく流用しています。</p>

<p>( ﾟдﾟ)ﾊｯ!</p>

<p>メイドちゃんの前世はヘビだったんだね！?</p>

<h1>haroをメイドちゃんが代行したこともあるよ！</h1>

<p>ある日haroがメンテナンス中でみんな大好きな占い機能ができなかった時</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/e985c0d716c6b7a8a2c491af5325a225.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-2018" src="http://www.susumuis.info/wp-content/uploads/2018/12/e985c0d716c6b7a8a2c491af5325a225.png" alt="" width="467" height="531" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/e985c0d716c6b7a8a2c491af5325a225.png 467w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/e985c0d716c6b7a8a2c491af5325a225-264x300.png 264w" sizes="(max-width: 467px) 100vw, 467px" /></a></p>

<p>メイドちゃんが代行してくれたよ！</p>

<h1>まとめ</h1>

<ol>
    <li>メイドちゃんはこの一年間で成長したよ！</li>
    <li>メイドちゃんはソースコードも可愛い</li>
    <li>メイドちゃんに可愛いって言ってあげるといいことがあるよ</li>
    <li>メイドちゃんを困られること言っちゃだめだよ！</li>
    <li>メイドちゃんの前世はヘビ</li>
</ol>

<p>そう考えると、僕がBeProudに勤めていなかったらメイドちゃんは作られなかったと思います。僕がharo（及び前バージョンのbeproudbot）を見て可愛いと思ったから、メイドちゃんを作ろうと思ったんだと思います。haro可愛いよ！</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>ビープラウドに入社して2年間で一番学んだこと</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2018/beproud</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Mon, 03 Dec 2018 13:43:59 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1984</guid>

					<description><![CDATA[この記事は BeProud Advent Calendar 2018 の3日目です。 さて、何書くか考えてなかったまま担当の日を迎えてしまいました。そう言えばちょうど2年前の昨日ビープラウドに入社してから、技術者として転 [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/3338">BeProud Advent Calendar 2018</a> の3日目です。</p>

<p>さて、何書くか考えてなかったまま担当の日を迎えてしまいました。そう言えばちょうど2年前の昨日ビープラウドに入社してから、技術者として転職エントリ書いてなかったと思うので今更書こうと思います。（<a href="http://www.maid-cafe.work/2017/304">非技術者向けの転職エントリは書いています</a>）</p>

<h1>何で転職したんだっけ？</h1>

<p>前職では<a href="http://www.maid-cafe.work/2016/246">メイドが原因で失脚</a>しました。というのは半分面白くするための冗談です。今から7年前、前職は小さな会社でしたが<strong>「これから大きくなるぞ！」</strong>という勢いがありました。その時技術リーダーだった僕は発言権もそこそこあり<strong>「良い技術チームを作りたい」</strong>という意欲に燃えていました。しかし結果的によくある保守的な階層組織になってしまい、気づいたら発言権も失い、大変憂鬱な気持ちになっていました。</p>

<p>「当初色々意見を言えたのに、思ったのと違う結果になったのはなぜだろう。」「いっそ自分が作りたかった雰囲気に近いチームに、自らが飛び込んでみたら分かるのではないか？」「じゃあ、それに一番近いのはどこだろう？」そこで注目したのがビープラウドでした。実は、7年前の僕が参考にウォッチしていたいくつかの会社の一つだったんです。</p>

<p>幸い<a href="https://www.beproud.jp/careers/python/">採用ページ</a>を見るとこう思いました。</p>

<p><strong>Python以外のスキルセットはぴったりカバーしているじゃん！！</strong></p>

<p>Pythonが書きたくてビープラウドに入ったわけじゃなくてごめんなさい！ガチガチのJava屋さんだったので入社するまでPythonは全然書いたことがなかったです。Pythonは勉強しました。PyQっていうサービスで！ Dog feeding!?</p>

<h1>ビープラウドに2年いて学んだこと</h1>

<p>流石に2年もいたんだから何か掴めたはずです！入社以来僕を変えたことを、大きかった順に書いてみようと思います。</p>

<h2>1. 時間を大切にする</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/hanashi_nagai_man.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1990" src="http://www.susumuis.info/wp-content/uploads/2018/12/hanashi_nagai_man.png" alt="" width="180" height="180" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/hanashi_nagai_man.png 180w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/hanashi_nagai_man-150x150.png 150w" sizes="(max-width: 180px) 100vw, 180px" /></a></p>

<p><strong>「susumuisは話が長い、文章が長い」</strong>とはめっちゃ言われました。</p>

<p>入社して最初の自己紹介では1時間以上話し続け、その後も社内勉強会で20分の枠に40分話すなど時間配分がとにかく苦手でした。また、文章を書くと「susumuisの文章は長くて読みづらい」とめっちゃ言われました。</p>

<p>人の時間は貴重です。説明が長ければそれだけ相手の時間を奪ってしまいます。相手の時間を尊重する、自分の時間も大切にするという感覚が欠如してたんですね。</p>

<h2>2. わかりやすく伝える努力をする</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/presentation_slide_fukuzatsu.png"><img loading="lazy" decoding="async" class="alignnone wp-image-1989" src="http://www.susumuis.info/wp-content/uploads/2018/12/presentation_slide_fukuzatsu.png" alt="" width="165" height="165" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/presentation_slide_fukuzatsu.png 180w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/presentation_slide_fukuzatsu-150x150.png 150w" sizes="(max-width: 165px) 100vw, 165px" /></a></p>

<p><strong>「もっと分かりやすい図を書いて」</strong>みたいな指導をけっこうされました。</p>

<p>「仕様書は行間読め」僕はそんな文化で感じの人でした。汲める人が偉い人そう思っていました。ところが、この会社の人たちめっちゃ丁寧に設計するし、図で説明するのが上手い人が多いです。</p>

<p>考えてみると、業務の大半って、人から人へ自分の考えを伝えることなんですね。そこを「汲んで」とかやると、意思伝達のミスが多発して、最後はおかしなことになるのだと思います。</p>

<h2>3. 根拠を示す</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/12/setsumeisyo_man.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1988" src="http://www.susumuis.info/wp-content/uploads/2018/12/setsumeisyo_man.png" alt="" width="180" height="180" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/setsumeisyo_man.png 180w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/12/setsumeisyo_man-150x150.png 150w" sizes="(max-width: 180px) 100vw, 180px" /></a></p>

<p>入社してから公式ドキュメントを読むことが増えました。社内ではレビューが盛んに行われます。そこでは、その技術判断をした根拠が必要です。まさか「<strong>よくわからないけどQiita読んで適当にやってたらできましたー（・_・）ノ</strong>」じゃダメですよねｗ</p>

<p>意見を言う時に根拠がないと、こう言うしかありません。</p>

<p><strong>「俺が正しい。俺を信じろ！」</strong></p>

<p>それで付いてくる人は少なくともエンジニアじゃなさそうです。。。</p>

<h2>なぜsusumuisは熱い想いを実現できなかったのか！</h2>

<p><strong><span style="font-size: 1rem;">自分がダメだったのは、この逆だったからです／(^o^)＼</span></strong></p>

<p><span style="font-size: 1rem;">頭の中にあった「熱い想い」が、実はちっとも伝わってなかったんですね！それは失脚するわけです！</span></p>

<h1>まとめ</h1>

<p>susumuisがビープラウドに入社して2年を振り返りました。</p>

<ol>
    <li>「良い技術チームを作りたい」という熱い思いが実現できなかった悔しさを持って転職した</li>
    <li>その結果学んだのは次のことだった
<ol>
    <li>時間を大切に。説明は簡潔に。</li>
    <li>相手に伝わりやすく伝える努力をする</li>
    <li>根拠を示して説明する</li>
</ol>
</li>
    <li>たとえ熱い想いがあっても伝える努力をしなければちっとも伝わらない</li>
</ol>

<p>もっと技術的な記事になるかと思ったけど、意外な結果だったなと思います。もちろん技術も学びました。Pythonは不安なく書けるようになったし、機械学習も学びました。でも技術は前提として、致命的な問題によってそれが活かせてなかったのかもしれません。</p>

<h1>BeProudコミュニケーションガイド</h1>

<p>現在社内でライフスタイル・コミュニケーションを作成中です。まだ策定中のβ版ですが、リポジトリは公開されています： <a href="https://github.com/beproud/beproud-guide">beproud-guide</a> 。読んでみると結構この記事で書いたことと近いことが書かれていると思います。</p>

<p>&nbsp;</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>eclipseでHTMLエディタの文字化けを直す方法</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2018/eclipse_html_charset</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Mon, 23 Jul 2018 03:14:09 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<category><![CDATA[開発環境]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1965</guid>

					<description><![CDATA[EclipseのHTMLエディタはcontent-type記述から文字コードを自動判別するが、DjangoテンプレートのようにHTMLの断片だけのファイルを開くと判別できず文字化けしてしまう。 回避するにはファイル個別に [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>EclipseのHTMLエディタはcontent-type記述から文字コードを自動判別するが、DjangoテンプレートのようにHTMLの断片だけのファイルを開くと判別できず文字化けしてしまう。</p>

<p>回避するにはファイル個別に文字コードを指定すること。フォルダやプロジェクト、ContentTypeのデフォルトの文字コードを指定しても、自動判別をしてしまって強制的にShift_JISとして読み込んでしまう。これを直したい。</p>

<h2>直す方法</h2>

<p>Macの場合</p>

<pre><code class="language-sh">
$ cd /Applications/Eclipse.app/Contents/Eclipse/plugins
$ jar -xvf org.eclipse.wst.html.core_1.3.0.v201804302243.jar plugin.xml plugin.xml
$ vim plugin.xml 
</code></pre>

<p>次の部分 <code>note: no default-charset for HTML, should use 'platform'</code> の下のdescriberをコメントアウトする</p>

<pre><code class="language-xml">
&lt;!-- note: no default-charset for HTML, should use 'platform'
&lt;describer class="org.eclipse.wst.html.core.internal.contenttype.ContentDescriberForHTML" /&gt;
 --&gt;
</code></pre>

<pre><code class="language-sh">
$ jar -uf org.eclipse.wst.html.core_1.3.0.v201804302243.jar plugin.xml plugin.xml 
</code></pre>

<p>これでプロジェクトや親フォルダの文字コードを優先して従うようになった。</p>

<h2>考察</h2>

<p>この動作、Java使いだった頃は全然気にならなかったのに、Python/Django使いになったら真っ先に気になった。</p>

<p>Mayaaテンプレートはブラウザで表示できる「ページ」だから、むしろ自動判別が正しい（忘れてたり指定が間違ったら「正しく化けて欲しい」）。<br />
JSPの場合もpageEncodingディレクティブがある。忘れたらサーバーサイドで化ける。</p>

<p>Djangoテンプレートはいずれの記述もない。この辺りも文化の違いなのかな。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>PyPro3は機械学習の仕事に初めて関わるプログラマーにもおすすめの本です</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2018/pypro3</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Sat, 23 Jun 2018 06:21:12 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1946</guid>

					<description><![CDATA[&#160; ビッグデータの活用が進み、機械学習をシステムに組み込む事例が増えています。これまで Webや業務システムを開発していたプログラマーも、今後「機械学習プロジェクト」に参加することが増えていくでしょう。 しかし [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>&nbsp;</p>

<p>ビッグデータの活用が進み、機械学習をシステムに組み込む事例が増えています。これまで Webや業務システムを開発していたプログラマーも、今後「機械学習プロジェクト」に参加することが増えていくでしょう。</p>

<p>しかし、<strong>初めての分野の仕事は緊張しますし、コツが分かっていないと失敗することがあり、不安</strong>になってしまう方も多いのではないでしょうか。そのような方のために、6月12日に発売した<strong>「<a href="https://amzn.to/2Kbsk1w">Pythonプロフェッショナルプログラミング 第3版</a>」（株式会社ビープラウド著）</strong>では、<strong>第15章</strong>「<strong>プログラマーのための機械学習</strong>」の執筆を担当し、自分が仕事を通じて理解したノウハウや仕事をする上での心がけを書きました。</p>

<iframe style="width: 120px; height: 240px;" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=esuai-22&amp;o=9&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=4798053821&amp;linkId=5266f1931e98f0cbde44bd23cb82487c" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" data-mce-fragment="1"></iframe>

<h2>本の概要</h2>

<p>この本はハイレベルなPythonエンジニアが集うビープラウド社が日々の業務で培った開発手法をまとめた本で、ビープラウドのメンバーが分担して執筆しています。この一冊で開発環境の構築、開発チームコミュニケーション、テストやCI、パフォーマンス改善、Djangoから機械学習まで幅広く網羅しています。詳しくは<a href="https://shacho.beproud.jp/">haru</a>, <a href="http://www.freia.jp/taka/blog/python-professional-programming-3rd/index.html">shimizukawa</a>, <a href="https://blog.mtb-production.info/entry/2018/06/15/192053">mtb_beta</a>が書いている記事を御覧ください。</p>

<p>すでに多くの方がお買い上げいただいているようで、一時、<strong>Amazonの開発技法カテゴリで売れ筋1位</strong>だったそうです。ここでは、既にお買い上げ頂いた方でこれから15章を読む人に向けて、まだお買い上げいただいていない方に15章という切り口での宣伝を少し書かせていただきます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-e1529732958347.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1947" src="http://www.susumuis.info/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-300x237.jpg" alt="" width="300" height="237" /></a></p>

<h2>15章は誰に読んでほしいか</h2>

<p>冒頭に書いたとおり、<strong>これから機械学習を仕事として経験するプログラマー</strong>を主なターゲットとしていますが、次のような幅広いにも読んで頂けるのではないかと思います。</p>

<ul>
    <li>プログラマーを管理するプロジェクトマネージャー</li>
    <li>システム開発会社の経営者</li>
    <li>機械学習を扱うコンサル</li>
</ul>

<p>Pythonプロフェッショナルプログラミング全体の読者層を想定しているため、プログラミングの知識は前提として書いていますが、数式など機械学習やデータサイエンスの専門知識は一切不要です。</p>

<h2>15章執筆者の狙い</h2>

<p><em>「教師あり、教師なし、強化学習に分かれ、教師あり学習は分類、回帰がある」</em>といったよくある説明は一切カットしました。それらを説明している本はたくさんあるからです。今、専門知識を教えてくれる本はたくさん出ています。自分も<a href="https://akiba-tech-reading.connpass.com/">読書会</a>を通じて勉強する場を作っています。</p>

<p>一方、プログラマー視点での「仕事の進め方」の本は現時点ではありません。</p>

<p>本職のプログラマーのみなさんが仕事を始めた時、専門知識以外に何を覚えたでしょうか？<strong><em>「</em></strong><span style="font-size: 1rem;"><strong><em>要件定義、設計、開発、テスト、納品」</em></strong>という仕事の流れとスケジューリングの大切さではないでしょうか？仕事の流れがわかっていれば、優先順位やスケジュール感を身につけることができます。それが分かれば適切なタイミングでマネージャーに相談することもできます。</span></p>

<p><span style="font-size: 1rem;">しかし、機械学習の仕事では、ウォーターフォールのような開発モデルをうまく適用できません。そこで、<strong>従来のシステム開発の知識がある人に何を補ったら効率よく仕事で活躍できるのか？</strong>そのことに注力して執筆しています。</span></p>

<h2>15章に書いたこと書かなかったこと</h2>

<p>よって、この章を読んだ人が得られると思うことは次のことです</p>

<ul>
    <li>「機械学習」のざっくりした概念</li>
    <li>機械学習を含んだプロジェクトの全体像とスケジュール感</li>
    <li>仕事をする上での心がけや作業の優先順位</li>
</ul>

<p>一方、次のことは書いていません</p>

<ul>
    <li>機械学習の専門知識</li>
    <li>機械学習アルゴリズムの説明</li>
    <li>数学的な理論</li>
</ul>

<p>これらを補うため、章末に参考書籍が書いてあります。これは筆者も実際に読んで学んだ本なので、順に読めば既に僕と同じレベルに達するとご理解ください。なお、今後僕の主催の<a href="https://akiba-tech-reading.connpass.com/">読書会</a>でもこれらの本を扱っていくかもしれません。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/06/P_20180606_181412_vHDR_Auto.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1951" src="http://www.susumuis.info/wp-content/uploads/2018/06/P_20180606_181412_vHDR_Auto-300x225.jpg" alt="" width="300" height="225" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_181412_vHDR_Auto-300x225.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_181412_vHDR_Auto-768x576.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_181412_vHDR_Auto-1024x768.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_181412_vHDR_Auto-624x468.jpg 624w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
15章の冒頭</p>

<h2>15章の構成と担当チーム</h2>

<p>15章は次のように4部構成になっています。</p>

<ol>
    <li>機械学習とは</li>
    <li>機械学習プロジェクトの概要</li>
    <li>事前検証フェーズ</li>
    <li>機械学習の開発環境を準備する</li>
</ol>

<p>自分はこの中でも1〜3節を執筆しました。しかし実際は1、2節は非常に短いので、実質1〜3節で1セットだとご理解ください。</p>

<p>4節は同僚で、同じく機械学習案件を多数経験し、専門知識やライブラリの使い方の知識が豊富な先輩であるmasayaが執筆しています。masayaと僕は同じプロジェクトのチームになったことがあり、僕が外部調整や個々の処理の糊付け的な開発を担当し、内部のエンジンをmasayaが作りきるという役割分担をして大きな機械学習システムを完成させた仲です。今回も同じチームで1つの章を担当できたことを嬉しく思います。</p>

<p>章末コラム「機械学習で知っておきたいプログラミングテクニック」は2人の合作です！実際の仕事を通じて切実に感じたことを厳選して書いています。</p>

<h2>はじめての執筆の感想</h2>

<p>2017年9月末に執筆を開始、3月に脱稿、その後度々レビューを直しを経て5月にようやく最終稿を出すことができました。</p>

<p>脱稿まで一体どんな文章を僕が書いていたのか、多くの方にはご心配をおかけしたと思います。僕自身何度もほぼ一から書き直し、構成にドラスティックな変更を加え、一日中日本語のリファクタリングに追われる日々でした。</p>

<p>脱稿後のレビュー直しも大変で、最後は自分一人で文章を書くことができなくなり、意見をくれた数人を招集し、修正方針を練る会議を行っていました。</p>

<p>初めての執筆だったので、執筆チーム、レビュアーチームの皆さんには大変ご迷惑をおかけしました。特に全体のマネージメントを行う傍ら苦しむ僕の道筋を示し続けてくれた<a href="https://twitter.com/takanory">takanory</a>、同じ章担当で積極的に意見をくれたmasaya、レビューで厳しい指摘と温かいアドバイスをくれた<a href="https://twitter.com/haru860">haru</a>, <a href="https://twitter.com/shimizukawa">shimizukawa</a>, <a href="https://twitter.com/kashew_nuts">kashew_nuts</a>, <a href="https://twitter.com/mtb_beta">mtb_beta</a>, tsutomu, <a href="https://twitter.com/hajime_nakagami">nakagami</a>、説明を分かりやすくするために協力してくれた<a href="https://twitter.com/natsu_bm">natsu</a>, <a href="https://twitter.com/NaoY_py">nao_y</a>に感謝します。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-1.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1952" src="http://www.susumuis.info/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-1-286x300.jpg" alt="" width="286" height="300" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-1-286x300.jpg 286w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-1-768x806.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-1-975x1024.jpg 975w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2018/06/P_20180606_162056_vHDR_Auto-1-624x655.jpg 624w" sizes="(max-width: 286px) 100vw, 286px" /></a><br />
見本を手に取りはしゃいで自撮りする僕</p>

<h2>まとめ</h2>

<p>以上、<a href="https://amzn.to/2Kbsk1w">Pythonプロフェッショナルプログラミング 第3版</a>は「機械学習」の本としても他の本では得られない、個性的な位置づけの内容を含んでいるますので、是非読んでいただければと思います。</p>

<p>まだ、ご購入いただいていない方は、全国の書店またはAmazonなどで購入できます。電子書籍版もあります。</p>

<iframe style="width: 120px; height: 240px;" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=esuai-22&amp;o=9&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=4798053821&amp;linkId=5266f1931e98f0cbde44bd23cb82487c" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" data-mce-fragment="1"></iframe>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>メイドちゃんbotをあなたに！</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2017/maidchan_bot</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Sun, 24 Dec 2017 10:56:20 +0000</pubDate>
				<category><![CDATA[Python]]></category>
		<category><![CDATA[Web技術]]></category>
		<category><![CDATA[メイドさんでも分かるプログラミング]]></category>
		<category><![CDATA[勉強会レポート]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1922</guid>

					<description><![CDATA[この記事は メイド Advent Calendar 2017 の24日目です。メリークリスマス・イブ！ 昨日のメイドカフェで勉強会第1回に参加していただいた方は誠にありがとうございます。そのスライドはこちらに公開していま [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/2107">メイド Advent Calendar 2017</a> の24日目です。メリークリスマス・イブ！</p>

<p>昨日の<a href="https://maid-cafe-nomad.connpass.com/event/72257/">メイドカフェで勉強会第1回</a>に参加していただいた方は誠にありがとうございます。そのスライドはこちらに公開しています。</p>

<iframe loading="lazy" src="https://docs.google.com/presentation/d/e/2PACX-1vRK6B5vK_EK46KdE-VmGBNzYs_PokzDrzKuetyA0W9y0HKAVbRhO9TPmjfDOfrjuO-p6JD2hKZtFXp0/embed?start=false&amp;loop=false&amp;delayms=3000" width="960" height="569" frameborder="0" allowfullscreen="allowfullscreen"></iframe>

<p>さて、惜しくも<strong>メイドさんが選ぶ可愛いbot MVP</strong>の受賞を逃しましたが、当日はその場でライブコーディングをしてメイドさんの機能をその場で追加することもできたので、ボットを作る楽しさを伝えられたと思います。</p>

<p>さて、この記事ではオープンソースであるメイドちゃんbotを、自分の好きな場所に配置する方法を説明します。つまり、<strong>クリスマスプレゼントはメイドちゃんです！</strong>想定の読者として、メイドさんでも分かるようん心がけようと思います。</p>

<p>ほぼ重複することになってしまうので、メイドちゃんbotを作るにあたって特筆すべき箇所をメイドさんに説明するように優しく説明を心がけてみたいと思います。</p>

<p>前提として、AWSに登録する必要があります。ここでは説明しきれないので、まだ登録していない人は<a href="https://aws.amazon.com/jp/register-flow/">ここを読んで</a>コンソール画面にログインした状態まで来てください！</p>

<h2>地域はバージニア北部を選択</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/awsconsole.png"><img loading="lazy" decoding="async" class="alignnone size-large wp-image-1930" src="http://www.susumuis.info/wp-content/uploads/2017/12/awsconsole-1024x565.png" alt="" width="625" height="345" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/awsconsole-1024x565.png 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/awsconsole-300x165.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/awsconsole-768x423.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/awsconsole-624x344.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/awsconsole.png 1159w" sizes="(max-width: 625px) 100vw, 625px" /></a></p>

<p>突然ですが、メイドちゃんbotは<strong>アメリカ東海岸</strong>の<a href="https://ja.wikipedia.org/wiki/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%8B%E3%82%A2%E5%B7%9E">バージニア</a>北部に配置することをオススメします！なぜこの地域にいるかというと <strong>1. <a href="https://aws.amazon.com/jp/api-gateway/pricing/">安いから</a></strong> <strong>2. <a href="http://www.iputilities.net/result.php?userip=slack.com">どうやらSlackのサーバーはここにあるらしい</a></strong>？という理由からです。</p>

<h2>Lambdaを作成</h2>

<p>Lambdaの画面を開いたら<strong>関数の作成</strong>ボタンを押します。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/a8341bf64d18fc7c59cba7bb9e9b2462.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1931" src="http://www.susumuis.info/wp-content/uploads/2017/12/a8341bf64d18fc7c59cba7bb9e9b2462.png" alt="" width="995" height="108" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/a8341bf64d18fc7c59cba7bb9e9b2462.png 995w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/a8341bf64d18fc7c59cba7bb9e9b2462-300x33.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/a8341bf64d18fc7c59cba7bb9e9b2462-768x83.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/a8341bf64d18fc7c59cba7bb9e9b2462-624x68.png 624w" sizes="(max-width: 995px) 100vw, 995px" /></a></p>

<p><strong>関数の作成</strong>画面に遷移したら、<strong>設計図</strong>を選んで、検索フォームに <strong>API</strong>と入力して<strong>Enterキー</strong>、さらに <strong>Python</strong> と入力して<strong>Enterキー</strong>を押します。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/f83bf5d77848cc600c55737825bdffcb.png"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1932" src="http://www.susumuis.info/wp-content/uploads/2017/12/f83bf5d77848cc600c55737825bdffcb-300x206.png" alt="" width="300" height="206" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/f83bf5d77848cc600c55737825bdffcb-300x206.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/f83bf5d77848cc600c55737825bdffcb-768x528.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/f83bf5d77848cc600c55737825bdffcb-624x429.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/f83bf5d77848cc600c55737825bdffcb.png 919w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<p>そうしたら、出て来る <strong>microservice-http-endpoint-python3</strong> をクリックします。そして、遷移する画面では次のように入力します。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/5ce645e4011852432d2ae38c96b58d61.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1933" src="http://www.susumuis.info/wp-content/uploads/2017/12/5ce645e4011852432d2ae38c96b58d61.png" alt="" width="789" height="559" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/5ce645e4011852432d2ae38c96b58d61.png 789w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/5ce645e4011852432d2ae38c96b58d61-300x213.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/5ce645e4011852432d2ae38c96b58d61-768x544.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/5ce645e4011852432d2ae38c96b58d61-624x442.png 624w" sizes="(max-width: 789px) 100vw, 789px" /></a></p>

<p><strong>名前</strong>、<strong>ロール名</strong>は好きな名前でもokです。ポリシーテンプレートは「<strong>シンプルなマイクロハーネスのアクセス権限</strong>」のみでOKです。</p>

<p>次に、画面を下の方にスライドして、<strong>api-gateway</strong>の設定をします。</p>

<p>ここで注意しなければいけないのは、<strong>セキュリティ</strong>のところを<strong>オープン</strong>にしなければならないことです。僕はここで数十分ハマりました！</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/3b1e01c9e19ed205b8acc6b47d09e435.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1934" src="http://www.susumuis.info/wp-content/uploads/2017/12/3b1e01c9e19ed205b8acc6b47d09e435.png" alt="" width="871" height="609" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/3b1e01c9e19ed205b8acc6b47d09e435.png 871w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/3b1e01c9e19ed205b8acc6b47d09e435-300x210.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/3b1e01c9e19ed205b8acc6b47d09e435-768x537.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/3b1e01c9e19ed205b8acc6b47d09e435-624x436.png 624w" sizes="(max-width: 871px) 100vw, 871px" /></a></p>

<p>さらに下に行くと<strong>関数の作成</strong>というボタンがあるのでそれを押します。ソースコードはとりあえず触らずにそのままにします。そうすると、こんな画面になります。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21.png"><img loading="lazy" decoding="async" class="alignnone size-large wp-image-1935" src="http://www.susumuis.info/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21-1024x516.png" alt="" width="625" height="315" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21-1024x516.png 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21-300x151.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21-768x387.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21-624x314.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/9066c66d07b5378941a194e3aa6e7b21.png 1086w" sizes="(max-width: 625px) 100vw, 625px" /></a></p>

<p>これで準備が整ったので、ここでメイドちゃんbotの仕組みを説明します。</p>

<h2>メイドちゃんがユーザーの投稿に反応する仕組み</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/0ca9477aca19b7d7750b94981c04dcba.png"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1924" src="http://www.susumuis.info/wp-content/uploads/2017/12/0ca9477aca19b7d7750b94981c04dcba-300x128.png" alt="" width="300" height="128" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/0ca9477aca19b7d7750b94981c04dcba-300x128.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/0ca9477aca19b7d7750b94981c04dcba-624x267.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/0ca9477aca19b7d7750b94981c04dcba.png 643w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<p>メイドちゃんはユーザーの投稿に即座に反応します。この仕組みは「<strong>発信Webフック</strong>」(英語の場合は Outgoing Webhook)という仕組みを使います。これは、指定したチャンネルの中で特定のキーワードから始まる投稿があったら、指定したURLへAPI呼び出しをしてくれるというものです。<a href="http://www.susumuis.info/entry/2016/web">APIとは何か？</a></p>

<p>ここで、メイドちゃんが反応するキーワードを登録できれなよかったのですが、ここでは前方一致になってしまうので、言葉の途中の単語に反応させられないので、<strong>全ての書き込みに反応するようにします。</strong></p>

<p>そうすると心配になるのは、API Gatewayの課金金額で、先ほど書いたリンク先によると100万回あたり3.5USドルが課金額です。これは月100万回というのは、<strong>一日中に渡って3秒に1回以上投稿されて、400円くらい</strong>です。現時点でのノマド会Slack規模だとほぼタダ同然だと思われます。</p>

<p>呼び出す先のURLはどこにすればいいでしょうか？これは、さっきの画面で次のようにして確認します。</p>

<p><strong> API Gateway</strong> をクリックして下の方に出てくる <strong>LambdaMicroservice</strong> の下の方に <strong>メソッド: ANY</strong> と書かれた文字の左にある<img src="https://s.w.org/images/core/emoji/14.0.0/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" />をクリックすると下のように<strong>詳細</strong>が出てくるので、その中の <strong>URLの呼び出し</strong> と書かれたhttps:// から始まるアドレスです。これをコピーします。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/dcef6240232efa99501c51d86ce43517-1.png"><img loading="lazy" decoding="async" class="alignnone wp-image-1937 size-full" src="http://www.susumuis.info/wp-content/uploads/2017/12/dcef6240232efa99501c51d86ce43517-1.png" alt="" width="788" height="642" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/dcef6240232efa99501c51d86ce43517-1.png 788w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/dcef6240232efa99501c51d86ce43517-1-300x244.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/dcef6240232efa99501c51d86ce43517-1-768x626.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/dcef6240232efa99501c51d86ce43517-1-624x508.png 624w" sizes="(max-width: 788px) 100vw, 788px" /></a></p>

<p>このURLを発信Webフックの設定画面で次このように設定します。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/70bad4114de3aab25424a5f9f12cdc02.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1938" src="http://www.susumuis.info/wp-content/uploads/2017/12/70bad4114de3aab25424a5f9f12cdc02.png" alt="" width="1008" height="662" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/70bad4114de3aab25424a5f9f12cdc02.png 1008w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/70bad4114de3aab25424a5f9f12cdc02-300x197.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/70bad4114de3aab25424a5f9f12cdc02-768x504.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/70bad4114de3aab25424a5f9f12cdc02-624x410.png 624w" sizes="(max-width: 1008px) 100vw, 1008px" /></a></p>

<p>ここで<strong>トークン</strong>という文字列があるのですが、これはあとで使用するのでコピーしておきます。</p>

<h2>メイドちゃんが定時で投稿する仕組み</h2>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/75f35c3aeb562a8d5acea1565015554c.png"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1925" src="http://www.susumuis.info/wp-content/uploads/2017/12/75f35c3aeb562a8d5acea1565015554c-300x170.png" alt="" width="300" height="170" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/75f35c3aeb562a8d5acea1565015554c-300x170.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/75f35c3aeb562a8d5acea1565015554c-624x353.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/75f35c3aeb562a8d5acea1565015554c.png 649w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<p>発信Webフックのみでは、メイドちゃんに8時になったら<strong>「おはようございます！ご主人様、お嬢様」</strong>と言われることができません！そこで使用するのが「<strong>着信Webhフック</strong>」（英語の場合は Incoming Webhook）です。</p>

<p>これは、Slackの側に投稿用のAPIを作成する仕組みでここにAPI呼び出しを行えば好きなアイコン・名前で投稿させることができます。</p>

<p>問題はどうやったら定時にそれを起動するかですが、<strong>CloudWatch Events</strong>を使うとそれができます。設定はとても簡単で画面でこの赤丸で囲った部分を選ぶだけです！</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1.png"><img loading="lazy" decoding="async" class="alignnone wp-image-1926 size-large" src="http://www.susumuis.info/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1-1024x364.png" alt="" width="625" height="222" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1-1024x364.png 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1-300x107.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1-768x273.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1-624x222.png 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1c69f24bbd56e43ceb7e61c4919fbda1.png 1223w" sizes="(max-width: 625px) 100vw, 625px" /></a></p>

<p>そして、下の方に<strong>トリガーの設定</strong>という欄が出て来るので、そこに次のように入力します。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/7175bdcf0f0f0f9e16280b50c239e944.png"><img loading="lazy" decoding="async" class="alignnone wp-image-1927 size-full" src="http://www.susumuis.info/wp-content/uploads/2017/12/7175bdcf0f0f0f9e16280b50c239e944.png" alt="" width="770" height="596" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/7175bdcf0f0f0f9e16280b50c239e944.png 770w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/7175bdcf0f0f0f9e16280b50c239e944-300x232.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/7175bdcf0f0f0f9e16280b50c239e944-768x594.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/7175bdcf0f0f0f9e16280b50c239e944-624x483.png 624w" sizes="(max-width: 770px) 100vw, 770px" /></a></p>

<p>スケジュール式 <strong>cron(0 * * * ? *)</strong> という記法は、古いエンジニアにはおなじみの記法なのですが、<a href="http://docs.aws.amazon.com/ja_jp/lambda/latest/dg/tutorial-scheduled-events-schedule-expressions.html">AWSさんはちゃんと説明を書いてくれています</a>。</p>

<h2>ソースコード解説</h2>

<p>ということで準備が整ったのでコードを書きます。こんな感じのWeb上のエディタでコードを書けます。環境構築しなくていいので楽でいいですｗ</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/fe94ac16c84e80ae1c289aca82562d5f.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1928" src="http://www.susumuis.info/wp-content/uploads/2017/12/fe94ac16c84e80ae1c289aca82562d5f.png" alt="" width="948" height="515" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/fe94ac16c84e80ae1c289aca82562d5f.png 948w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/fe94ac16c84e80ae1c289aca82562d5f-300x163.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/fe94ac16c84e80ae1c289aca82562d5f-768x417.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/fe94ac16c84e80ae1c289aca82562d5f-624x339.png 624w" sizes="(max-width: 948px) 100vw, 948px" /></a></p>

<p>ここに<a href="https://github.com/susumuishigami/maidchan-slackbot">GitHubからソースコード</a>をコピペすれば動きますｗ</p>

<p>と、これだけでは顰蹙を買うので簡単に説明すると、<strong> lambda_function.py</strong> とうファイルの <strong>def lambda_hander(event, context):</strong> という関数の内側が、APIや定時Eventの際に実行されます。ここで、API経由なのか、定時Event経由なのかを分岐して、 <strong>maidchan_http.py</strong> か <strong>maidchan_scheduled.py</strong> に分岐させています。</p>

<p>あとは、オブジェクト指向とか難しい書き方は一切していないので好き勝手にいじってくださいｗ</p>

<h2>環境変数の設定</h2>

<p>メイドちゃんbotをノマド会Slackだけでなくどこにでも置くことができるように、そもそも「メイドちゃん」ですらなく「執事ちゃん」など別の人格も作れるようにしているのが、この「環境変数」です。</p>

<p><strong>WEBHOOK_URL</strong>の欄には、先ほど着信Webフックの画面で生成したURLを貼り付けます。</p>

<p><strong>TOKEN</strong>の欄には、先ほど発信Webの画面でコピーした<strong>トークン</strong>を貼り付けます。</p>

<p><strong>MAIDNAME</strong>の欄には好きな名前をどうぞ！</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/49778989d14858de48b4fb347c498835.png"><img loading="lazy" decoding="async" class="alignnone size-full wp-image-1929" src="http://www.susumuis.info/wp-content/uploads/2017/12/49778989d14858de48b4fb347c498835.png" alt="" width="939" height="320" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/49778989d14858de48b4fb347c498835.png 939w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/49778989d14858de48b4fb347c498835-300x102.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/49778989d14858de48b4fb347c498835-768x262.png 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/49778989d14858de48b4fb347c498835-624x213.png 624w" sizes="(max-width: 939px) 100vw, 939px" /></a></p>

<p>これで、あなたのもとにもメイドちゃんが来ます！</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/1392f20a3006d68eeb07d680e242e56d.png"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1939" src="http://www.susumuis.info/wp-content/uploads/2017/12/1392f20a3006d68eeb07d680e242e56d-300x117.png" alt="" width="300" height="117" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1392f20a3006d68eeb07d680e242e56d-300x117.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1392f20a3006d68eeb07d680e242e56d.png 594w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<p>それでは、メイドちゃんと一緒に素敵なクリスマスを！</p>

<h2>参考にした記事</h2>

<p>手順の殆どはこちらの記事：<a href="https://qiita.com/exabugs/items/e868df55333d0805acb2">AWS Lambda を使って Slack ボット (命名: Lambot [ランボー]) を低予算で作ろうじゃないか</a> をそのまま参考にしました。こちらの筆者の方、ノマド会参加者の方ですね！こんなところで、お世話になりました。</p>

<p>&nbsp;</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>Advent Calendarをきっかけに久しぶりにフィルムカメラを使ってみた</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2017/film_photo</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Sat, 09 Dec 2017 18:51:37 +0000</pubDate>
				<category><![CDATA[趣味]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1870</guid>

					<description><![CDATA[この記事は フィルムカメラ Advent Calendar 2017 10日目です。素敵なアドベントカレンダーを見つけたので参加させていただきました。 はじめに 今回は主に Minolta のMFカメラ XG-E, X- [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/2146#list-2017-12-01">フィルムカメラ Advent Calendar 2017</a> 10日目です。素敵なアドベントカレンダーを見つけたので参加させていただきました。</p>

<h2>はじめに</h2>

<p>今回は主に <strong>Minolta</strong> のMFカメラ <strong>XG-E, X-700</strong> を中心に、自分のフィルムカメラの思い出について書こうと思います。記事の最後に久しぶりにフィルムカメラでスナップしてきたものをアップします。</p>

<h2>筆者のプロフィール</h2>

<p>高校時代は写真部に所属して、自分でフィルム現像をしたりしたが、あくまで趣味の域。大学時代は登山をしていたためコンパクトデジタルを中心に変更。その後ずっとカメラからはご無沙汰となっていたが、最近メイドカフェ関係のイベントを主催するため、メイドさんの撮影をするために一眼レフの使用を再開しました。</p>

<p>撮影対象の遍歴：　鉄道 → 山 → メイドさん<br />
使用機材の遍歴：　MF一眼レフ → コンパクトデジカメ → ミラーレス</p>

<h2>XG-Eを持って高校写真部に入部</h2>

<p>今から20年くらい前、当時はAF（オートフォーカス）のフィルムカメラ全盛期でした。</p>

<p>親が突然<strong>「昔使っていたカメラを倉庫から見つけてきた。お前にやろう」</strong>と言ってくれたのが<strong>Minolta XG-E</strong>というカメラでした。素人には使い方も分からず、写真部の人たちに見せにいったら<strong>「なんだこれは！○○先輩に見せよう！」「ほうほう。お前、ミノルタのMF担当な！」</strong>となって、（どの道一人では使いこなせないので）入部させてもらって色々教えてもらいました・</p>

<p><div id="attachment_1878" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/2002_1104_181847AA.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1878" class="size-medium wp-image-1878" src="http://www.susumuis.info/wp-content/uploads/2017/12/2002_1104_181847AA-300x149.jpg" alt="" width="300" height="149" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2002_1104_181847AA-300x149.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2002_1104_181847AA-624x310.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2002_1104_181847AA.jpg 711w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1878" class="wp-caption-text">XG-E</p></div></p>

<p><div id="attachment_1879" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/2004_01_22_195038.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1879" class="wp-image-1879 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/2004_01_22_195038-300x225.jpg" alt="" width="300" height="225" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2004_01_22_195038-300x225.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2004_01_22_195038-768x576.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2004_01_22_195038-1024x768.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2004_01_22_195038-624x468.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2004_01_22_195038.jpg 1600w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1879" class="wp-caption-text">軍艦部</p></div></p>

<p>この頃、このXG-Eを首から下げてカメラ屋に行ったら年配のお客さんに<strong>「良いカメラ持ってるねー！今時はプラスティックばかりでだめだよねえ」</strong>などと声をかけられたりしました。たしかにね。冬なんか、ボディにほうを当てるとヒンヤリきたのを覚えています。（XG-Eはそれから10年くらい経った後、電源が入らなくなり完全にご臨終してしまいました）</p>

<p>レンズは <strong>MD-Rokkor 50/1.7</strong> を使っていました。50mmは標準レンズと言われますが、この画角はコンパクトカメラによくある28mmや35mmに比べると<strong>「随分狭いな」</strong>と当時は思いました。これ一本で3年間強制的に練習した結果、今は50mmという画角が好きです。（写真部仲間はみんなズームレンズを使うっていて、単焦点を使っているのは僕だけでした）</p>

<h2>XG-Eで撮影した写真</h2>

<p>主に高校〜大学1年生くらいの時に愛用していました。これは2003年夏に宗谷本線で稚内まで旅行したときのものです。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH030007.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1880" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH030007-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030007-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030007-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030007-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030007-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030007.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH030017.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1881" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH030017-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030017-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030017-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030017-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030017-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030017.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH030020.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1882" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH030020-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030020-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030020-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030020-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030020-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030020.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH030035.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1883" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH030035-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030035-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030035-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030035-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030035-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH030035.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<h2>X-700（1台目）</h2>

<p>X-700は1981年に発売し2000年頃まで生産されていた、MinoltaのMFカメラの完成形とも言えるカメラです。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/2003_0403_011645AA.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1889" src="http://www.susumuis.info/wp-content/uploads/2017/12/2003_0403_011645AA-300x118.jpg" alt="" width="300" height="118" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2003_0403_011645AA-300x118.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2003_0403_011645AA-768x302.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2003_0403_011645AA-1024x403.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/2003_0403_011645AA-624x246.jpg 624w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<p>高校3年生の時に新宿のマップカメラで買いました。当時はまだ各社のフィルムカメラの中古がずらーっと並んでいて楽しかったですね。これを選んだのは Minolta X シリーズでは一番状態のいいものが手に入れやすかったからです。購入時店員さんに<strong>「僕も持ってたんですよー！懐かしいなあ」</strong>と言われて盛り上がりました。</p>

<h2>X-700で撮影した写真（当時）</h2>

<p><div id="attachment_1888" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/Image606.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1888" class="wp-image-1888 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/Image606-300x200.jpg" alt="" width="300" height="200" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image606-300x200.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image606-768x512.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image606-1024x683.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image606-624x416.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image606.jpg 1344w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1888" class="wp-caption-text">2003年頃の津軽鉄道</p></div></p>

<p><div id="attachment_1886" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000017.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1886" class="wp-image-1886 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000017-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000017-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000017-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000017-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000017-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000017.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1886" class="wp-caption-text">2003年夏宗谷本線</p></div></p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/Image303-1.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1887" src="http://www.susumuis.info/wp-content/uploads/2017/12/Image303-1-200x300.jpg" alt="" width="200" height="300" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image303-1-200x300.jpg 200w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image303-1-768x1152.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image303-1-683x1024.jpg 683w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image303-1-624x936.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/Image303-1.jpg 896w" sizes="(max-width: 200px) 100vw, 200px" /></a></p>

<p>鉄な写真が多いのは鉄だったからですｗ</p>

<h2>2度目のX-700</h2>

<p>そんなX-700も一度は手放してしまい、大学生の頃は登山をしていたのでCoolpix 2100など軽くて、壊れてもそんなにショックではないコンパクトデジカメをメインにしていました。就職後はそれも手放して写真から離れていたのですが、3年前に思い立って再度X-700を手に入れました。レンズは前より少し良い MD-Rokkor 50mm/1.4 を付けました。本体とレンズそれぞれ 10000円くらいだったと思います。</p>

<p><div id="attachment_1884" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1046.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1884" class="size-medium wp-image-1884" src="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1046-300x169.jpg" alt="" width="300" height="169" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1046-300x169.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1046-768x432.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1046-1024x576.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1046-624x351.jpg 624w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1884" class="wp-caption-text">X-700 軍艦部</p></div></p>

<div class="mceTemp"></div>

<p>撮影対象は時の流れとともに変わっていました。</p>

<p>最近はメイドカフェ関係によく出入りするのですが、この界隈にはレイヤー（コスプレイヤー）さんの撮影を趣味としている方が多く訪れるので、彼らはとても高スペックなカメラを持っています。そんな中で埋もれないためには<strong>いっそこれくらい振り切ったほうが注目されるだろう</strong>という、あざとい魂胆もあったりしますｗ</p>

<h2>X-700で撮影した写真（最近）</h2>

<p>久しぶりに使ってみると、年で目が悪くなったのか、以前よりもピンボケと手ブレ写真を続出しました。それがかえって女の子から<strong>「雰囲気出る」</strong>と喜ばれたりもしました。。。orz</p>

<p><div id="attachment_1890" style="width: 219px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/0021.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1890" class="wp-image-1890 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/0021-209x300.jpg" alt="" width="209" height="300" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/0021-209x300.jpg 209w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/0021.jpg 715w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/0021-624x894.jpg 624w" sizes="(max-width: 209px) 100vw, 209px" /></a><p id="caption-attachment-1890" class="wp-caption-text">鈴峰桐さん（MD-Rokkor 50/1.4 φ49）</p></div></p>

<p><div id="attachment_1891" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/1511770722870.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1891" class="wp-image-1891 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/1511770722870-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1511770722870-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1511770722870-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1511770722870-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1511770722870-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/1511770722870.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1891" class="wp-caption-text">藤佳あやらさん （MD-Rokkor 50/1.4 φ49）</p></div></p>

<h2>MFカメラの良さはファインダーにあり</h2>

<p><div id="attachment_1892" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1055.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1892" class="size-medium wp-image-1892" src="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1055-300x218.jpg" alt="" width="300" height="218" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1055-300x218.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1055-768x559.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1055-1024x745.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1055-624x454.jpg 624w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1892" class="wp-caption-text">X-700のファインダー</p></div></p>

<p>MFカメラはファインダーにとても力が込められています。自分の目でフォーカスを合わせなければならないので、倍率が高く、明るく見えるように作られています。例えばこのX-700はアキュートマットが採用されているのでとても明るいのが特長です。</p>

<p><div id="attachment_1900" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1082.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1900" class="wp-image-1900 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1082-300x188.jpg" alt="" width="300" height="188" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1082-300x188.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1082-768x482.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1082-624x392.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1082.jpg 800w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1900" class="wp-caption-text">α weeetのファインダー</p></div></p>

<p>この技術はその後AFカメラになると別の方向へ向ってしまいました。AF時代ではフォーカスを合わせることは自動化されたため、より多くの情報を出すことに重点が置かれて行きました。デジタル一眼となると、なおさらそれに拍車がかかったように思います。</p>

<p>僕がデジタル一眼になかなか手を出せなかった理由がそれでした。そんなファインダーを見ることが残念だったからです。</p>

<h2>X-700、α sweetで撮影してきた</h2>

<p>せっかく Advent Calendar やるので、この X-700 と、もう一つ所有していたフィルムカメラ α sweet を使って、写真を撮ってきました。</p>

<p>フィルムは富士フイルムの業務用カラーフィルムを使用しました。今はフィルムが高いですね。(;´Д｀)</p>

<p><div id="attachment_1894" style="width: 310px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1045.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1894" class="size-medium wp-image-1894" src="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1045-300x169.jpg" alt="" width="300" height="169" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1045-300x169.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1045-768x432.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1045-1024x576.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1045-624x351.jpg 624w" sizes="(max-width: 300px) 100vw, 300px" /></a><p id="caption-attachment-1894" class="wp-caption-text">こうやってフィルムを詰めます</p></div></p>

<h3>2017/11/12 城ヶ島にて（X-700 MD-Rokkor 50/1.4 φ49）</h3>

<div class="mceTemp"></div>

<p><a style="font-size: 1rem;" href="http://www.susumuis.info/wp-content/uploads/2017/12/FH010023.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1911" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH010023-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000001.jpg"> <img loading="lazy" decoding="async" class="wp-image-1893 size-medium" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000001-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<h3>2017/12/02 上野公園にて（X-700 MD-Rokkor 50/1.4 φ49）</h3>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000016-1.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1903" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000016-1-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000016-1-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000016-1-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000016-1-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000016-1-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000016-1.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /> </a><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000024.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1906" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000024-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000024-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000024-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000024-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000024-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000024.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /> </a><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000023.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1905" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000023-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000023-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000023-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000023-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000023-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000023.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH010015.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1908" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH010015-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010015-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010015-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010015-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010015-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010015.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH010016.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1909" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH010016-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010016-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010016-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010016-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010016-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010016.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH010023-1.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1910" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH010023-1-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-1-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-1-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-1-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-1-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010023-1.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a>  <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH010025.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1912" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH010025-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010025-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010025-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010025-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010025-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH010025.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<h3>2017/12/03 秋葉原にて（α sweer SIGMA UC ZOOM 28-105/4-5.6）</h3>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000001-1.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1901" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000001-1-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-1-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-1-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-1-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-1-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000001-1.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000015.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1902" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000015-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000015-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000015-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000015-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000015-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000015.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a>  <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000019.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1904" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000019-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000019-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000019-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000019-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000019-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000019.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a>   <a href="http://www.susumuis.info/wp-content/uploads/2017/12/FH000025.jpg"><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-1907" src="http://www.susumuis.info/wp-content/uploads/2017/12/FH000025-300x201.jpg" alt="" width="300" height="201" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000025-300x201.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000025-768x514.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000025-1024x686.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000025-624x418.jpg 624w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/FH000025.jpg 1840w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<h2>後日談、フィルムカメラを卒業しました</h2>

<p>これらの写真を撮影した後、僕はフィルムカメラをその足で売ってきてしまいました。それは次の理由からでした。</p>

<ul>
    <li><strong>目が悪くなっていてファインダーを覗くことが辛くなっていた</strong> (←これが1番！)</li>
    <li>撮影後すぐにSNSにアップしたさを抑えられなかった (←これが2番！)</li>
    <li>フィルムが高い (これは3番！)</li>
    <li>もう満足した！</li>
</ul>

<p>実は最初からそう決めていました。目的がない装備は持たないのが僕のモットーです。でも、カメラ・レンズってそうはさせてくれない力がすごいありますよね。おそらく現像から上がった写真を見てしまったらまた踏ん切りがつかなくなったはずです。だから、現像に出した直後に即売却しました。</p>

<p>僕がろくに使わないのに押し入れにあまり良くない状態で保管しておくより、他の人の手に渡ったほうが良いだろうと思ったことも理由です。今X-700を中古で買うともしかすると僕の手放したものかもしれません。ちなみに<a href="http://www.net-chuko.com/buy/list.do?kindName=%E3%83%95%E3%82%A3%E3%83%AB%E3%83%A0%E3%82%AB%E3%83%A1%E3%83%A9&amp;makerName=%E3%83%9F%E3%83%8E%E3%83%AB%E3%82%BF%EF%BC%88MINOLTA%EF%BC%89&amp;keyword=X-700&amp;ob=ud-&amp;lc=20">今、8980円くらいが相場のようです。</a></p>

<h2>フィルムカメラが教えてくれたこと</h2>

<p><div id="attachment_1917" style="width: 408px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1111.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1917" class="wp-image-1917 " src="http://www.susumuis.info/wp-content/uploads/2017/12/DSC_1111-300x169.jpg" alt="" width="398" height="224" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1111-300x169.jpg 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1111-768x432.jpg 768w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1111-1024x576.jpg 1024w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/12/DSC_1111-624x351.jpg 624w" sizes="(max-width: 398px) 100vw, 398px" /></a><p id="caption-attachment-1917" class="wp-caption-text">英語が得意な妻に"dinosaur!!"と言われた。絶滅したもの = 時代遅れの古いものという意味のスラングらしい</p></div></p>

<p>手放してはしまいましたが、フィルムカメラからたくさんのことを学びました。その中でも次の2つは僕の撮影スタイルに影響していると思います。</p>

<h3>その1、一枚一枚丁寧に撮ること</h3>

<p>このアドベントカレンダーの他の方も書いているように、フィルムカメラはデジタルと違って失敗すると消すことができないため1枚1枚丁寧に撮ります。デジタルは無尽蔵に写真が撮れるので雑に僕は撮ってしまいがちです。でも、そうやって雑に撮った写真は「全部ダメだった」ということもよくあります。</p>

<h3>その2、24枚、36枚でストーリーを作る</h3>

<p>フィルムは24, 27, 36枚などの単位で売られています。つまり、この<strong>フィルム一本分を撮りきれないと現像に出せない</strong>し、<strong>撮りきってしまうともう撮れない</strong>というジレンマがありました。一本のフィルムでぜんぜん違う写真を並べるのも野暮いです。なので、当時は<strong>24枚や36枚でストーリーを作るぞ！</strong>と考えて撮影をしていました。</p>

<p>ストーリーを考えると<strong>「さっきこれを撮ったから次はこれだ」</strong>みたいに考えながらその日を楽しむことができます。受け身にならず一日をより能動的に過ごすことができます。</p>

<p>逆に、バシャバシャ撮ってしまうとファインダーを覗いてばかりで、「その日、その時」を楽しめない気がするんですよね。プロの場合は仕方がないかもしれませんが、僕は趣味なので</p>

<p><strong>「失敗したらそれでも良いや」</strong></p>

<p>くらいに思っている方が楽です。それくらいの距離感を忘れずにこれからもまったり写真を撮っていきたいです。</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>エンジニアが機械学習を仕事とする周辺環境</title>
		<link>https://susumuishigami.github.io/susumuisinfo/2017/engineer_machinelearning_work</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Mon, 09 Oct 2017 02:37:05 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1860</guid>

					<description><![CDATA[メイドカフェでノマド会 座談会開催しました！ を開催しました。 資料はこちらです。 僕はエンジニア視点で話しましたが、コンサルの方の参加もあって、話が広がりました。ここ数ヶ月もやっと思っていたことが議論をすることで腑に落 [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><a href="http://www.maid-cafe.work/">メイドカフェでノマド会</a> <a href="https://maid-cafe-nomad.connpass.com/event/69111/">座談会</a>開催しました！</p>

<p>を開催しました。</p>

<p>資料はこちらです。</p>

<iframe loading="lazy" src="https://docs.google.com/presentation/d/e/2PACX-1vTmn0nbLLFtpf8uEaUfxzBZbBIC24pI6mZPXZwK1QtF3XctNJcBd3lpF1E9K0dF4mWmP8pT2fnJAcoE/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>

<p>僕はエンジニア視点で話しましたが、コンサルの方の参加もあって、話が広がりました。ここ数ヶ月もやっと思っていたことが議論をすることで腑に落ちた感じがします。若い学生の方の意見も聞くことができたこともよかったと思います。</p>

<p>議論の内容は結論はスライドに書いているとおりですので、そちらをご覧ください。</p>

<p>今後もこのようなプチイベントの開催を増やしていこうと思います。「参加したい！」「こんな企画をやりたい！」と思われた方はまずは、<a href="http://www.maid-cafe.work/">ノマド会の公式サイト</a> にアクセスし、Slack, connpassに登録いただき、 Slack 上で声をかけていただければと思います。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>別言語のWebプログラマーが突然Pythonで機械学習をやることになった時の心得</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2017/java_to_python</link>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Fri, 06 Oct 2017 13:12:41 +0000</pubDate>
				<category><![CDATA[Python]]></category>
		<category><![CDATA[機械学習]]></category>
		<category><![CDATA[論評]]></category>
		<category><![CDATA[開発環境]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1833</guid>

					<description><![CDATA[今 人工知能・AI がブームになっています。エンジニアの間でもまた「機械学習」や「データ分析」方面の技術が注目されています。そして、言語としては Python が使われます。今、Pythonで機械学習をする仕事は増えてき [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>今 <code>人工知能</code>・<code>AI</code> がブームになっています。エンジニアの間でもまた「機械学習」や「データ分析」方面の技術が注目されています。そして、言語としては <code>Python</code> が使われます。今、Pythonで機械学習をする仕事は増えてきています。</p>

<p>この時代の流れで、今後「データ分析」や「機械学習」を仕事とするWeb系出身のエンジニアは増えてくると思われます。Javaを使ってWebのプログラミングをしていたプログラマーが突然<strong>「Pythonでデータ分析をやってくれ！」「このCNNを使ったプログラムを解析してレポートを出してくれ」</strong>というように言われる日はもう訪れています。</p>

<p>実は、僕がそうでした。</p>

<p>僕は昨年12月に <a href="http://www.beproud.jp/">BeProud</a> に入社するまでは、Javaの仕事を10年以上していました。昨年の9月まで Python を書いたことがなかったので、Python歴1年のひよっ子です。そんな僕が、なぜか入社以来、大小案件に関わらせてもらい、今では社内でも「機械学習系に詳しい人」のように見なされているようです。</p>

<p>このような事例は珍しいことではなくなるはずです。 <strong>次は、あなたかもしれません！</strong> そんなあなたのために、僕が一年間どのようにして、Pythonと機械学習と付き合ってきたのか、これから、Web系の人が機械学習の仕事に携わる時にどんな心構えをしていれば良いかを書こうと思います。</p>

<h2>Javaやの僕はどのようにしてPythonを学習したか</h2>

<p>「御社の募集要項を見ると Python という部分以外には一致しているように思います」</p>

<p>「弊社に入社する人の半数は業務での Python は未経験だから大丈夫です」</p>

<p>と、shacho に言われて、入社が決まったものの、そもそも「業務でのPython経験」がないどころか「1行もPythonを書いたことがない」に等しい僕が、初出社日までの<strong>2ヶ月間で 「Python のプロ」として出来上がっていないとまずい</strong>ので、実は焦りました。そこで最初は本を読みました。</p>

<p>例えばこれとか</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4873117534&linkId=bc655e4ca7d1c42e0add60e1a7b71949"></iframe>

<p>これとか</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=479804315X&linkId=c66f55b0e006c1219793a380e0c2621a"></iframe>

<p>でも、読んでも書ける気になりません。<strong>「やばい！！」</strong>となったところで、なんと絶妙なタイミングでこれから入社する会社がこのサービスを出していました。</p>

<p><a href="https://pyq.jp/"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2017/10/logo_square_small-300x300.png" alt="" width="200" height="200" class="alignnone size-medium wp-image-1851" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/10/logo_square_small-300x300.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/10/logo_square_small-150x150.png 150w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/10/logo_square_small.png 400w" sizes="(max-width: 200px) 100vw, 200px" /><br />PyQ - 本気でプログラミングを学びたいあなたへ</a></p>

<p>そこからはひたすらPyQをやってなんとか入社までに基本的な文法はマスターしました！そのおかげで「受講生の声」の欄のトップに載ってしまいましたｗ</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2017/10/e289e49025188415026dcdcf863cf824.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2017/10/e289e49025188415026dcdcf863cf824-300x210.png" alt="" width="300" height="210" class="alignnone size-medium wp-image-1847" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/10/e289e49025188415026dcdcf863cf824-300x210.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2017/10/e289e49025188415026dcdcf863cf824.png 531w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>

<p>自社のサービスなので、宣伝臭いと言われそうですが、本当にPyQを使って覚えたスキルで実務で戦っているので、人に聞かれたらまず第一にオススメしています。これからPythonを学ぶ人はこの本を買うと3日間無料でPyQが使えるキャンペーンコードが付いているので、良いかもしれません。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4295002089&linkId=9b5b19619929c5e379ccbe38a9cd5870"></iframe>

<h2>エディタは Eclipse 時々 VSCode 時々 Atom , etc...</h2>

<p>Javaは、Eclipse、NetBeans、IntelliJ IDEAのどれかを使用している人がほとんどですが、Pythonは様々なエディタを愛用している人がいるようです。Java出身の人は何を使えばいいでしょうか。</p>

<p>僕はEclipseを使っています。<strong>「PyDevなんて重いし使ってる人いないよ」</strong>と言われがちです。多分BP社内でもEclipseを愛用しているのは僕だけです。</p>

<p>EclipseがPythonの人たちに人気がないのは「重い」というのがあると思います。しかし、これは誤解で、みんなきっと「Java EE」版を使っているのではないかと思います。Java EE版EclipseはJavaプログラマーも敬遠したくなるほど重いのです。オススメなのが、PHP版のEclipseです。PHP版Eclipseは軽い上、しかもHTMLエディタなど、Web開発に必要なプラグインが最初から入っています。</p>

<p>とはいえ、僕はJava時代にEclipseに心酔してしまって、何度も寄付しているEclipseファンなので、普通に「Eclipseを使わされていた」くらいの人だったら、PyCharmは人気があるし良い選択肢だと思います。</p>

<p>その他には、VSCodeも人気があるようです。</p>

<h2>Webやの僕はどのようにして機械学習を学んだか</h2>

<p>機械学習の「き」の字も知らなかった中で、「データ分析系の案件に入ってもらうかもしれないから勉強してください。」みたいに言われ、入社前から社内勉強会に参加させてもらいました。その時読んだのがこの本</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4844380605&linkId=572e9ac4051df4330761287a520e9871"></iframe>

<p>この本は何度も読み込んだのでバイブル的な存在ですが、pandas も Jupyter Notebook も何それ食えるのというレベルだと、ソースコードを「写経」することもままならないので、きつかったです。最初は、 Jupyter Notebookとpandasから入門することをオススメします。今、Jupyter Notebookとpandasを最初に入門するなら。。。やはりPyQがおすすめです。ｗｗ</p>

<p><a href="https://pyq.jp/"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2017/10/banner_image2-300x250.png" alt="" width="300" height="250" class="alignnone size-medium wp-image-1852" /></a></p>

<p>PyQには、データ分析・pandasのコンテンツがあります。また、機械学習のコンテンツもあるので、まずはここで、「ロジスティック回帰」や「決定木」などの簡単な使い方を学んでから、専門的な本に進むことをオススメします！</p>

<p><strong>いいなー。今から学ぶ人。</strong></p>

<h2>Webで経験した人が機械学習の世界で活躍するには</h2>

<p>さて、ここからが本題です。</p>

<p>僕のような根っからのJavaやさんで、Webやさんが、「Pythonで機械学習」の仕事をやって足手まといではなかったのでしょうか？それが意外と活躍できてしまいました。</p>

<p>なぜかというと「機械学習」の現場で「エンジニア」の我々は、「データサイエンティスト」と呼ばれる人たちとは違う役割を期待されるからです。</p>

<p>主に、我々が作るのは「<strong>データパイプライン</strong>」という部分です。</p>

<p>パイプラインとは、細かいデータの操作を束ねた一連の処理セットのことです。機械学習で求める結果を得るためには、「機械学習アルゴリズム」だけを知っていても十分ではありません。データはSQLで取ってこなければいけないかもしれないし、結果はCSVを変形しなければならないかもしれません。</p>

<p>こういった、一連のデータの流れを設計できるのは、実は、業務フローや、データ設計をどっぷり経験してきた、エンタープライズシステムよろしくな、システム業界のエンジニアです！</p>

<p>入社して最初にやったことは、「機械学習に入力するデータ」をお客さんの「データベースからどのようなSQLで取ってくるか」という設計でした。「susumuisさんSQL得意なので助かります！」と隣の人に言われました。</p>

<p>「機械学習のアルゴリズム」の部分は、ライブラリもあるし「データサイエンティスト」の方が数式を提供してくれるので、基本的なアルゴリズムの名前と特性くらいを知っていれば何とかなります。</p>

<p>それよりも、<strong>どのデータを、いつ、どうやって取ってくるのか</strong>。あるいは、運用時に<strong>誰が、いつ、入れるのか</strong>、こういったワークフローや業務フローを設計するのはまさに「システムエンジニア」の得意技です。</p>

<h2>どんなエンジニアになってはいけないか</h2>

<p>勉強をやめてはいけません。</p>

<p>Webの世界でもいましたが、前時代にはエンジニアでも「今時の技術が全く分からなくて、前時代のノリで設計をして実装させようとする上司」がいたらうんざりです。</p>

<p>特に、機械学習の世界では、お客さんとデータサイエンティストのパイプ役にエンジニアが回りがちになります。その間に伝言ゲームの齟齬があると、連携プレーは崩壊します。データサイエンティストと、お客さん両方の言葉を理解し、それをシステムに落とし込むことができるエンジニア以外は居場所がありません。</p>

<p>これは一般論ですが、「伝言ゲーム」は多くなるほど失敗します。とりわけ「専門用語」が多い機械学習の分野で、伝言ゲームに失敗すると悲劇しか起こりません。そのため、エンジニアはフルスタック的であるべきで、設計から実装まで一貫して一人でできた方が良いでしょう。また、旧来型SIerの多重請負方式では、中間に多くの「専門家ではない人」が挟まるため、うまくいかないのではないかと思っています。</p>

<h2>まとめ</h2>

<p>以上のように、僕のように他言語、他分野から入って、機械学習界隈でも生きていくのに必要なことは次の4つです。</p>

<ol>
<li>データ設計能力とSQL</li>
<li>お客さんと直接話せして設計から実装まで一貫してできるスキル</li>
<li>Pythonのスキル</li>
<li>機械学習の基礎知識</li>
</ol>

<p>いかがでしたでしょうか。普通の真面目なエンジニアは、1,2ができて当然なので、あとは 3,4 を学べば、もう明日から機械学習の現場に行っても問題ないはずです！</p>

<p>1,2 が未熟である場合は、Webエンジニアでも、業務システムエンジニアでも、いずれ限界が来ると思います。もし、大規模チームの「一担当」に落ち着いているなら、危機感を覚えた方が良いかもしれません。</p>

<p>3,4 は奇しくも <a href="https://pyq.jp/">PyQ</a> で学べます！ 自社のサービスなのでこれでは「ちょっとステマが過ぎるのではないか」と思われてしまうことだけが心配ですが、思っていることに間違いはないので、結論として締めくくらせていただきます。</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>「Swift」という名のバンドを見つけたから、エンジニア代表として話を聞いてきた</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2017/swift_band_interview</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2017/swift_band_interview#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Thu, 12 Jan 2017 07:07:51 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1785</guid>

					<description><![CDATA[皆さん、Swift書いてますか？ 今やObjective-Cじゃなくて、iOSアプリ開発はSwiftです！今年は「Android、もしやお前も！？」みたいな噂もあったりしました。既に多くの企業が注目していると言われる言語 [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>皆さん、Swift書いてますか？</p>

<p>今やObjective-Cじゃなくて、iOSアプリ開発はSwiftです！今年は<strong><a href="http://thenextweb.com/dd/2016/04/07/google-facebook-uber-swift/">「Android、もしやお前も！？」</a></strong>みたいな噂もあったりしました。既に多くの企業が注目していると言われる言語、もうエンジニアたるもの勉強しておかなければヤバイ雰囲気があります。</p>

<p>そんな中、今日はプログラム言語ではなく同じ「Swift」という名前で活動しているバンドを見つけたので紹介します。まあ、こじつけネタｗｗｗと言わず、読んで欲しく思います。というのは、<strong>なんてGooglavility低いバンド名なんだ！</strong> さぞかし、SEOでは苦労しているだろうと、興味が湧いて、勢いでインタビューしてみたら、想像以上にイイ話が聞けてしまいました。</p>

<h2>Swiftとは</h2>

<p><a href="http://www.swift-inc.net/"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/11/454a84_a9987cb3d43b45be83f88a6f04638536.png" alt="" width="210" height="92" class="alignnone size-full wp-image-1797" /></a></p>

<p><a href="http://www.swift-inc.net/">Swift</a> は、《会社》をコンセプトにして2015年4月から活動を開始したバンドグループで、リーダー兼ギタリストのホッタとヴォーカルの多田を中心に活動中。代表曲は「<a href="https://www.youtube.com/watch?v=F9BTHVf4rWo">オレンジ</a>」「<a href="https://www.youtube.com/watch?v=YIYIzvQBBDo">手のひら</a>」「<a href="https://www.youtube.com/watch?v=8_UN-0hIP7c">BRAVER</a>」</p>

<iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/8_UN-0hIP7c" frameborder="0" allowfullscreen></iframe>

<h2>リーダーのホッタくんと僕の仲</h2>

<p>何を隠そう、僕とホッタくんは小学校の同級生で、今回のインタビューは久しぶりの再会でした。なので終始砕けた会話になっていることを、ご容赦ください。</p>

<p>もちろん、文章を校正して固い言葉に直すこともできたのですが、彼の人間性、思いを伝えるには、このままの方が良いと思います。</p>

<p><div id="attachment_1788" style="width: 365px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2016/11/P_20161105_205723.jpg"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1788" src="http://www.susumuis.info/wp-content/uploads/2016/11/P_20161105_205723.jpg" alt="ホッタくん" width="355" height="512" class="size-full wp-image-1788" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/11/P_20161105_205723.jpg 711w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/11/P_20161105_205723-208x300.jpg 208w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/11/P_20161105_205723-624x899.jpg 624w" sizes="(max-width: 355px) 100vw, 355px" /></a><p id="caption-attachment-1788" class="wp-caption-text">ホッタくん</p></div></p>

<h2>Swiftの名前は「響き」で選んだ</h2>

<p><strong>susumuis:</strong> 早速だけど、Swiftの名前の由来ってなに？</p>

<p><strong>ホッタ:</strong> 由来？そうだなあ。「響き」かな。</p>

<p><strong>susumuis:</strong> 響き？</p>

<p><strong>ホッタ:</strong> 「優しい」「耳馴染みの良い」感じ。ほら、印象ってあるじゃん。強そうな人は強そうな名前だし、僕も一緒にやってるタダくん（「ハリー」って呼んでるんだけど）も、僕ら二人「優しい」イメージって言われるんだ。</p>

<p><strong>susumuis:</strong> へえ</p>

<p><strong>ホッタ:</strong> 第一印象で決めるのは良くないけど、人の性格って顔に出るよね。バンドにとっては、名前が一つの「顔」で「名刺」なんだよ！</p>

<p><strong>susumuis:</strong> Appleの言語と名前がかぶったのはどう思うの？</p>

<p><strong>ホッタ:</strong> 実はあっちの方が先で、知ってたんだよね。あと、音楽の世界では世界一稼いだ女性アーティスト「テイラー・スウィフト」もいるし、検索で勝てるわけがない！それでも「僕らに合ってるね」って選んだんだ</p>

<p><strong>susumuis:</strong> 今検索してみたら、金融業界でも、<a href="https://www.swift.com/ja">SWIFT</a>って組織があるよ！</p>

<h2>就職しても音楽はできる！</h2>

<p><strong>ホッタ:</strong> Swiftのメンバーって実は全員就職しているんだ。仕事をやりながらでも、やりたいことを実現したいと思ってる。みんな仕事には責任があるから、それは守っていきたい。だから、仕事が最優先で活動してる。</p>

<p><strong>susumuis:</strong> そうなんだ！</p>

<p><strong>ホッタ:</strong> 「会社があるから」諦めてるやつ多いんじゃないかな？でも、「挑戦した？」「やろうとすればできるじゃん！」って証明したい。挑戦しないで口だけの人多いから。</p>

<p><strong>susumuis:</strong> 僕らエンジニアの世界でもそういうのあるよ!「仕事が忙しい！」とか言って挑戦しない人。でも、やっている人はやっていて、気がついたら大きく差が開いちゃうんだよね。</p>

<p><strong>ホッタ:</strong> でも、正直続けることの難しさはあるよ。「日本は音楽を続けるのは難しい」と言われるんだ。「バイトで生計立てて夢を目指す」人が多いんだけど、最終的に諦めるんだよね。「そろそろ就職しなきゃ」って言って。でも、「就職してもできるよ！って伝えたい。</p>

<p>「責任ある仕事をしている」というホッタの会社の名刺を見せてもらったら、とても立派な肩書がついていました！</p>

<h2>《会社》をコンセプトにしたのは、人の大切さを伝えたいから</h2>

<p><strong>susumuis:</strong> コンセプトは「会社」ってことだよね。でも、正直言うと申し訳ないんだけど「会社」ってほら、ネガティブなイメージあって！「今日も残業だ。」とかへとへとになって、ライブに行ったら「また会社kayo。。。」みたいにならないの？</p>

<p><strong>ホッタ:</strong> 会社ってそういうイメージもあるよねー。。。でも僕らにとっては「会社」＝「ファミリー」なんだ。同じ目標を持って、志は同じでやりたいことをやる。そういう人たちが集まっていれば「辛いことがあっても、楽しい」と思えることが多いんじゃないかな！</p>

<p>「家族型経営」と呼ばれた会社の姿。それこそが真の会社のあり方なのかもしれません。リストラや経営合理化による非正規雇用の増加で「人が駒のように扱われている」今が異常なのかも。今こそ、「会社」をテーマにしたバンドをやる意味があるじゃないかと、聞いていて思っていました。</p>

<h2>現実は厳しいけど、僕達は恵まれている！</h2>

<p><strong>ホッタ:</strong> そういうわけで、僕らは「仕事を大事にする」って事情だから、あまり多く活動ができないんだ。ライブも年に数回しかできない。普通のバンドは活動をしなければファンが減ってしまうから普通はライブを一杯やるんだ。別のバンドと共同でライブやったりしてね。そういうのを「タイバン」って言うんだけど。そして赤字でもライブをやる。僕らはそのやり方はどうなのかな？って思っているよ。</p>

<p><strong>susumuis:</strong> それでもこの間のライブではライブハウスを満員にして大盛り上がりだったよね！あの時は何人いたの？</p>

<p><strong>ホッタ:</strong> 100人くらいだよ！僕たちみたいに、バックボーンがない、事務所がついているわけでもない、そういうスタイルでは、この人数は多い方だと思う。僕達は恵まれているって思うよ！</p>

<h2>「オレンジ」を卒業ソングとして広げたい</h2>

<p><strong>susumuis:</strong> 最初「オレンジ」や「手のひら」を聴いた時、「なんて優しい歌なんだろう」って思ったよ。あの曲はどういう思いが込められているの？</p>

<p><strong>ホッタ:</strong> 「オレンジ」は「卒業」をテーマにしているんだけど、「卒業しても会えるでしょう？また違う仕事で繋がれるじゃん！その時は、当時と同じ距離感で接することができたら素敵だよね！」って思いが込められてるんだ。</p>

<iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/F9BTHVf4rWo" frameborder="0" allowfullscreen></iframe>

<p><strong>susumuis:</strong> ITエンジニア代表として共感する！僕らは比較的流動性の激しい職業で「転職」ってありふれているんだ。お陰でしょっちゅう「卒業」してる。で、前に仕事したことがる人と、また一緒に仕事してたりするよ！だから、「卒業」のたびにこの人とまた仕事ができる日が来る！って思ってる。今の時代の「卒業」ってそうなのかもね。SNSの普及で普通に会えるし。</p>

<p><strong>ホッタ:</strong> できれば卒業ソングとして定着させたいな。学校とかで、卒業式に合唱してくれたらいいな。</p>

<h2>真面目にやっているから、ファンが離れない</h2>

<p><strong>susumuis:</strong> 偏見で申し訳ないけど「バンドマン」ってチャラいやつが多いってイメージあるじゃん。実際はどうなの？</p>

<p><strong>ホッタ:</strong> 実際そういうの多いよ。僕らは先輩にも「お前らは本当に真面目だな」って言われるよ。だからなのかもしれないけど、一度ファンになったら離れる人が少ないように思う。</p>

<h2>中学生の女の子が自分を「尊敬する人」と言ってくれた</h2>

<p><strong>ホッタ:</strong> 今までで一番うれしかったことで、中学生の女の子が学校の発表で自分を「尊敬する人」として紹介してくれたんだ。</p>

<p><strong>susumuis:</strong> その子は元からの知り合い？</p>

<p><strong>ホッタ:</strong> いや、元は相方のファンでライブに来てくれたんだけど、僕とは初対面。ネット番組とかで僕の思いとかを知ってくれて。</p>

<p><strong>susumuis:</strong> それは嬉しいね！思うんだけど、バンドとか、アイドルとか表に出る人は若い人に影響を与えるから「ちゃらい」とかじゃなくてお手本としての責任も感じてるんじゃないかな。</p>

<p><strong>ホッタ:</strong> そういう意味だと、TwitterとかSNSには気を遣っているよ！若い子が見ているから、自分がどう見られてるか。常にポジティブにして、ネガティブな言葉は書かないように気をつけてる。そこはオープンな場だから。仲間内だけのクローズドな場所じゃないからね。</p>

<iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/YIYIzvQBBDo" frameborder="0" allowfullscreen></iframe>

<h2>今後は活動を加速していきたい！</h2>

<p><strong>susumuis:</strong> 今後の展望とかはあるんですか？</p>

<p><strong>ホッタ:</strong> 活動を長く続けていきたいと思う。来年の4月で活動3年目なのでアクセルを踏んで活動をスピードアップしたいと思ってる。ライブ会場を大きくしたりね。それは大変になるかもしれないけど、沢山の人に知ってもらえたら良いなって。でも、いろんなことに手を出したら中途半端になるから、絞って行きたいとは思ってるよ。</p>

<p><strong>susumuis:</strong> 期待してます！</p>

<h2>今の時代は「人」が中心</h2>

<p>ホッタくんの話を聞いていると、彼は思ったことを本当に率直に話してくれる人だなと思いました。そして根が明るいから、話してるこっちもだんだん楽しくなってきました。</p>

<p>彼らから学べることはこういうことなんじゃないかと思いますが、これは我々エンジニアにも大切なことだと思います。</p>

<ul>
<li>挑戦すること</li>
<li>人を大切にすること</li>
<li>まじめにコツコツやること</li>
</ul>

<p>これからも一層活躍されることをお祈りします。</p>

<h2>ライブ情報</h2>

<p>2月11日にワンマンライブがあります！</p>

<p><a href="http://www.swift-inc.net/news">http://www.swift-inc.net/news</a></p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1785</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Javaが僕にくれたもの</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2016/java_advent</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2016/java_advent#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Sat, 03 Dec 2016 07:57:48 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1809</guid>

					<description><![CDATA[この記事はJava Advent Calendar 2016の3日目です。2日目はmegascusさんのどこからも使用されてないクラスを列挙する、4日目はcero_tさんです。 退職しました 個人的な話で恐縮ですが、去る [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>この記事は<a href="http://qiita.com/advent-calendar/2016/java">Java Advent Calendar 2016</a>の3日目です。2日目は<a href="http://qiita.com/megascus">megascus</a>さんの<a href="http://d.hatena.ne.jp/megascus/20161202/1480636922">どこからも使用されてないクラスを列挙する</a>、4日目は<a href="http://qiita.com/cero_t">cero_t</a>さんです。</p>

<h2>退職しました</h2>

<p>個人的な話で恐縮ですが、去る11月末をもって学生バイト時代も含めて12年間勤めた会社を退職しました。そこではずっとJavaを書いていましたが、次の勤務先ではPythonを書くので、今後Javaを書くことは少なくなるでしょう。</p>

<p>退職エントリは書きませんが、代わりに言語の卒業エントリを書こうと思います。一人よがりなネタですがお許し下さい。</p>

<h2>初めての出会いはJDK 1.1をダイアルアップでダウンロードしたこと</h2>

<p>正確な時期は忘れましたが、1997-8年頃ではなかったかと思います。「Javaという言語がすごいらしい」という噂をきいて、ダイヤルアップ回線で頑張って一晩くらいかけてダウンロードしてみました。その時落としたのはJDK 1.1ではないかと思います。</p>

<p>しかし、当時使っていたPentium 90MHzのマシンではサンプルアプレットのローディングに数分かかり、クリックの応答に数十秒かかるという状況でした。（「Java遅い！」をリアルで体験した世代です）</p>

<h2>初めてまともに使ったのは、i-appliの開発</h2>

<p>時は流れて、2001年1月「NTTドコモの新機種F-503i, P-503iが、Javaに対応して誰でもアプリが作れるようになった！」というニュースが入ってきました。この時高校生だったのですが</p>

<p>「これはやばい！ケータイがPCになってしまう！」</p>

<p>とか言って、親に土下座して買ってもらいました。</p>

<p>Javaといっても、CLDC(Connected Limited Device Configuration) 1.0という仕様の上に作られたJavaであって、「浮動小数が使えない」などの制限があり、しかもアプリ(すなわちjarファイル一個)のサイズは10KB以下に収めなければなりません。そこではclassファイルを増やすと容量がかさむから「クラスは一個にしましょう」と言われていました。Eclipseはまだなくて、JBuilderは僕のPCでは重いから、[CPad for Java] (http://hp.vector.co.jp/authors/VA017148/pages/cpad.html) というテキストエディタにコンパイラショートカットがくっついたようなエディタで頑張ってコーディングしていました。これと、コードの変数名を1文字にして容量を削る今で言うminifyツールみたいなのも使っていました。</p>

<p>その時作った<a href="https://gist.github.com/susumuishigami/1307015">作品はgistに貼ってあります</a>。<a href="http://forest.watch.impress.co.jp/library/software/bunshidekiru/">高校の先輩がVBで作ったゲーム</a>を移植したものです。当時は雑誌の端に載ったりしました。</p>

<h2>大学に入ってJavaらしくないJavaを学ぶ</h2>

<p>2003年に大学生になったのですが、当時入った学科では、プログラミング教育にJavaを使っているということで、楽しみにしていました。ところが、そこで習ったJavaと言うのは</p>

<p>「配列をReturnする『関数』を作ってはいけない」<br />
「まず配列を作ってメモリを確保しろ、その配列を関数のパラメータに突っ込め！」</p>

<p>みたいなやつでした。。。＼(^o^)／</p>

<h2>本当のJavaを求めてある本に出会う</h2>

<p>そんな時に出会った本がこれでした。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4798006289&linkId=a12be463f38790e812896f1882e96924"></iframe>

<p>今思うと現場思考で、非常にバランスの良い本だったと思います。</p>

<p>これで、少しはクラスとかデザインパターンというものを知った僕が、少しはプロセッサーパワーがましになった当時の携帯向けに作り直したのが[これ] (https://github.com/susumuishigami/bunshi2) です。</p>

<p>最近このコードをほぼそのままコピペして環境に依存する部分だけ書き換えてみたら、あっさりAndroidで動いてしまいました！</p>

<h2>仕事でサーバーサイドJavaの世界へ</h2>

<p>大学2年生の時から、プログラミングのバイトを初めます。従業員10人くらいのこじんまりとした会社でした。</p>

<p>始めて突っ込まれた案件は、Atg Dynamoというフレームワークを使っていました。すごい重量級フレームワークでした。二度と使いたくありません。</p>

<h2>自社開発の仕事にアサインされる</h2>

<p>その案件が終わってからは、ほぼ一貫して自社開発の製品の新規開発・カスタマイズをやっていました。そこで使っていた自社フレームワークはシンプルで使いやすかったですが、データは全部文字列で扱う流儀で、HashMapみたいなデータ構造に</p>

<pre><code class="language-java">set(“LAST_NAME”, “hogehoge”);
set(“FIRST_NAME”, “hugahuga”);
</code></pre>

<p>みたいなコーディングスタイルでした。。。まさか、このフレームワークをその後10年使い続けるとは思わなかった＼(^o^)／</p>

<h2>システムのリニューアルを任され、自由に学べる期間があった</h2>

<p>ベンチャー企業というのは、何が正しいかよりも目の前の問題を最短で解決するのが良いとされることがあるので、その場限りの仕事を数年続けました。</p>

<p>転機は2008年の暮れ、主力システムをリニューアルする任務を与えられ、自由にやっていいと言われました。そこで、当時のトレンドだったWicket、Seasar、Spring、Google Guiceなどを全力で追いかけてみました。</p>

<p>本当はこの時社内標準フレームワークを刷新したかったのですが、工数を考えると既存資産を活かすことがどうしても必要だったので、従来の自社フレームワークに僕がOSSから学んだエッセンスを加えるという方針にしました。そのため、「フレームワークの使い方」より、フレームワーク自体のソースコードを読むようになり、特に、Seasar2のソースコードは読みやすくて勉強になりました。（Apacheライセンスなので流用もしやすく助かりました！）</p>

<p>結局、テンプレートエンジンとしてMayaaだけ採用しましたが、たまたまその後作ったサービスが成長したため、最もMayaaを使い倒している人みたいになってしまいました。</p>

<h2>エンジニアとしての目標: 30までに勉強会で登壇する</h2>

<p>僕は家庭の事情もあって、2009年ごろまで、IT系勉強会というものに参加したことがありませんでしたが、このまま無名のエンジニアではいたくないと思い、「30歳までに勉強会で登壇する」ことを目標としていました。</p>

<p>結果的には、<br />
2012年と、<a href="http://www.susumuis.info/entry/20131111/p1">2013年のJJUG CCC</a>当時、28, 29の時に実現できたので、目標は達成したことになります。</p>

<p>Season Conferenceは2010を最後にしばらく開催されませんでしたが、もし、2011年に開催されていたら、この、2013年のネタはその時できたと思います。</p>

<h2>最後のSeasar Committerになる</h2>

<p>そして、久しぶりに開催された2015年のSeasar Conferenceが開催されこんなLTをし、</p>

<iframe loading="lazy" src="http://www.slideshare.net/susumuishigami/slideshelf" width="615px" height="470px" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:none;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>

<p>その後、初めてMayaa初代メインコミッターの栗原さん、現メインコミッターの須賀さんに出会うことができ、そのまま流れで僕もコミッターにしていただきました。そしてどうなったかはこのスライドのとおりです。</p>

<iframe loading="lazy" src="https://docs.google.com/presentation/d/e/2PACX-1vQxdwtagM8DmGGCp2spI_LGtWO0sSa3C7AgSTLr0aK30rOC3GJol4HC0Glfemvpm1pMgFNJ5f44TX-Y/embed?start=false&loop=false&delayms=3000" frameborder="0" width="480" height="299" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>

<p>コミッターになってからした仕事は<a href="http://qiita.com/advent-calendar/2015/mayaa">Mayaa Advent Calendar 2015</a>を書いたことくらいです。コミットしてないです。（今後必要があったら、コミットすることもあるかもしれません。コミッターになる前はバグ報告をしてパッチを送ったり、GitHubになってからは、PullRequestを送ったことがあります）</p>

<h2>振り返って、Javaと僕の付き合いは何だったのか</h2>

<p>僕はJavaで12年仕事のコードを書いてきましたが、今の今まで、J2EE、Java EEのような世界は、Servlet/JSPくらいしか経験がありません。EJBも書いたことがありませんし、JPAも使わず生のJDBCに独自ラッパーをかぶせてなんとかしました。SpringやSeasarContainerも業務で使ったことはありません。</p>

<p>勉強して、こういうの良いなと思ったら、ポイントポイントでどんどん取り入れていきました。アプリケーション・サーバーは、Tomcatくらいしか使っていません。そのため、本来であればアプリケーションサーバーが提供してくれるような機能も自作しました。</p>

<p>こういうところは、このあたり、一般的なJavaプログラマーとは違うかもしれません。</p>

<p>それならいっそ、PHPを使えば良いんじゃないかと言えますが、静的型付け言語であるJavaのIDEの実力・Eclipseにはお世話になりました。サービス開発初期は何が正解なのか分からず、動かしながら抜本的に作り直すなんてこともあります。その時、呼び出し階層・型階層の機能がなければつらいかった。</p>

<p>ただ、中盤以降はIDEに頼り切るスタイルが仇となって、どんどん重たくなって苦しくなりました。</p>

<p>持論ですが、ある程度大規模になると、場当たり的な設計をやめ、モノリシックをやめ、きちんと設計して、適度にマイクロサービスみたいにモジュール分割するのが正解だと思います。そして、各マイクロサービスは、JavaよりもLLの方が書きやすいと思っています。</p>

<h2>Javaプログラマーから見たPython</h2>

<p>新天地ではPythonistaになります。まだ一ヶ月くらいしか触っていませんが、Pythonは非常にとっつきやすい言語だと思いました。同じことができるフレームワークやライブラリが乱立せず、体系的に整っているように見えます。</p>

<p>お陰で非常に入門しやすく、何かをするにあたって迷ったりはまったりすることが極端に少ない言語だと思いました。</p>

<h2>Javaは僕の育ての親</h2>

<p>しかしJavaはSeasar Project等、日本発のJavaのOSSという教材に恵まれているために、質の良いコードを読ませてもらって学習させてもらえたことはかけがえのない経験だったと思います。</p>

<p>初めて触ったプログラミング言語はObject Pascal(Delphi2.0)ですが、業務で実用的に使い、多くの先人の知恵を学ばせてもらった、僕の育ての親はJavaであることは間違いありません。</p>

<p>これからはEclipseを起動することも少なくなると思います。そのうちショートカットも忘れてしまうかもしれません。それでも、僕のプログラミング哲学に影響を与えたのは、Javaであり、とりわけ、Seasar Project関係のOSSのそれぞれの開発者の方々の知恵を借りてこれからも頑張っていきたいと思います。</p>

<h2>番外編 java-ja について</h2>

<p>僕にとって java-ja は発足当時から憧れのコミュニティでしたが、家庭の事情でイベントに参加することは今まで一回もできませんでした。この記事が公開される12/3には java-ja 忘年会があって、実は java-ja のイベント初参加です。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1809</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>エンジニアという職種がどれほど夫婦円満に役立ったか</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2016/aishiteru_advent_calendar_2016_12_2</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2016/aishiteru_advent_calendar_2016_12_2#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Thu, 01 Dec 2016 15:00:31 +0000</pubDate>
				<category><![CDATA[生活]]></category>
		<category><![CDATA[論評]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1790</guid>

					<description><![CDATA[この記事は妻・夫を愛してるITエンジニア Advent Calendar 2016の2日目です。1日目はbackpaper0さんの世界の中心で愛を叫んだうらがみです。 このアドベントカレンダーの提案者うらがみさんとは同年 [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>この記事は<a href="http://www.adventar.org/calendars/1480">妻・夫を愛してるITエンジニア Advent Calendar 2016</a>の2日目です。1日目は<a href="http://www.adventar.org/users/3650">backpaper0</a>さんの<a href="http://backpaper0.github.io/2016/12/01/wife_peropero.html">世界の中心で愛を叫んだうらがみ</a>です。</p>

<p>このアドベントカレンダーの提案者うらがみさんとは同年代のようです。同じJavaプログラマーで、愛妻家エンジニア同志ということで、2番手として記事を書かせていただきます。</p>

<p>僕は来年で結婚10年になります。妻は結婚当初からある病で闘病中の身ではありますが、おかげさまで、まだ無事夫婦を続けられています。</p>

<p>ここまで試練の連続ではありましたが、ここまでやれたのも、僕がエンジニアで良かったなーと思うことが多々あります。今日は、そんなエンジニアで良かったーと思うことを書いていこうと思います。</p>

<h2>エンジニアで良かったなあと思ったこと</h2>

<h3>その1. いつでも、どこでも仕事ができる</h3>

<p>ITエンジニアはPCと電源とネット環境さえあれば、大体の仕事ができます。</p>

<p>自宅作業などは比較的やりやすい職種だと思います。もっとも、妻は家に仕事を持ち込むことを嫌うので自宅での仕事はめったにしません。</p>

<p>どちらかと言えば、これが理由でフレックスに勤務できるというメリットを享受してきました。ある日具合が悪く看病のために休んでしまった時、遅れた仕事を土日にノマドワークで終わらせるなどということはよくやりました。</p>

<h3>その2. 理解がある上司に巡り合うことが多い</h3>

<p>比較的新しい職業なのでしがらみが少ないのか、それとも頭脳労働者であるために体育会系ではないからか、今まで巡り合った上司の方は、全てが家庭に配慮をしてくださって、柔軟に対応してくださいました。</p>

<h3>その3. どうしようもなかったら転職することができる</h3>

<p>どんな職場も状況が変わることがあります。それは仕方がないことです。そんな時、最後の手段として、転職をするという手段があります。エンジニアほど転職することに条件が良すぎる職種はないのではないでしょうか？エージェントなども充実していますが、IT勉強会などの人のつながりも捨てがたいです。</p>

<p>転職の度に、僕は家庭の状況を説明し、柔軟な勤務を認めていただいています。</p>

<h2>夫婦円満のための時間管理のすすめ</h2>

<p>ここまで書いたことに反して、僕はある時期、大変遅くまで連日残業。。。という生活をしていました。</p>

<p>それはたまたまその時、比較的家庭状況が落ち着いていたことと、プロジェクトが炎上状態にある中で、リーダーに任命されたこともあって、自分の判断で責任を全うしました。</p>

<p>しかし、それすら、もっとうまくできたのかなと今では反省しています。</p>

<p>その時は平気でしたが、やはり、そのような無理な働き方は体を壊しますし、夫婦仲も悪化させます。ただ早く帰ってればいいというだけではありませんが、だからと言って連日遅くまで働いて、パートナーを心配させてしまっては夫として失格です。</p>

<p>しかし、僕らエンジニアは、スケジューリングなどを生まれながらにして苦手としていた人種でもあります。そんなときはエンジニアらしく本で学びましょう！お勧めは何と言ってもこの本です。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4873113075&linkId=b4ddb92f5cced0db73ad311ebe634542"></iframe>

<p>ちなみにこの本はプログラマーというより、サーバー管理者を想定して書かれています。僕の主な職務はプログラミングですが大体においてスケジュールが狂う大きな原因は、「差し込み業務」にあって、プログラマー的な部分よりも「システムに詳しい人」という部分で発生します。なので、問題なく当てはまると思います。</p>

<h2>パートナーの調子が悪い。こんな時に大事な仕事が！という人の生き方</h2>

<p>働く男は悩みが多い。家庭で大問題！なのに仕事が！というとき、どうしたら良いでしょうか？例えば、世の中にはこんな人がいます。（本当はITエンジニアでこういう人を見つけたかったのですが、「管理職」って感じの方ですが。）</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4872905490&linkId=819f6ece01c6a7b76ad65f788902bc43"></iframe>

<p>感動の家族愛の物語です。「自分は妻を・家族を愛してるぞ」と言う人は、読みましょう！奥さんが肝硬変にうつ病でお子さんは自閉症、奥さんと娘さんが自殺未遂を経験、そんな家庭問題をオープンにしつつ、そのビハインドを背負ってなお、家庭問題を解決しながら、仕事術を極め、社長になった方の物語です。</p>

<p>ちなみに、この著者の方はこんな本も書いています。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4872903994&linkId=22bee73fbdedc46f4a076011b7b3f076"></iframe>

<p>しかし、この人の本を読み返すと、僕はこんなに強烈に仕事と家庭に情熱を燃やすおっさんになれるでしょうか？自信はありません。こういうすごい人もいる。しかし、自分は自分です。</p>

<p>そんな僕にはこっちの方が合っているように思います。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=esuai-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=4344413024&linkId=3feec4e7eaac0f1216f3be7164e3a976"></iframe>

<h2>まとめ</h2>

<p>実は、今日付けで僕は転職し、新天地で働いています。それに際して、これらの本を読み返しました。（なぜかって？これらの本は僕が妻を守るためにどうしたら良いか、考えるために読んだからですよ！）そうしてみると、これらの本が教えてくれたことを、僕は忘れていたなと思いました。「あの時、もっとうまくできたのに」と反省して止みません。いや、人生とは常にそんなものなのかもしれません。</p>

<p>しかし、今からでも遅くないと思いますから、僕は今日から頑張ります！みなさんも、一緒に家族愛の探求をしませんか？</p>

<p>そして、いつか「エンジニアのワークライフバランスと家族の幸せハッカソン」みたいな企画をやりたいと思います。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1790</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Bash on Windowsを入れてみてやってみたこと</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2016/bash_on_windows</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2016/bash_on_windows#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Fri, 19 Aug 2016 01:38:05 +0000</pubDate>
				<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1776</guid>

					<description><![CDATA[出遅れてしまいましたが、8月頭に公開されたWindows 10 Anniversary Updateについて、書きます。 目当てはもちろんBash on (Ubuntu on) Windows 他にも色々変わっているよう [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>出遅れてしまいましたが、8月頭に公開されたWindows 10 Anniversary Updateについて、書きます。</p>

<h2>目当てはもちろんBash on (Ubuntu on) Windows</h2>

<p>他にも色々変わっているようですが、僕はこのためにアップデートしたんだと言うくらい、この機能に期待していました。導入の仕方はこの辺りを参考にすると良いと思います。</p>

<p><a href="http://qiita.com/Aruneko/items/c79810b0b015bebf30bb">http://qiita.com/Aruneko/items/c79810b0b015bebf30bb</a></p>

<h2>僕が入れてみたもの</h2>

<h3>ssh</h3>

<p>標準のターミナルがCommand Promptで、日本語とかがうまく表示されなかったりするので、とりあえず、これを入れて、PuttyとかPoderosaでアクセスしたい！こんなことせずにmsys2やcygwinみたいにminttyでアクセスできると良いんだけどね。</p>

<p><a href="http://qiita.com/ubnt_intrepid/items/84a56a01cf7081401917">http://qiita.com/ubnt_intrepid/items/84a56a01cf7081401917</a></p>

<p>こちらの記事では、/etc/ssh/sshd_configに以下の表記が必要ということだったけど、<code>PasswordAuthentication yes</code>は不要で、ちゃんと鍵認証できました。</p>

<pre><code>UsePrivilegeSeparation no
PasswordAuthentication yes
</code></pre>

<h3>LAMP環境</h3>

<p>まあ、王道的使い方の一つというか、Web開発するときに、マカーたちがローカルに環境をホイホイ立ててる間にWindowsっ子は（Windows版で環境を立てると微妙に違って動かないとか言われて）仮想マシンをセットアップしなければならなかったことがなくなるのは良いですね！</p>

<pre><code class="language-sh">$ sudo apt-get install php5 php5-mysql mysql-server
$ php -S localhost:8000
</code></pre>

<p>これでローカル8000ポートでPHPが動くことを確認できました。</p>

<p>ただ、MySQL部分だけはWindows版を動かしたほうが早いかも！</p>

<h3>PHP7</h3>

<p>Bash on Windows のUbuntuは14.04 LTS準拠らしいです。ちょっと古いですよね！PHPも5が標準のようです。</p>

<p>次の記事を見ると、16.04にすることもできるみたいですが、あまりテストされていないだろうと考えると怖いので、あくまで14.04の範囲で頑張ろうと思います。</p>

<p><a href="http://qiita.com/Aruneko/items/2670f42d36a7508c13bb">http://qiita.com/Aruneko/items/2670f42d36a7508c13bb</a></p>

<p>せっかくならPHP7を入れてみましょう。</p>

<pre><code class="language-sh">$ sudo add-apt-repository ppa:ondrej/php
$ sudo ape-get install php7.0
</code></pre>

<p>まあ、普通に入りました。</p>

<h3>node環境</h3>

<p>これこそやりたいことですよね！今時npmをまともに使えないWindowsは取り残されてた感満載でした！</p>

<p>ただ、</p>

<pre><code class="language-sh">$ apt-get install nodejs
</code></pre>

<p>で入るnodejsは古いので、使ってはいけないようです。。<br />
最初これをやってしまってハマりました！</p>

<p>次の記事などを参考にして最新版のnodeをインストールすれば、npmなども最近の記事に書かれているとおりに動きました。</p>

<p><a href="http://qiita.com/TsutomuNakamura/items/7a8362efefde6bc3c68b">http://qiita.com/TsutomuNakamura/items/7a8362efefde6bc3c68b</a></p>

<pre><code class="language-sh">$ sudo curl -sL https://deb.nodesource.com/setup | sudo bash -
$ sudo apt-get install nodejs
</code></pre>

<p>ただ、現時点でnodejs, npm界隈は流動性が激しく、ほんの半年前の記事に従って操作しても、書き方が変わっていたりして思ったように動かなかったりしました。</p>

<p>とはいえ、これはWindowsの問題じゃない</p>

<h3>HHVM, mariadb</h3>

<p>PHP7、mysql5.6が動けば別に構わないのですが、せっかくなので、HHVM, Maria DBの組み合わせも動くかどうかやってみました。</p>

<p>結論としては動きました(^o^;)</p>

<p>やり方は、僕の記事が良いのではないでしょうか？</p>

<p><a href="http://www.susumuis.info/entry/2014/06/11/222935">http://www.susumuis.info/entry/2014/06/11/222935</a></p>

<p>この上で、WordPressなんかもすんなりと動いてしまいました！</p>

<p>せっかくなので、一時的にポートを開けて外部からアクセスしてみて速いかどうかテストしてみましたが、同じWindows上のHyper Vで動かしているHHVM + MariaDBなWordPressの方が速かったです！</p>

<h3>SSH for WindowsからBash</h3>

<p>今の状態では、Bash on Windowsはあくまで開発者用で、サーバー向けではありませんから、Bashウィンドウを開かないとSSHなどができません！</p>

<p>自宅サーバーのメンテナンスに、リモートデスクトップを使っていますが、スピードの遅いモバイル回線ではこれはきついので、SSHできたら便利です。</p>

<p>一応、SSH for Windowsというのはありますが、リモート越しにコマンドプロンプトになるので、あんまり嬉しくない。（Power Shellとか使いこなせると良いらしいですが。。。）</p>

<p>そこで、SSH for Windowsごしにbashとコマンドを打って、Bashに切り替えられたら便利だなーと思ってやってみたのですが、どうもこれはダメみたいです。</p>

<h2>総評</h2>

<p>他の方のブログを見させていただいたところによると、Docker動かそうとして動かない。Oracle JavaやOpen JDK動かそうとして動かないなど、色々と動かないものもあるようです。</p>

<p>しかし、とはいっても、　Ubuntuなのが良いです！Ubuntu向けのWebの記事のまんまやって大体動きます！HHVMは長いことMac用のバイナリがリリースされていなかったので、場合によってはかえってWindowsの方がネイティブ環境を立てやすいということになるかもしれません！</p>

<p>今時、Linuxを使うといっても、ソースからビルドして環境を建てられる猛者はあまりおらず、aptやyumなどのコマンドラインで解決するのがほとんどです。ああ、僕が欲しかったのはLinuxではなく、Ubuntu（またはDebian)だったのか〜と痛感しました。</p>

<p>ただ、ターミナルで日本語が欠けて表示されてしまうなど、不完全なところも多い部分は今後に期待です。</p>

<p>また、「開発者モード」にしないとインストールできないので、現場によっては、「開発者モード」への設定が禁止されて使うことができないかもしれません。あと、タブレットでよく使われている32bit版Windows版には提供されていないようです。</p>

<p>そう言った、もろもろのことを考えると、Windowsでcurlやgrepなどのコマンドラインが欲しいという用途では、<a href="https://msys2.github.io/">msys2</a> が現状では最適のように思います。</p>

<p>しかし、なんといってもUbuntuということで、今後に期待したいと思います！</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1776</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>同時に複数の処理を実行するための最低限の知識 – メイドさんでも分かるプログラミングシリーズ vol.4</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2016/multi_thread_maid</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2016/multi_thread_maid#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Thu, 14 Jan 2016 11:12:58 +0000</pubDate>
				<category><![CDATA[Web技術]]></category>
		<category><![CDATA[メイドさんでも分かるプログラミング]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1762</guid>

					<description><![CDATA[前回に引き続き、メイドさんにプログラミングを教えるためのシリーズです。 前回Webサーバーの仕組みについて、説明しました。早速アプリからWebサーバーに通信するプログラムを作ってみたくなりますが、その前に一つ知っておかな [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><a href="http://www.susumuis.info/entry/2016/web">前回</a>に引き続き、メイドさんにプログラミングを教えるためのシリーズです。</p>

<p>前回Webサーバーの仕組みについて、説明しました。早速アプリからWebサーバーに通信するプログラムを作ってみたくなりますが、その前に一つ知っておかなければならないことがあります。</p>

<h2>外部と通信する時に大切なこと</h2>

<p>Webサーバーは、アプリを実行する端末とは通信回線越しに離れたところにある別のコンピューターです。そのため、通信をして結果が帰ってくるまでの間には、どうしても待ち時間が発生します。</p>

<p>ところで、プログラムは通常、上から順に書いたとおりに実行されます。途中で遅い処理があると、その処理が終わるまであとの処理は行われないのが大原則です。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/eef66e5acdf43d3339b97b40706924c5.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/eef66e5acdf43d3339b97b40706924c5.png" alt="通信している間待つ" width="960" height="720" class="alignnone size-full wp-image-1768" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/eef66e5acdf43d3339b97b40706924c5.png 960w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/eef66e5acdf43d3339b97b40706924c5-300x225.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/eef66e5acdf43d3339b97b40706924c5-624x468.png 624w" sizes="(max-width: 960px) 100vw, 960px" /></a></p>

<p>もし、Webサーバーとの通信のような遅い処理を待ってしまったらどうなってしまうでしょうか？ボタンを押してから、サーバーが結果を返すまでの間、固まってしまうことになります。その間は、他のボタンを押すこともできませんし、ホームボタンを押してホーム画面に戻ることも、別のアプリを起動することも、アプリを終了することさえもできなくなってしまいます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/273d4a327ea8aba12073bc940b107437.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/273d4a327ea8aba12073bc940b107437.png" alt="通信中ボタンが押せない！--" width="886" height="621" class="alignnone size-full wp-image-1769" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/273d4a327ea8aba12073bc940b107437.png 886w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/273d4a327ea8aba12073bc940b107437-300x210.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/273d4a327ea8aba12073bc940b107437-624x437.png 624w" sizes="(max-width: 886px) 100vw, 886px" /></a></p>

<p>こんなアプリを作ったらユーザーに怒られてしまいますね。(^^;<br />
(実際はできないようになっています)</p>

<h2>並列プログラミングとは</h2>

<p>外部との通信など結果が得られるまでに時間がかかってしまう処理は、待つのではなく、別個独立してやって欲しいです。このような処理「並列処理」と言います。</p>

<p>並列処理をJavaで実現する、最も基本的な仕組みとして、「スレッド」というものがあります。Threadとは糸という意味です。一つの処理の流れを糸に例えて、複数の糸が同時に伸びて絡み合っている様子をイメージしてください。複数のスレッドを使うので、「マルチスレッド」ということもあります。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/7df507a877acd839271582b721ba1872.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/7df507a877acd839271582b721ba1872.png" alt="スレッドは糸" width="732" height="715" class="alignnone size-full wp-image-1770" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/7df507a877acd839271582b721ba1872.png 732w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/7df507a877acd839271582b721ba1872-300x293.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/7df507a877acd839271582b721ba1872-624x610.png 624w" sizes="(max-width: 732px) 100vw, 732px" /></a></p>

<p>Javaでスレッドを作るためにはズバリ、<code>Thread</code>というクラスを使います。書き方は2通りあります。</p>

<pre><code class="language-java">Thread t = new Thread() {
    @Override
    public void run() {
        // 処理
    }
};
t.start();
</code></pre>

<pre><code class="language-java">Thread t = new Thread(new Runnable() {
    @Override
    public void run() {
        // 処理
    }    
});
t.start();
</code></pre>

<p>2つの書き方の結果に違いはありません。<a href="http://www.susumuis.info/entry/2016/java_object_technic">第2回</a>の知識を使うと、前者はTemplate Methodで、後者はRunnableという関数オブジェクトを使っていますが、どちらを使うかは自由です。</p>

<p>最も手っ取り早くスレッドを作りたければこんな書き方ができます。</p>

<pre><code class="language-java">new Thread() {
    @Override
    public void run() {
        // 処理
    }    
}.start();
</code></pre>

<p>スレッドの使い方はこれだけです（笑）</p>

<p>しかし、実際はスレッドを扱うには注意しなければいけないことがたくさんあります。</p>

<h2>スレッドは動き始めてしまったら止められない（汗;</h2>

<pre><code class="language-java">Thread t = new Thread() {
    @Override
    public void run() {
        // 処理
    }
};
t.start();
</code></pre>

<p>このように初めてしまったスレッドtは、もう、run()メソッドが終了するまで外側から止めることはできません。</p>

<p><code>stop()</code>、<code>susupend()</code>というようなメソッドがあるように見えますが、これらは「安全ではない」と非推奨になっています。<br />
<a href="http://www.susumuis.info/wp-content/uploads/2016/01/26adcde5efb2ea9973e46c5c97ef221e.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/26adcde5efb2ea9973e46c5c97ef221e.png" alt="スレッドは止められない" width="882" height="584" class="alignnone size-full wp-image-1772" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/26adcde5efb2ea9973e46c5c97ef221e.png 882w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/26adcde5efb2ea9973e46c5c97ef221e-300x199.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/26adcde5efb2ea9973e46c5c97ef221e-624x413.png 624w" sizes="(max-width: 882px) 100vw, 882px" /></a></p>

<p>もし、プログラミングを失敗して、いつまでも終了しないスレッドがたくさん作られたら大変です！マシンが暴走してしまい、システムはカックカクで最終的に強制終了しなければならないでしょう。</p>

<h2>毎回結果が異なる</h2>

<p>複数のスレッドがあるとき、コンピュータはどのスレッドをどのくらい優先的に実行するのか、プログラマーには制御できません。そのため、全体の処理の順番が、その時時によってバラバラになります。そのため</p>

<p>「あれ？前回と結果が違う」</p>

<p>「トラブルの報告を受けて、言われたとおりに試したけど再現しない」</p>

<p>ということが格段に増えます。</p>

<h2>データが壊れることがある</h2>

<p>オブジェクトは複数のスレッドから同時に使われることを想定していない場合があります。</p>

<p>例えばプログラムをカフェの店員さんに例えてみましょう「お客さんのコップの中身が空なら水を注ぐ」という仕事があったとします。きっとこんなプログラムだと思います。</p>

<pre><code class="language-java">if (お客さんのコップは空ですか？()) {
    お客さんのコップに水を注ぐ();
}
</code></pre>

<p>とてもシンプルですね！店員さんが一人の時はこれで問題がありませんでしたが、大変ありがたいことに、お店に人気が出て、お客さんがたくさんいるので、店員さんを複数人雇いました。店員さん一人ひとりが一つの「スレッド」です。</p>

<pre><code class="language-java">class 店員スレッド extends Thread {
    @Override
    public void run() {
        while (就業時間中？()) {
            if (お客さんのコップは空ですか？()) {
                お客さんのコップに水を注ぐ();
            }
            // その他色々        
        }        
    }
}
Thread 店員1 = new 店員スレッド();
Thread 店員2 = new 店員スレッド();
Thread 店員3 = new 店員スレッド();
店員1.start();
店員2.start();
店員3.start();
</code></pre>

<p>さあ、みんなで仕事を始めたら大混乱！</p>

<ul>
<li>まず、店員1さんが、お客さんのコップを確認します。</li>
<li>「あ、コップが空だ！注がなきゃ！」といって水を準備します。</li>
<li>その間に店員2さんも、同じお客さんのコップを確認します。</li>
<li>「あ、コップが空だ！注がなきゃ！」といって水を準備します。</li>
<li>店員1さんが戻ってきてコップに水を注ぎます。</li>
<li>コップは水で満タンになります。</li>
<li>そこへ店員2さんが戻ってきました。</li>
<li>店員2さんは、さっきコップが空だと確認したので、よく確認しないで、コップに水を注ぎます</li>
<li>コップは既に水で満タンなので、盛大にこぼれます！！</li>
</ul>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/044cf9d5de75828a8844dd302ff6c3ec.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/044cf9d5de75828a8844dd302ff6c3ec.png" alt="データの破壊" width="914" height="488" class="alignnone size-full wp-image-1773" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/044cf9d5de75828a8844dd302ff6c3ec.png 914w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/044cf9d5de75828a8844dd302ff6c3ec-300x160.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/044cf9d5de75828a8844dd302ff6c3ec-624x333.png 624w" sizes="(max-width: 914px) 100vw, 914px" /></a></p>

<p>実際の人では、そんなことは起きませんが、複数人の人が無秩序に動いていたら大変な様子が想像できると思います。</p>

<p>並列プログラミングでは、「あるデータの状態を見る」それにもとづいて「次の処理をする」というプログラムを書くとき、「その間に別のスレッドが書き換えているかもしれない」という心配が常に発生するのです。</p>

<p>そこで、どうするかというと、店員1さんがお客さんの対応を始めたら、別の店員さんが同じお客さんを対応しないように、印を付けてしまいます。この行為を「ロック」と言ってJavaでは<code>synchronized</code>と書きます。</p>

<pre><code class="language-java">synchronized (お客さん) {
    // お客さんに対する処理
}
</code></pre>

<p>このようにしておくと、別の店員さんはロックされている間、そこで処理を待ちます（別のお客さんのところには行かないです）。</p>

<h2>固まってしまうことがある</h2>

<p>そんな、データの破壊を防ぐためのロック機構ですが、ロックをすると別の怖い問題が発生します。「デッドロック」という現象です。</p>

<ul>
<li>お客さん1をロックする</li>
<li>何かする</li>
<li>お客さん2をロックする</li>
<li>何かする</li>
</ul>

<p>という店員Aさんと、</p>

<ul>
<li>お客さん1をロックする</li>
<li>何かする</li>
<li>お客さん2をロックする</li>
<li>何かする</li>
</ul>

<p>という店員Bさんが同時に動いていたとします。</p>

<p>運悪く、それぞれが「お客さん1」「お客さん2」をロックした後、それぞれ「お客さん2」「お客さん1」をロックしようとしたらどうなるでしょう。</p>

<p>答えは2人の店員さんは見つめ合って固まってしまいます。＼(^o^)／</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/6c7859797c3dff69ee59a49bc61ae567.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/6c7859797c3dff69ee59a49bc61ae567.png" alt="デッドロック" width="960" height="720" class="alignnone size-full wp-image-1774" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/6c7859797c3dff69ee59a49bc61ae567.png 960w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/6c7859797c3dff69ee59a49bc61ae567-300x225.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/6c7859797c3dff69ee59a49bc61ae567-624x468.png 624w" sizes="(max-width: 960px) 100vw, 960px" /></a></p>

<p>この現象を「デッドロック」と言います。デッドロックはとても怖い現象です。防ぐことが難しく、発生したらもう救うことができないからです。</p>

<p>デッドロックを防ぐ方法としては、</p>

<ul>
<li>逐次ロックせず一変に全部ロックする</li>
<li>ロックする順序を必ず同じにする</li>
</ul>

<p>などの工夫があります。それでも、複雑なプログラムではうっかりどこかで考慮漏れは発生します。</p>

<p>今日もどこかでデッドロックでプログラムが固まっているでしょう。</p>

<h2>まとめ</h2>

<p>並列プログラミングは、カフェで店員さんがたくさんいるような状態だとイメージ出来ましたでしょうか？人がたくさん働くときは、秩序が必要であるのと同じように、コンピュータも、マルチスレッドの時は秩序の管理が大切になります。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1762</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Webサーバーの仕組み – メイドさんでも分かるプログラミングシリーズ vol.3</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2016/web</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2016/web#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Mon, 04 Jan 2016 03:30:03 +0000</pubDate>
				<category><![CDATA[Web技術]]></category>
		<category><![CDATA[メイドさんでも分かるプログラミング]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1748</guid>

					<description><![CDATA[前回に引き続き、メイドさんにプログラミングを教えるためのシリーズです。 今回は前回までとうってかわって、Webサーバーの仕組みを説明します。Androidアプリを使っていると「この部分はサーバーが必要だ」「ウェブサーバー [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><a href="http://www.susumuis.info/entry/2016/java_object_technic">前回</a>に引き続き、メイドさんにプログラミングを教えるためのシリーズです。</p>

<p>今回は前回までとうってかわって、Webサーバーの仕組みを説明します。Androidアプリを使っていると「この部分はサーバーが必要だ」「ウェブサーバーを立てよう！」という言葉をよく聞くと思います。</p>

<p>「ウェブ」って、「ホームページ」とか見るための仕組みではないでしょうか？なぜ、スマートフォンアプリにWebサーバーが必要なのか？Webサーバーを立てると何ができるのか、アプリ開発視点で見ていきたいと思います。</p>

<h2>WWW(World Wide Web)は、世界中の論文をリンクする仕組みだった</h2>

<p>昔々、と言っても1990年代なのですが、Timさん (Tim Berners-Lee)という人が、現在私達が「インターネット」だと思っている世界を考えました。</p>

<p>World Wide Webと名付けられたそれは、当時、できたてほやほやの「The Internet」を使って、論文を公開する仕組みとして設計されたものでした。</p>

<p>論文は他の論文を引用します。引用先はワンクリックでジャンプできたら便利です。そこで、引用先にリンクできる仕組みを「ハイパーリンク」を実現するテキスト文書「ハイパーテキスト」が誕生しました。「HTML」です。これは</p>

<pre><code class="language-markup">&lt;a href="リンク先"&gt;リンクテキスト&lt;/a&gt;
</code></pre>

<p>のように書くと、他の文書にリンクできる画期的な書式でした！</p>

<p>Webとはくもの巣という意味です。文書と文書がリンクによってくもの巣のように世界中に張り巡らされている！それがワールドワイドなウェブの目指す世界だったのです。</p>

<p>この世界を実現するために、論文を読むためのソフト（Webブラウザー）と、論文を配信するホストコンピュータ（Webサーバー）が作られました。WebブラウザーとWebサーバーは互いに通信をします。通信をするための決まりごとを「プロトコル」と言います。Web専用のプロトコルとして、「HTTP (Hyper Text Transfer Protocol)」が作られました。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/f9b025524cafcc3e5bd64687ef83670b.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/f9b025524cafcc3e5bd64687ef83670b.png" alt="WWWの世界" width="960" height="720" class="alignnone size-full wp-image-1751" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/f9b025524cafcc3e5bd64687ef83670b.png 960w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/f9b025524cafcc3e5bd64687ef83670b-300x225.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/f9b025524cafcc3e5bd64687ef83670b-624x468.png 624w" sizes="(max-width: 960px) 100vw, 960px" /></a></p>

<h3>用語のおさらい</h3>

<table>
<thead>
<tr>
  <th>用語</th>
  <th>意味</th>
</tr>
</thead>
<tbody>
<tr>
  <td>World Wide Web</td>
  <td>Timさんが考えた「The Internet」上の論文配信ネットワーク</td>
</tr>
<tr>
  <td>ハイパーリンク</td>
  <td>論文から引用先論文にジャンプする画期的機能</td>
</tr>
<tr>
  <td>ハイパーテキスト(HTML)</td>
  <td>ハイパーリンクを実現するための文書形式</td>
</tr>
<tr>
  <td>Webサーバー</td>
  <td>論文を配信するサーバー</td>
</tr>
<tr>
  <td>Webブラウザ</td>
  <td>論文を閲覧するためのソフト</td>
</tr>
<tr>
  <td>プロトコル</td>
  <td>通信をするための決まりごと</td>
</tr>
<tr>
  <td>HTTP</td>
  <td>WebサーバーとWebブラウザの間で行われる通信のプロトコル</td>
</tr>
</tbody>
</table>

<h2>HTTPの仕組み</h2>

<p>論文をサーバーから貰うには、次の情報が必要です。</p>

<ul>
<li>論文のファイル名</li>
</ul>

<p>論文を取得する命令を<code>GET</code>と名付けられました。</p>

<pre><code>GET /folder/hogehoge.html
</code></pre>

<p>この命令（「HTTPリクエスト」と言います）を受け取ったWebサーバーは、folderの中にhogehoge.htmlがあれば次の情報を返します。</p>

<ul>
<li>「あったよ！」という情報</li>
<li>hogehoge.html の内容</li>
</ul>

<p>これらを合わせて「HTTPレスポンス」と言います。</p>

<p>そのうち、前者を「ステータスコード」と言います。これは数字3桁によって定められていて、例えば次のように決まっています。</p>

<ul>
<li>200: OK (あったよ！)</li>
<li>400: BAD REQUEST（リクエストが間違ってるよ！）</li>
<li>404: NOT FOUND（そんなファイル無いよ！）</li>
<li>500: INTERNAL SERVER ERROR（ごめん、サーバーでエラーが起きちゃった（汗;）</li>
<li>503: Service Unavailable（ごめん、今混んでるみたいだ！後でもう一度来て！）</li>
</ul>

<p>とてもシンプルな仕組みですね！</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/c68ffc7bd746476edb9e3036a1cfaa98.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/c68ffc7bd746476edb9e3036a1cfaa98.png" alt="HTTPの仕組み" width="674" height="419" class="alignnone size-full wp-image-1754" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c68ffc7bd746476edb9e3036a1cfaa98.png 674w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c68ffc7bd746476edb9e3036a1cfaa98-300x186.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c68ffc7bd746476edb9e3036a1cfaa98-624x388.png 624w" sizes="(max-width: 674px) 100vw, 674px" /></a></p>

<h2>WebサーバーがHTMLを自動生成しても良い</h2>

<p>Webサーバーは、Webブラウザーから、リクエストを受け取ったら、ステータスコードと、HTMLページを返せば良いのです。HTMLページは、サーバーのディスク上に、HTMLファイルとして置いておくことが最もシンプルですが、別に、ファイルがなくても、その場でプログラムで作ってしまっても良いのです！</p>

<p>Webリクエストを受け取ったWebサーバーが、プログラムを動かす仕組みとして、CGI (Common Gateway Interface) という物が作られました。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/4667a427d9a5345fc675c0d0c2d76ad2.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/4667a427d9a5345fc675c0d0c2d76ad2.png" alt="Webプログラムの仕組み (2)" width="994" height="412" class="alignnone size-full wp-image-1755" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/4667a427d9a5345fc675c0d0c2d76ad2.png 994w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/4667a427d9a5345fc675c0d0c2d76ad2-300x124.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/4667a427d9a5345fc675c0d0c2d76ad2-624x259.png 624w" sizes="(max-width: 994px) 100vw, 994px" /></a></p>

<p>プログラムによって毎回違うページを作ることができるので便利です（例えば、現在時刻を出力！）このようなページのことを「動的ページ」と言います。反対に毎回変わらないページを「静的ページ」と言います。</p>

<h2>Webリクエストにパラメータを渡したくなったら</h2>

<p>CGIによって「動的ページ」が実現できると、プログラムにパラメータを与えたくなってきます。そこで、初め、ファイル名の後ろに<code>?</code>を付けてその後ろにパラメータをつけていく方法が考えられました。</p>

<pre><code>GET xxx.html?id=1
</code></pre>

<p>この方法はとても便利です。現在でも、Googleの検索結果を</p>

<pre><code>https://www.google.com/?q=Java
</code></pre>

<p>のように表すことができます。</p>

<p>しかし、問題がありました。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/629e7e24cc890b0ad82151fae1082975.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/629e7e24cc890b0ad82151fae1082975.png" alt="GETの仕組み" width="889" height="403" class="alignnone size-full wp-image-1756" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/629e7e24cc890b0ad82151fae1082975.png 889w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/629e7e24cc890b0ad82151fae1082975-300x136.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/629e7e24cc890b0ad82151fae1082975-624x283.png 624w" sizes="(max-width: 889px) 100vw, 889px" /></a></p>

<ul>
<li>大量のデータを送ろうとすると長くなりすぎる</li>
</ul>

<p>そこで、POSTという別の方法が考えられました。これは、ファイル名を指定した後、一行空行を開けてパラメータを送るという方法です。</p>

<pre><code>POST /hello.cgi

name=taro&amp;age=20&amp;country=Japan&amp;.......
</code></pre>

<p>これによって、非常に大量の情報が遅れるようになったので、Webを使って「ご注文フォーム」が作れるようになりました。Amazonのようなネット通販の始まりです。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/c0967b409bdfc252ff72a72783c00a9a.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/c0967b409bdfc252ff72a72783c00a9a.png" alt="POSTの仕組み" width="889" height="403" class="alignnone size-full wp-image-1757" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c0967b409bdfc252ff72a72783c00a9a.png 889w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c0967b409bdfc252ff72a72783c00a9a-300x136.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c0967b409bdfc252ff72a72783c00a9a-624x283.png 624w" sizes="(max-width: 889px) 100vw, 889px" /></a></p>

<h2>時代の流れとともに、いろんな情報を送りたくなってきた</h2>

<p>時代は流れ、WWWは論文の配信だけにとどまらず、通販やゲームのようなあらゆる用途で使用されるようになってきました。しかも、文書だけでなく、画像、音声、映像、様々な種類のデータを配信するようになります。</p>

<p>そうすると、HTTPもどんどん複雑になります。現在はHTTP 1.1というバージョンが主流で、次のようにいろんな情報を送ります。</p>

<pre><code>GET http://www.susumuis.info/
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Accept-Encoding:gzip, deflate, sdch
Accept-Language:ja,en-US;q=0.8,en;q=0.6
Cache-Control:no-cache
Connection:keep-alive
Cookie:
Host:www.susumuis.info
Pragma:no-cache
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36
</code></pre>

<p>レスポンスは</p>

<pre><code>200 OK
Cache-Control:no-cache, must-revalidate, max-age=0
Connection:keep-alive
Content-Encoding:gzip
Content-Type:text/html; charset=UTF-8
Date:Mon, 04 Jan 2016 02:57:30 GMT
Expires:Wed, 11 Jan 1984 05:00:00 GMT
Pragma:no-cache
Server:nginx
Transfer-Encoding:chunked
Vary:Accept-Encoding

&lt;!DOCTYPE html&gt;
&lt;html&gt;
〜
（省略）
&lt;/html&gt;
</code></pre>

<p>こんな風に、色々な情報が付与されてきます。<code>Accept:</code>のようにHTTPリクエストに付与される付加情報を「リクエストヘッダ」と呼びます。<code>Cache-Control:</code>のようにHTTPレスポンスに付与される付加情報を「レスポンスヘッダ」と呼びます。</p>

<h2>Content-Typeヘッダについて</h2>

<p>レスポンスヘッダに次の部分がありました。これは「コンテンツタイプ」といって、とても重要な情報です。</p>

<pre><code>Content-Type:text/html; charset=UTF-8
</code></pre>

<p><code>text/html</code>は、「MIME Type」と呼ばれる情報です。これは、レスポンスするデータの種類を表しています。MIME Typeには次のようなものがあります。</p>

<table>
<thead>
<tr>
  <th>MIME Type</th>
  <th>意味</th>
</tr>
</thead>
<tbody>
<tr>
  <td>text/plain</td>
  <td>テキスト文書</td>
</tr>
<tr>
  <td>text/html</td>
  <td>HTMLページ</td>
</tr>
<tr>
  <td>image/jpeg</td>
  <td>JPEG画像</td>
</tr>
<tr>
  <td>text/javascript</td>
  <td>JavaScript</td>
</tr>
<tr>
  <td>application/xml</td>
  <td>XMLデータ</td>
</tr>
<tr>
  <td>application/json</td>
  <td>JSONデータ</td>
</tr>
</tbody>
</table>

<h2>アプリとWebサーバー</h2>

<p>本来、Webサーバーは、WebブラウザーにWebページを配信することを目的としたサーバーでした。しかし、時代は流れ、Webブラウザだけでなく、HTTPプロトコルさえ使えれば、Webサーバーと通信ができる特性を利用して、スマートフォンアプリなどのプログラムがサーバーと通信をするために大変広く使われるようになりました。</p>

<p>HTTPがシンプル・高機能・有名で便利だったからです。</p>

<p>プログラム同士の通信では、もう、HTMLを使用する必要はありません。HTMLは人間に見た目を提供するためのフォーマットだからです。</p>

<p>プログラムで使う場合は、XMLまたはJSONというデータ形式が使われます。</p>

<p>XMLの例</p>

<pre><code class="language-markup">&lt;items&gt;
  &lt;item&gt;
    &lt;name&gt;アイテム1&lt;/name&gt;
    &lt;price&gt;1000&lt;/price&gt;
    &lt;image&gt;xxxxxx.jpg&lt;/image&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;name&gt;アイテム2&lt;/name&gt;
    &lt;price&gt;1240&lt;/price&gt;
    &lt;image&gt;yyyyyy.jpg&lt;/image&gt;
  &lt;/item&gt;
&lt;/items&gt;
</code></pre>

<p>JSONの例</p>

<pre><code class="language-javascript">{
    {
        "name": "アイテム1",
        "price": 1000,
        "image": "xxxxxx.jpg"
    },
    {
        "name": "アイテム2",
        "price": 1250,
        "image": "yyyyyy.jpg"
    }
}
</code></pre>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/c365e9a2cdfd5e85b48f85f59a0ddee0.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/c365e9a2cdfd5e85b48f85f59a0ddee0.png" alt="アプリからの利用イメージ" width="626" height="240" class="alignnone size-full wp-image-1758" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c365e9a2cdfd5e85b48f85f59a0ddee0.png 626w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c365e9a2cdfd5e85b48f85f59a0ddee0-300x115.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c365e9a2cdfd5e85b48f85f59a0ddee0-624x239.png 624w" sizes="(max-width: 626px) 100vw, 626px" /></a></p>

<h2>サーバーはどうなっているの？</h2>

<p>アプリ側から、サーバーの内部を意識する必要はありません。しかし、サーバーは通常次のように作られています。</p>

<h3>Webサーバー</h3>

<p>Apacheや、IIS、Nginxというようなサーバーソフトが使われます。</p>

<h3>サーバープログラム</h3>

<p>PHPや、Javaや、Rubyで書かれています。その間にアプリケーション・サーバーというソフトウェアが動いている場合もあります。</p>

<h3>DBサーバー</h3>

<p>Webサーバーは非常に大量のデータを扱うため、DBサーバーという専用のソフトウェアが使われることが大変多いです、MySQL、PostgreSQL、Oracleなどが有名です。</p>

<h3>キャッシュサーバー</h3>

<p>DBサーバーは非常に便利ですが、遅いという問題があります。そこで、高速化の目的で、別途キャッシュ用のサーバーが用意されていることがあります。Redis、Memcachedなどが有名です。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/56ad01ec6bb4bcd4f0d8211e8095a971.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/56ad01ec6bb4bcd4f0d8211e8095a971.png" alt="サーバーの構成例" width="930" height="314" class="alignnone size-full wp-image-1759" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/56ad01ec6bb4bcd4f0d8211e8095a971.png 930w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/56ad01ec6bb4bcd4f0d8211e8095a971-300x101.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/56ad01ec6bb4bcd4f0d8211e8095a971-624x211.png 624w" sizes="(max-width: 930px) 100vw, 930px" /></a></p>

<h2>まとめ</h2>

<p>このように、もともと論文を配信するためであったWebサーバーはとても便利なので、アプリのデータをやり取りするために使われるようになりました。</p>

<p>Webサーバーは今やとても複雑な仕組みですが、呼び出す側としては、HTTPプロトコルさえ分かればやり取りができるので、内部まで意識しなくても大丈夫です！</p>

<p>それでは、次回は実際にアプリから呼び出す方法を説明していきます。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1748</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Javaでオブジェクトを使いこなすために知っておくべきこと – メイドさんでも分かるプログラミングシリーズ vol.2</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2016/java_object_technic</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2016/java_object_technic#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Sat, 02 Jan 2016 13:46:10 +0000</pubDate>
				<category><![CDATA[メイドさんでも分かるプログラミング]]></category>
		<category><![CDATA[未分類]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1709</guid>

					<description><![CDATA[前回に引き続き、メイドさんにプログラミングを教えるためのシリーズです。 前回「オブジェクトの多態性ができると便利です」と説明しました。今回は、なぜ便利なのか分かるように、プログラミングでよく使われるテクニックを6つ紹介し [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><a href="http://www.susumuis.info/2015/class_interface">前回</a>に引き続き、メイドさんにプログラミングを教えるためのシリーズです。</p>

<p>前回「オブジェクトの多態性ができると便利です」と説明しました。今回は、なぜ便利なのか分かるように、プログラミングでよく使われるテクニックを6つ紹介したいと思います。</p>

<p>これらを知ることが出来ればオブジェクト指向のメリットを理解出来るだけでなく、実践でプログラミングをしているプログラマーと、かなりコアな会話ができるようになりますよ！</p>

<h2>その1: 関数オブジェクト</h2>

<p>プログラムをしていると「何か起きた時に、この関数を実行して欲しい」という時が良くあります。このような、ある条件の時に実行してもらう関数のことを「コールバック関数」と呼びます。</p>

<p>Javaはメソッドを変数や関数のパラメータに代入することができませんので、こういう時、コールバックして欲しい処理を書いたメソッドを持つオブジェクトを作って、それを渡します。</p>

<p>このようなオブジェクトのことを関数オブジェクトと呼びます。</p>

<p>例えば、架空のクラスですが、WebClientというWebサーバーに通信をして、通信が成功した時に行う処理を指定できるようになっているとします。WebClientResponseCallBackというインターフェース</p>

<pre><code class="language-java">webClient.connect(new WebClientResponseCallBack() {
    @Override
    public void onSucceeded(int status, String result) {
        System.out.println("成功しました");
        System.out.println(status);
        System.out.println(result);
    }
    @Override
    public void onFailed(String result) {
        System.out.println("失敗しました");
        System.out.println(status);    
        System.out.println(result);
    }
});
</code></pre>

<p>これは架空のコードですが、このようなスタイルのライブラリはたくさんありますので、慣れておきましょう。</p>

<p>※<code>@Override</code>という記号が初めて登場しました。これはアノテーションと言うもので、プログラムにつける印です。様々な場面で使用しますが、<code>@Override</code>アノテーションは、継承してメソッドを上書きしていることを示すものです。必須ではないため前回は省略しましたが、付けないとコンパイラ警告が出てしまいますので、今回からは付けることとします。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/aea90ac086e5e9982cc6bcd65768b84e.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/aea90ac086e5e9982cc6bcd65768b84e.png" alt="関数オブジェクト" width="937" height="527" class="alignnone size-full wp-image-1740" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/aea90ac086e5e9982cc6bcd65768b84e.png 937w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/aea90ac086e5e9982cc6bcd65768b84e-300x169.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/aea90ac086e5e9982cc6bcd65768b84e-624x351.png 624w" sizes="(max-width: 937px) 100vw, 937px" /></a></p>

<h2>その2: Template Method パターン</h2>

<p>関数オブジェクトと似たような用途として、クラス継承を活用して、処理を記述する方法もあります。</p>

<p>これも、架空のクラスですが、例えば、画面があって、OKボタンを押した時に何が起こるかはプログラミングできるようになっているライブラリが合ったとします。</p>

<pre><code class="language-java">SampleScreen s = new SampleScreen() {
    public onClickOkButton() {
        System.out.println("ボタンが押された！！");
    }
};
s.show();
</code></pre>

<p>このような、クラス継承を利用して、一部分のメソッドだけサブクラスに委ねるテクニックを、Template Method パターンと呼びます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/435a1daf9aa31294d6804c218671374b.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/435a1daf9aa31294d6804c218671374b.png" alt="テンプレートメソッド" width="604" height="448" class="alignnone size-full wp-image-1741" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/435a1daf9aa31294d6804c218671374b.png 604w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/435a1daf9aa31294d6804c218671374b-300x223.png 300w" sizes="(max-width: 604px) 100vw, 604px" /></a></p>

<h2>その3: ラッパーオブジェクトパターン</h2>

<p>例えば、以下のコードは今まで「おまじないです」と言われていたと思います。</p>

<pre><code class="language-java">BufferedReader reader = new BufferedReader(new FileReader("data.dat"));
</code></pre>

<p>これは、<code>FileReader</code>というクラスを<code>BufferedReader</code>クラスが包みこんでいます。BufferedReaderのような、内部にオブジェクトを包み込むオブジェクトのことを「ラッパー（Wrapper）オブジェクト」と呼びます。楽器のラッパじゃないですよ。●ランラップのラップです！</p>

<p>FileReaderは、ファイルを読み込むことができますが、バッファリングの機能はありません。一方、BufferedReaderはバッファリングの機能はありますが、自らファイルを読み込む機能はありません。</p>

<p>そこで、BufferedReaderでFileReaderを包み込むことによって、バッファリングしながらファイルを読み込むことを実現しています。</p>

<p>どんなにオブジェクトを包み込んでいても、外側から見ると内側は隠蔽されています。そして、インターフェースさえ一致していれば、内側に入れるものを切り替えてもプログラムが動きます。</p>

<pre><code class="language-java">BufferedReader reader = new BufferedReader(new InputStreamReader(System.in);
</code></pre>

<p>どんなときに、ラッパーオブジェクトを作るのでしょうか？主に次のようなとき作られます。</p>

<ul>
<li>内側のクラスのインターフェースを変換して、別のインターフェースとしてAPIに渡す</li>
<li>内側のクラスの動作に付加機能を付け加える</li>
</ul>

<p>このように、ラッパーオブジェクトはプログラムをとても柔軟にするテクニックです。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/04c78654c9727817da2678516cf984bd.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/04c78654c9727817da2678516cf984bd.png" alt="ラッパーオブジェクト" width="711" height="442" class="alignnone size-full wp-image-1743" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/04c78654c9727817da2678516cf984bd.png 711w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/04c78654c9727817da2678516cf984bd-300x186.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/04c78654c9727817da2678516cf984bd-624x388.png 624w" sizes="(max-width: 711px) 100vw, 711px" /></a></p>

<h2>その4: Factory</h2>

<p>クラスからインスタンスを作るとき、</p>

<pre><code class="language-java">new クラス名();
</code></pre>

<p>と書くと説明してきました。しかし、オブジェクト指向の世界で、<code>new</code>はわりと嫌われ者です。何故かと言うと、これまでのテクニックの真髄はクラスを切り替えることにあります。</p>

<pre><code class="language-java">SoundsMaker s = new Cat();
s.makeSounds(); // ニャー
</code></pre>

<pre><code class="language-java">SoundsMaker s = new Dog();
s.makeSounds(); // わん
</code></pre>

<p>せっかく<code>SoundsMaker</code>インターフェースを抽出しているのに、プログラムの中に <code>new</code> があるため、動作が決定してしまいるのが良くないとされます。</p>

<p>そこで、newをなるべく隠蔽しようと言うテクニックとしてFactoryパターンというものがあります。</p>

<p>例えば、newを直接書かず、メソッドにしてしまうアイデア</p>

<pre><code class="language-java">public static SoundsMaker getSoundsMaker(String name) {
    if ("tama".equals(name)) {
        return new Cat();
    }
    if ("pochi".equals(name)) {
        return new Dog();
    }
    return null;
}
</code></pre>

<pre><code class="language-java">SoundsMaker s = getSoundsMaker("tama");
s.makeSounds(); // ニャー
</code></pre>

<pre><code class="language-java">SoundsMaker s = getSoundsMaker("pochi");
s.makeSounds(); // ワン
</code></pre>

<p>getSoundsMakerのプログラムを見なかったとしたら、呼び出し元は何のインスタンスが作られるか分かりません。しかし、そんなことを知らなくても、SoundsMakerインターフェースであることは保証されているので、その範囲でできることは安心して使うことができます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/c81b47f255963cad5d8b193f6b47bb82.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/c81b47f255963cad5d8b193f6b47bb82.png" alt="ファクトリー" width="711" height="442" class="alignnone size-full wp-image-1744" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c81b47f255963cad5d8b193f6b47bb82.png 711w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c81b47f255963cad5d8b193f6b47bb82-300x186.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c81b47f255963cad5d8b193f6b47bb82-624x388.png 624w" sizes="(max-width: 711px) 100vw, 711px" /></a></p>

<h2>その5: MVCモデル</h2>

<p>これは考え方であって、コード例はありません。ざっと覚えておいてください。</p>

<p>一般的に比較的大きなプログラムを書くときは、次のように分割すると良いと言われています。</p>

<table>
<thead>
<tr>
  <th></th>
  <th>役割</th>
</tr>
</thead>
<tbody>
<tr>
  <td>モデル</td>
  <td>ロジックを担当</td>
</tr>
<tr>
  <td>ビュー</td>
  <td>表示を担当</td>
</tr>
<tr>
  <td>コントローラ</td>
  <td>ユーザーの操作に応答し、モデル・ビューを操作する</td>
</tr>
</tbody>
</table>

<p>例えばAndroidで言えば、Activityクラスはコントローラです。もしActivityに全部のプログラムを書いてしまうと、だんだん巨大になってしまいますので、必要に応じて、モデルを切り出すと全体の見通しが良くなります。</p>

<p>ビューは、レイアウトの部分で、同じActivityに異なるレイアウトファイルを与えても動く点でAndroidはビューとコントローラについて抽象化されていると言えます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/c39dc0080b2a1aee4c3c11c8919f87ae.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/c39dc0080b2a1aee4c3c11c8919f87ae.png" alt="MVCモデル" width="711" height="442" class="alignnone size-full wp-image-1745" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c39dc0080b2a1aee4c3c11c8919f87ae.png 711w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c39dc0080b2a1aee4c3c11c8919f87ae-300x186.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/c39dc0080b2a1aee4c3c11c8919f87ae-624x388.png 624w" sizes="(max-width: 711px) 100vw, 711px" /></a></p>

<h2>その6: モックオブジェクト</h2>

<p>最後に、モックオブジェクトについて説明します。</p>

<p>「モック」：モックアップ（mock up）とは、店頭にある展示用模型のことです。本物ではありませんが、本物のような見かけをしています。</p>

<p>プログラムを作っていると、「Aというオブジェクトを使用するにはBというオブジェクトが必要」「Bというオブジェクトの初期化にはCという情報が必要」「CはAndroid実機じゃないと取得できない」などのように、芋づる式に、あらゆるオブジェクトがからみ合ってくることがあります。</p>

<p>しまいには、非常に大きなオバケのような存在になってしまい、一箇所変更すると、どこに影響するのか全然わからなくなることがあります。</p>

<p>この問題を回避するために、本物ではない、仮のオブジェクトを作って動作確認を行うというテクニックが行われます。</p>

<p>そのためのオブジェクトを「モック」あるいは「スタブ」と呼びます。スタブとは「代用品」という意味です。切り株が原義のようです。</p>

<p>インターフェースを使ってプログラミングがされている場合は、比較的カンタンにモックを作ることが出来ます。</p>

<pre><code class="language-java">interface SoundsMaker {
    void makeSounds();
}
</code></pre>

<p>お馴染みのこのインターフェース。実は今アナタはゲームを作っていて、そのゲームでは音を扱っているとします。そこではSoundsMakerインターフェースを継承したオブジェクトがmakeSoundsとやると実際にスピーカーから音が鳴るのです。</p>

<pre><code class="language-java">class Bomb implements SoundsMaker {
    void makeSounds() {
        // 複雑なプログラム
        // 結果的にスピーカーから音が鳴る
        // 「ドカーン！！」        
    }
}
</code></pre>

<p>しかし、Bombクラスを動かすためには、どうやら専用のハードウェアがないといけないそうです。</p>

<p>でも、音を鳴らす以外の部分は、どうやら普通のパソコンでも動かせるみたいです。</p>

<p>そんな時は、モックオブジェクトの出番です。</p>

<pre><code class="language-java">class BombMock implements SoundsMaker {
    void makeSounds() {
        System.out.println("ドカーン！");
    }
}
</code></pre>

<p>Bombクラスの代わりにBombMockクラスを使用するように切り替えれば、特殊なハードウェアがなくても、プログラムが動くようになります。その代わり、音が鳴るタイミングで音はならず、代わりに</p>

<pre><code>ドカーン！
</code></pre>

<p>という文字が出力されます。</p>

<p>本物のオブジェクトとモックの切り替えは、オブジェクトインスタンスをnewで生成するところで行わなければなりません。そのためには「その4」で説明した、「ファクトリー」を使用する検討が必要になってきます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2016/01/519c3352eb4cceca1630f17942944e15.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2016/01/519c3352eb4cceca1630f17942944e15.png" alt="モックオブジェクト" width="711" height="442" class="alignnone size-full wp-image-1746" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/519c3352eb4cceca1630f17942944e15.png 711w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/519c3352eb4cceca1630f17942944e15-300x186.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2016/01/519c3352eb4cceca1630f17942944e15-624x388.png 624w" sizes="(max-width: 711px) 100vw, 711px" /></a></p>

<h2>まとめ</h2>

<p>今回説明したテクニックを使う、プログラムからどんどん野暮ったさが消えて洗練されて来ていると思いませんか？</p>

<p>しかし、洗練し過ぎも問題です。</p>

<p>例えば、Factoryの説明で作った次のコードは</p>

<pre><code class="language-java">SoundsMaker s = getSoundsMaker()
s.makeSounds();
</code></pre>

<p>元の</p>

<pre><code class="language-java">Cat tama = new Cat();
tama.mew();
</code></pre>

<p>だった時のほうが、垢抜けない可愛さがあります。</p>

<p>洗練されたプログラムというのは、高貴でお近づきにくい存在なのです。より多くのことを知らないと読めないし、知っていてもどんな動きをするのか「実行するまで分からない」ときます。</p>

<p>どこまで洗練すれば良いかは、作っているプログラム次第です。一般的に大きなプログラムは、より洗練されていることが求められますが、個人で作るアプリでは、あどけない感じで作ったほうが正解だったりします。</p>

<p>この感覚は、実際にアプリを作って行くことで培われていきますので、実践で身につけて行ってください。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1709</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Javaのクラス・インターフェース入門 &#8211; メイドさんでも分かるプログラミングシリーズ vol.1</title>
		<link>https://susumuishigami.github.io/susumuisinfo/2015/class_interface</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/2015/class_interface#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Tue, 29 Dec 2015 12:56:25 +0000</pubDate>
				<category><![CDATA[Android]]></category>
		<category><![CDATA[Java]]></category>
		<category><![CDATA[メイドさんでも分かるプログラミング]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1693</guid>

					<description><![CDATA[プログラミングというのは、カンがいいと、言われたとおりに入力しているだけである程度のことができるようになります。しかし、そういうやり方では「ここはおまじない」「ここは決まり文句」という部分がどうしても多くなってしまいます [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>プログラミングというのは、カンがいいと、言われたとおりに入力しているだけである程度のことができるようになります。しかし、そういうやり方では「ここはおまじない」「ここは決まり文句」という部分がどうしても多くなってしまいます。</p>

<p><a href="http://kokucheese.com/main/host/%E6%97%A5%E6%9C%ACAndroid%E3%81%AE%E4%BC%9A%E7%A7%8B%E8%91%89%E5%8E%9F%E6%94%AF%E9%83%A8%E3%83%BB%E3%82%B3%E3%82%B9%E3%83%97%E3%83%AC%E7%90%86%E7%B3%BB%E5%A5%B3%E5%AD%90%E6%99%AE%E5%8F%8A%E9%83%A8/">ちょっと訳あって</a>、秋葉原のメイドさんにプログラミングを教えています。そのメイドさんたちはまさにそうで、彼女たちは既にAndroid Studioで画面レイアウトをいじり、画面遷移をするプログラムを書く能力はありますが、「おまじない」「決まり文句」の多さに困惑しているように思います。</p>

<p>そこで、今日から「メイドさんでも分かるプログラミング」シリーズを初め、プログラミングの基礎をやさしく説明していこうと思います。</p>

<p>読者のレベルとしては、PCを日常的に使いこなしていているが、プログラミングの専門教育を受けていないという想定です。</p>

<p>なお、あらかじめ、次の記事レベルのJavaの基礎知識は学習済みであることを前提とします。</p>

<p><a href="http://qiita.com/euc_/items/1c1ef42d62cdcbd23421">プログラム初心者に贈るJavaプログラミング - Qiita</a></p>

<p>では、早速初めます。</p>

<p>第1回は、クラスとインターフェースについてです。</p>

<h2>クラスってなに？</h2>

<p>Javaのプログラムを書くと、必ずこんな「おまじない」を書いてくださいと言われたと思います。</p>

<pre><code class="language-java">public class Hello {
    // ....(省略)
}
</code></pre>

<p>「パブリック」「クラス」と読みます。何でしょうこれは？</p>

<p>実はJavaのプログラムは「クラス」の集まりとして定義する「オブジェクト指向言語」なのです。</p>

<p>「オブジェクト指向」？？？</p>

<p>また新しい言葉が出てしまいました。</p>

<p>大丈夫です。これからゆっくり、説明します。</p>

<h2>オブジェクト指向とは</h2>

<p>「オブジェクト指向」とは、まじめに説明すると本が一冊書けてしまいます。<a href="https://www.dropbox.com/sh/sqgifcp3zaf8dwx/AADMlSj934XxgS6GDlxMSEN4a?dl=0">ここに知り合いが書いた本気な資料があります</a>ので、興味があったら読んでみてください。</p>

<p>ざっくり言うと、プログラムを「オブジェクト」という塊の集まりで作成します。「オブジェクト」とは「モノ」です。ここで、ちょっと日常世界を見てください。あらゆるモノがありますよね。</p>

<p>例えば、次の絵では、テーブルの上にコーヒーが淹れてあります。コーヒーはコーヒーカップに注がれていて、ソーサーの上に乗っています。スプーンも付いています。テーブルは木製ですね。金属の脚が付いています。「コーヒー」「カップ」「ソーサー」「スプーン」「テーブル」これらすべてがオブジェクトです。しかも「テーブル」は「木の板」「金属の脚」などの部品から構成されています。部品もオブジェクトです。</p>

<p><div id="attachment_1694" style="width: 785px" class="wp-caption alignnone"><a href="http://www.susumuis.info/wp-content/uploads/2015/12/95c466b606256006a832aab4b867672f.png"><img loading="lazy" decoding="async" aria-describedby="caption-attachment-1694" src="http://www.susumuis.info/wp-content/uploads/2015/12/95c466b606256006a832aab4b867672f.png" alt="このように日常世界はあらゆる「モノ」の集まりで構成されている" width="775" height="440" class="size-full wp-image-1694" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/95c466b606256006a832aab4b867672f.png 775w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/95c466b606256006a832aab4b867672f-300x170.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/95c466b606256006a832aab4b867672f-624x354.png 624w" sizes="(max-width: 775px) 100vw, 775px" /></a><p id="caption-attachment-1694" class="wp-caption-text">このように日常世界はあらゆる「モノ」の集まりで構成されている</p></div></p>

<p>オブジェクト指向では、このように、あらゆる物に注目していきます。そうすると、一つ一つの「モノ」はシンプルに表現することができます。「カップ」はコーヒーを注ぐことができればいい。「スプーン」はお砂糖を掬うことができれば良いといった機能に特化することができるからです。</p>

<p>なぜそんなことをするかというと、昨今のコンピュータプログラムはとても複雑だからです。もし、すべてを一つのプログラムで書いていたら、神様のようにもの凄く巨大な存在になってしまいます。人間に神を作ることはできません。オブジェクト指向プログラミングがあるお陰で、複雑なプログラムも部品の組み合わせとして簡単に作れるというわけです。</p>

<h2>クラスとインスタンス</h2>

<p>さて、オブジェクトは「クラス」と「インスタンス」に分かれます。クラスはオブジェクトの設計図、インスタンスは設計図から作られたオブジェクトの実体です。一つの設計図からたくさんの実体を作ることができます。</p>

<p>これは、たい焼きモデルで説明されることがあります。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/6a68b6992bfe74e7e3bf7aa8d4a77b66.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/6a68b6992bfe74e7e3bf7aa8d4a77b66.png" alt="たい焼きモデル" width="473" height="319" class="alignnone size-full wp-image-1695" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/6a68b6992bfe74e7e3bf7aa8d4a77b66.png 473w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/6a68b6992bfe74e7e3bf7aa8d4a77b66-300x202.png 300w" sizes="(max-width: 473px) 100vw, 473px" /></a></p>

<p>さて、Javaはこのうち「クラス」の部分をプログラミングして行きます。プログラムの初めに <code>public class</code> と書いているのはそのためです。</p>

<p>実際にプログラムが動く時には「インスタンス」の方が使われます。「クラス」から「インスタンス」を作るためには次のように書きます。</p>

<pre><code class="language-java">new クラス名();
</code></pre>

<p>作ったクラスは通常、次のように書いて「変数」に格納して使います。変数は覚えていますよね？</p>

<pre><code class="language-java">クラス名 変数名 = new クラス名();
</code></pre>

<p>あれ、クラス名を2度書いていますね？実は、左側のクラス名は正しくは「型名」と言います。変数には「型」がありました。例えばこんな型です。</p>

<table>
<thead>
<tr>
  <th>型</th>
  <th>意味</th>
</tr>
</thead>
<tbody>
<tr>
  <td>int</td>
  <td>整数</td>
</tr>
<tr>
  <td>long</td>
  <td>大きな整数</td>
</tr>
<tr>
  <td>double</td>
  <td>浮動小数点数</td>
</tr>
<tr>
  <td>boolean</td>
  <td>true or false</td>
</tr>
<tr>
  <td>Object</td>
  <td>オブジェクトインスタンスを格納</td>
</tr>
<tr>
  <td>クラス名</td>
  <td>そのクラスに属するオブジェクトインスタンスを格納</td>
</tr>
</tbody>
</table>

<p>オブジェクトインスタンスを格納する変数型としては「Object」という型が存在します。なので、次のように書いてもエラーにはなりません。</p>

<pre><code class="language-java">Object 変数名 = new クラス名();
</code></pre>

<p>しかし、通常「Object型」は使用しません。それはなぜでしょうか？変数の型は、プログラミング言語に「その変数は何ができるのか？」と教える印なのです。つまり、</p>

<pre><code class="language-java">Object 変数名 = new クラス名();
</code></pre>

<p>というプログラムは「その変数はモノです」と言ってるに過ぎないのです。</p>

<p>「モノ」であることは分かっています。でも「モノ」と言われても、何ができるのかわからないですよね。「自動車」も「鍋」も「コーヒー」も、「人間」さえも、「モノ」ですから。</p>

<p>そこで、変数名の左にクラス名を書くことで、それが「モノ」の中でも何なのかを教えてあげているのです。</p>

<pre><code class="language-java">自動車 mycar = new 自動車();
mycar.走れ(); // これはOK

Object mycar = new 自動車();
mycar.走れ(); // 「モノ」が「走る」とは限らないからエラー
</code></pre>

<h2>フィールドとメソッド</h2>

<p>モノの設計図であるクラスは次のようにプログラミングします。</p>

<pre><code class="language-java">class クラス名 {
    フィールド定義;
                :
                :

    メソッド定義
                :
                :
}
</code></pre>

<p>「フィールド」とは、クラスに属する変数のことです。Java以外の言語では「メンバー変数」ということもあります。そして「メソッド」はクラスに属する関数のことです。同様に「メンバー関数」と呼ぶこともあります。</p>

<p>ざっくり言うと、クラスの定義は「フィールド」と「メソッド」を定義するだけです。それでどうしてモノの設計図になるのでしょうか？</p>

<h2>状態と振る舞い</h2>

<p>モノの概念に立ち戻ってみると、モノは「状態」と「振る舞い」という概念を持ちます。</p>

<p>「状態」というのは、年齢とか、職業とか、モノそれぞれによって、あるいは同じモノでもその時々によって変化する情報です。</p>

<p>「振る舞い」というのは、モノの外側から見える動作です。</p>

<p>ティーカップを例にすると、次のような状態と振る舞いがあります。</p>

<ul>
<li>振る舞い<br />
<br />
<ul>
<li>液体を注ぐ</li>
<li>注いだ液体を飲む</li>
</ul></li>
<li>状態<br />
<br />
<ul>
<li>汚れの有無</li>
<li>ヒビの有無</li>
<li>今注がれているモノ</li>
</ul></li>
</ul>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/b9d2b89664df1263c98c80b382323712.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/b9d2b89664df1263c98c80b382323712.png" alt="カップのユースケース図" width="676" height="447" class="alignnone size-full wp-image-1698" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/b9d2b89664df1263c98c80b382323712.png 676w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/b9d2b89664df1263c98c80b382323712-300x198.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/b9d2b89664df1263c98c80b382323712-624x413.png 624w" sizes="(max-width: 676px) 100vw, 676px" /></a></p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/2e8cc88b4d191d321155287093c2556c.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/2e8cc88b4d191d321155287093c2556c.png" alt="カップの状態" width="629" height="425" class="alignnone size-full wp-image-1699" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/2e8cc88b4d191d321155287093c2556c.png 629w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/2e8cc88b4d191d321155287093c2556c-300x203.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/2e8cc88b4d191d321155287093c2556c-624x422.png 624w" sizes="(max-width: 629px) 100vw, 629px" /></a></p>

<p>そして、Javaのフィールドは「状態」を、メソッドは「振る舞い」を表現しているのです。</p>

<h2>ねこ様をプログラミング</h2>

<p>それでは、ニャーと鳴くねこ様をプログラミングしてみましょう。</p>

<p>このねこ様は外部から見ると、こんな振る舞いをするようです。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/7e2acf01b0ccc21cdd01efded0a13db7.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/7e2acf01b0ccc21cdd01efded0a13db7.png" alt="ねこ様ユースケース図" width="676" height="447" class="alignnone size-full wp-image-1697" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/7e2acf01b0ccc21cdd01efded0a13db7.png 676w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/7e2acf01b0ccc21cdd01efded0a13db7-300x198.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/7e2acf01b0ccc21cdd01efded0a13db7-624x413.png 624w" sizes="(max-width: 676px) 100vw, 676px" /></a></p>

<p>ここで、ねこ様は「鳴け」「寝ろ」「起きろ」なんていう人間の命令を聞かないとは思わないでください。コンピュータプログラミングというのは、日常世界全てを表現する必要はありません。今、自分が必要な範囲だけプログラミングすれば良いのです。</p>

<p>ねこ様の状態として「寝ている」という状態があるとします。このプログラムでは、寝ている時と、起きている時で鳴き方が違うということを表現します。</p>

<p>以下がプログラミング例です。</p>

<pre><code class="language-java">/** ねこ様 */
class Cat {
    /** 寝ているかどうか。true:寝ている, false:起きている */
    boolean slept;
    /** 鳴け */
    void mew() {
        if (slept)  {
            System.out.println("ふにゅあ")
        } else {
            System.out.println("にゃー")
        }        
    }
    /** 寝ろ */
    void goToSleep() {
        slept = true;
    }
    /** 起きろ */
    void wakeUp() {
        slept = false;
    }
}
</code></pre>

<p>早速、ねこ様クラスを使ってみましょう</p>

<pre><code class="language-java">Cat tama = new Cat();
tama.mew();
tama.goToSleep();
tama.mew();
tama.wakeUp();
tama.mew();
</code></pre>

<p>実行結果</p>

<pre><code class="language-java">ニャー
ふにゃあ
ニャー
</code></pre>

<p>※ 最初のmewは「ニャー」となっています。これは、sleptフィールドの初期値がfalseであることを意味しています。このようにフィールド変数は、初期値が決められています。</p>

<table>
<thead>
<tr>
  <th>型</th>
  <th>初期値</th>
</tr>
</thead>
<tbody>
<tr>
  <td>数値</td>
  <td>0</td>
</tr>
<tr>
  <td>boolean</td>
  <td>false</td>
</tr>
<tr>
  <td>オブジェクト</td>
  <td>null</td>
</tr>
</tbody>
</table>

<h2>アクセス修飾子</h2>

<p>よく見かけるpubicとか、privateとは何でしょうか？これは外部に公開するかどうかを指定する記述です。ざっくり言うと</p>

<table>
<thead>
<tr>
  <th>アクセス修飾子</th>
  <th>意味</th>
</tr>
</thead>
<tbody>
<tr>
  <td>private</td>
  <td>外部に非公開</td>
</tr>
<tr>
  <td>public</td>
  <td>外部に公開</td>
</tr>
</tbody>
</table>

<p>という風に分類されます。他にprotectedというのがありますが、後ほど説明します。</p>

<p>もし、さっきのねこ様クラスをprivate classとして作成してしまうと、別のプログラムから参照できなくなります。（実際は記述は許されません）</p>

<p>では、何でもpublicにしてしまえば便利かというと、世の中何でもかんでも中のことをオープンにしてしまうことは不都合だったりします（笑）</p>

<p>オブジェクト指向プログラミングでは、積極的に、外側から見て不要なものを隠蔽していきます。そのようなテクニックを「カプセル化」と呼びます。</p>

<p>常に当てはまるわけではありませんが、「メソッド」は公開し、「フィールド」は非公開するのがセオリーです。もし、フィールドの値を直接確認したい場合は、<code>getフィールド名()</code>、<code>setフィールド名()</code>という「メソッド」を作るのが作法とされます。こういったメソッドを「アクセッサー」と呼びます。</p>

<p>アクセッサーの例</p>

<pre><code class="language-java">public class Human {
    private String name;
    private int age;
    public void setName(String name) {
        this.name = name;
    }
    public void getName() {
        return name;
    }
    public void setAge(int age) {
        this.age = age;
    }
    public int getAge() {
        return age;
    }
}
</code></pre>

<p>メソッドもまた「非公開」にすることがあります。これは、外部からの振る舞いといよりも、プログラミングの都合上で共通部分を抜き出した場合などに、そのようにします。</p>

<pre><code class="language-java">/** 名前を教えると挨拶してくれるマシーン */
public class HelloMachiene {
    private String firstName;
    private String lastName;
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    // 姓と名をくっつけて使うことが多いので共通化
    private String getFullName() {
        return lastName + firstName;
    }
    public void sayHello() {
        System.out.println("こんにちは" + getFullName() + "さん");    
    }
    public void sayGoodBye() {
        System.out.println("さようなら" + getFullName() + "さん");    
    }
}
</code></pre>

<h2>コンストラクタ</h2>

<pre><code class="language-java">new クラス名()
</code></pre>

<p>と書いた時にプログラムを動かして、フィールドを初期化したいことが良くあります。このようなときに使うものとして「コンストラクタ」というものがあります。</p>

<p>コンストラクタはクラス内に次のように記述します。</p>

<pre><code class="language-java">public クラス名() {
    // 初期化プログラム
}
</code></pre>

<p>メソッドと似ていますが、返り値の型がありません。メソッドは</p>

<pre><code class="language-java">public 返り値の型 メソッド名() {
    // プログラム
}
</code></pre>

<p>でした。ところで、コンストラクタは、メソッドと同じようにパラメータを持つことが出来ます。上手く使うとプログラムを完結に書くことが出来ます。</p>

<pre><code class="language-java">public class Human {
    private String name;
    private int age;
    public Human(String name, int age) {
        this.name = name;
        this.age = age;    
    }
    public String toString() {
        return name + "(" + age + ")";
    }
}
</code></pre>

<p>使用例</p>

<pre><code class="language-java">Human satoshi = new Human("サトシ", 10);
Human okido = new Human("オーキド", 55);
System.out.println(satochi);
System.out.println(okido);
</code></pre>

<p>結果</p>

<pre><code class="language-java">サトシ(10)
オーキド(55)
</code></pre>

<p>※toStringという名前のメソッドを作って文字列が必要な場所で使用すると、toStringを省略してもtoStringが呼ばれます。これはJavaの仕様です。つまり</p>

<pre><code class="language-java">System.out.println(satochi.toString());
</code></pre>

<p>と書いても同じ結果になります。</p>

<h2>継承・多態性</h2>

<p>新しいことが次々に出てきて大変ですね！でも、もう少しでオブジェクト指向の一番大事なところを知ることが出来ます。大変ですが、どうか我慢してください。</p>

<p>クラスを作っていくと、同じようなクラスができてくることに気が付きます。そして、それらを束ねたいことがあります。その時に使用するのが「継承」というしくみです。</p>

<p>例えば、「ニャー」と鳴くねこ様のほかに「ワン」と鳴く犬クラス、「モー」と鳴く牛クラス、「ブヒー」と鳴くブタクラスを作ったとします</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/742d52b1ba81a8eb91eee0f8fb5e974c.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/742d52b1ba81a8eb91eee0f8fb5e974c.png" alt="鳴け！" width="899" height="593" class="alignnone size-full wp-image-1721" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/742d52b1ba81a8eb91eee0f8fb5e974c.png 899w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/742d52b1ba81a8eb91eee0f8fb5e974c-300x198.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/742d52b1ba81a8eb91eee0f8fb5e974c-624x412.png 624w" sizes="(max-width: 899px) 100vw, 899px" /></a></p>

<pre><code class="language-java">class Cat {
    public makeSounds() {
        System.out.println("ニャー");
    }
}
class Dog {
    public makeSounds() {
        System.out.println("ワン");
    }
}
class Cow {
    public makeSounds() {
        System.out.println("モー");
    }
}
class Pig {
    public makeSounds() {
        System.out.println("ブヒー");
    }
}
</code></pre>

<p>※英語とは面倒なもので、ねこはmew, 犬はbarkのように「鳴く」という動詞が異なるため、音を鳴らすというmakeSoundsで統一しました。</p>

<p>あるメソッドがあって、動物を鳴かせたいとします。しかし、ねこを鳴かせるメソッドを使って、犬を鳴かせることは出来ません。</p>

<pre><code class="language-java">void makeSounds(Cat cat) {
    cat.makeSounds();
}
</code></pre>

<pre><code class="language-java">Cat tama = new Cat();
Dog pochi = new Dog();
makeSounds(tama); // これはOK
makeSounds(dog); // これはダメ
</code></pre>

<p>これでは不便です。なぜなら、CatもDogも、makeSoundsというメソッドを持っているからです。</p>

<p>そこで、そこで、次の2つの考え方があります。</p>

<h3>考えた方1: 犬もねこも「鳴く」ことができる</h3>

<p>外部から見て、共通の振る舞いを持っているものは、「インターフェース」というしくみで束ねることが出来ます。</p>

<p>インターフェースは次のように定義します</p>

<pre><code class="language-java">interface インターフェース名 {
    返り値の型 メソッド名();
    返り値の型 メソッド名();
        :
        :
}
</code></pre>

<p>中身の無いメソッドの名前だけを並べて行くのです。</p>

<p>そして、<u>クラスを作るときにimplementsというキーワードでインターフェースを指定すると、そのクラスのインスタンスは、そのクラス型の変数の他に、そのインターフェース型の変数にも代入することが出来ます。</u></p>

<p>難しいのでアンダーラインを引きました。深呼吸して、この部分を5回読んでみてください。</p>

<p>あせらないで！ゆっくりで良いですよ！</p>

<p>5回読みましたか？</p>

<p>では、具体例を書きますね。</p>

<pre><code class="language-java">class Cat implements SoundsMaker {
    // ...
}
</code></pre>

<p>として定義したら、こんな書き方がOKになります。</p>

<pre><code class="language-java">SoundsMaker tama = new Cat();
</code></pre>

<p>そして、次のプログラミングコードが成立します。</p>

<pre><code class="language-java">interface SoundsMaker {
    void makeSounds();
}
class Cat implements SoundsMaker {
    public makeSounds() {
        System.out.println("ニャー");
    }
}
class Dog implements SoundsMaker {
    public makeSounds() {
        System.out.println("ワン");
    }
}
class Cow implements SoundsMaker {
    public makeSounds() {
        System.out.println("モー");
    }
}
class Pig implements SoundsMaker {
    public makeSounds() {
        System.out.println("ブヒー");
    }
}
</code></pre>

<pre><code class="language-java">public makeSounds(SoundsMaker soundsMaker) {
    soundsMaker.makeSounds();
}
</code></pre>

<pre><code class="language-java">Cat tama = new Cat();
Dog pochi = new Dog();
makeSounds(tama);
makeSounds(pochi);
</code></pre>

<p>実行結果</p>

<pre><code>ニャー
ワン
</code></pre>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/f4603aca48fdcd4644861ea24e921d19.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/f4603aca48fdcd4644861ea24e921d19.png" alt="インターフェース版鳴け！" width="740" height="471" class="alignnone size-full wp-image-1722" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/f4603aca48fdcd4644861ea24e921d19.png 740w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/f4603aca48fdcd4644861ea24e921d19-300x191.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/f4603aca48fdcd4644861ea24e921d19-624x397.png 624w" sizes="(max-width: 740px) 100vw, 740px" /></a></p>

<p>このテクニックを「インターフェース継承」あるいは「インターフェース抽出」と呼びます。</p>

<h3>考え方2:犬もねこも「動物」である</h3>

<p>犬も、ねこも、牛も「動物」という共通の概念を持っています。そういう共通の概念をスーパークラスと呼びます（親クラスとも呼びます）。反対は「サブクラス」（子クラス）です。</p>

<p>Javaではextendsというキーワードでスーパークラスを指定します。</p>

<pre><code class="language-java">class Animal {
    void makeSounds() {
        System.out.println("???");
    }
}
class Cat extends Animal {
    public makeSounds() {
        System.out.println("ニャー");
    }
}
class Dog extends Animal {
    public makeSounds() {
        System.out.println("ワン");
    }
}
</code></pre>

<p>インターフェースとの違いは、スーパークラスはあくまでクラスであるということです。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/38e623c2a3009961f0e575bd35d98dcf.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/38e623c2a3009961f0e575bd35d98dcf.png" alt="継承版鳴け！" width="740" height="471" class="alignnone size-full wp-image-1723" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/38e623c2a3009961f0e575bd35d98dcf.png 740w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/38e623c2a3009961f0e575bd35d98dcf-300x191.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/38e623c2a3009961f0e575bd35d98dcf-624x397.png 624w" sizes="(max-width: 740px) 100vw, 740px" /></a></p>

<pre><code class="language-java">new Animal()
</code></pre>

<p>と書いてしまうことも出来ます（禁止することも出来ますが今は割愛します）。またフィールドを持ったり、メソッドのプログラムを記述することも出来ます。そのようにすることで、共通メソッドなどを作ることも出来ます。</p>

<p>このテクニックを「クラス継承」、または単に「継承」と呼ぶことがあります。</p>

<h2>どっちを使ったら良いの？</h2>

<p>もし、振る舞いを束ねたいだけ場合は、インターフェースを使用してください。でも、インターフェースはめんどくさいこともあります。特にたくさんのメソッドを束ねるときには向いていません。また実装を持つことが出来ないため、コピーペーストが増えてしまいます。</p>

<p>スーパークラスは、一つしか持つことが出来ません。つまり、安易にスーパークラスを使うと後で後悔することになります。</p>

<p>どんなときにクラス継承を使うか、インターフェースを使うかなどを指南するものの一つとして、「デザインパターン」というテクニック集が存在します。このシリーズの中でも紹介して行きたく思います。</p>

<h2>多態性（ポリモーフィズム）</h2>

<p>「多態性」とは聞き慣れないキーワードですね。しかし、これこそが、オブジェクト指向の真髄なのです。しかも、既にあなたはこのテクニックを使っています！</p>

<p>先程の例で、SoundsMakerインターフェースを使った例でも、Animalスーパークラスを使った例でも、どちらでも結構です。</p>

<p>あるところに</p>

<pre><code class="language-java">SoundsMaker m;
</code></pre>

<p>という変数がありました。そして、紆余曲折を経てmには何か値が代入されています。その後</p>

<pre><code class="language-java">m.makeSounds();
</code></pre>

<p>と書いてあったとします。実行結果は次のうちどれでしょうか？</p>

<ul>
<li>ニャー</li>
<li>ワン</li>
<li>ブヒー</li>
<li>モー</li>
<li>???</li>
</ul>

<p>正解は「わからない」です。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/3cbbeac7df8a1bf50563145c14df13fa.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/3cbbeac7df8a1bf50563145c14df13fa.png" alt="インターフェース版鳴け！？" width="740" height="471" class="alignnone size-full wp-image-1725" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/3cbbeac7df8a1bf50563145c14df13fa.png 740w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/3cbbeac7df8a1bf50563145c14df13fa-300x191.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/3cbbeac7df8a1bf50563145c14df13fa-624x397.png 624w" sizes="(max-width: 740px) 100vw, 740px" /></a></p>

<p>引っかけでごめんなさい。そうなのです。その時点で、どのように動くのか、<u>実行してみないと分からないという柔軟なプログラミングが出来るのです。</u>これが出来ると、プログラミングが大変便利になります。</p>

<p>とにかく「鳴く」ことが出来るものを（実際にどんな鳴き声かは気にせず）一緒くたに全部束ねてプログラミングしておいて、後から「鳴く」何かを当てはめるというプログラミング手法が実際には非常によく行われます。</p>

<p>そうすれば、たったひとつのプログラムで何通りものプログラムが作れてしまうからです。</p>

<h2>インラインサブクラス</h2>

<p>ここまで読めたあなたはもうオブジェクト指向マスター一歩手前です。（おめでとうございます！パチパチ）</p>

<p>最後に、先ほどの多態性を超強力に使えるプログラミングテクニックを紹介します。</p>

<p>ここまでの復習でオブジェクトとは何かを振り返ってみましょう</p>

<ul>
<li>オブジェクトの設計図として、クラスを定義する</li>
<li>クラスはメソッドとフィールドを持つ</li>
<li>クラスはインターフェースまたは別のクラスを「継承」することができる</li>
<li>継承元のインターフェースやクラスを型とした変数には、「継承」先のサブクラスのインスタンスを代入することができる</li>
</ul>

<p>ここで「継承先のサブクラス」というのは、実は、いつでも作ることができます。いちいち、javaファイルを作って、名前を決めてextendsって書いたりせずに、欲しくなったらいきなり書いてしまうことが出来るのです。</p>

<p>先ほどの、SoundsMakerインターフェースを使った例を元に話を進めますね。</p>

<pre><code class="language-java">SoundsMaker s = new SoundsMaker() {
    public void makeSounds() {
        System.out.println("ぎゃああああああ");
    }
};
makeSounds(s);
</code></pre>

<p>実行結果</p>

<pre><code>きゃああああああ
</code></pre>

<p>こんな風にいきなりプログラムの途中に作られたクラスを、「インラインサブクラス」と呼びます。この技はインターフェースに対しても、スーパークラスに対しても使用可能です。</p>

<p>なぜこんなテクニックが必要かというと、名前を決めることが結構大変だからです。親になった気持ちになってください。その子の名前をいい加減に決められますか？その子の将来がかかっているので、他人から見て変じゃないかとか、縁起が良いかとか、あれこれ考えてようやく名前が決まります。</p>

<p>プログラミングしていて圧倒的に多くの時間を費やすのが「名前決め」です。ですから、一度しか使わないような子には、名前を与えずいきなり使ってしまえば良いのです。（笑）</p>

<h2>変数すら省略できる</h2>

<p>オブジェクトインスタンスは変数に格納すると書きました。しかし、その場で一回だけ使えば良いなら、なにも変数すらも使わなくても良いのです。</p>

<pre><code class="language-java">new Cat().makeSounds()
</code></pre>

<p>実行結果</p>

<pre><code>ニャー
</code></pre>

<p>これらの技を組み合わせると、こんなコードも書けてしまいます。</p>

<pre><code class="language-java">new SoundsMaker() {
    void makeSounds() {
        System.out.println("ぎょええ～～～")
    }
}.makeSounds();
</code></pre>

<p>分かりますか？「ぎょええ～～～」と鳴くモノを作って、その場で鳴かせているのです。</p>

<p>なぜこんなことを書いたかというと、次回以降で多用するからです。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1693</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>テンプレートエンジンMayaaについて知りたいすべての人へ</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2015/mayaa_advent25</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2015/mayaa_advent25#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Fri, 25 Dec 2015 09:52:58 +0000</pubDate>
				<category><![CDATA[Java]]></category>
		<category><![CDATA[Mayaa]]></category>
		<category><![CDATA[Web技術]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1676</guid>

					<description><![CDATA[これは Mayaa Advent Calendar 2015 の25日目です。昨日は「Mayaaソースコードの読み方」でした。 マヤー（メリー）・クリスマス！ 今日はクリスマスです！Mayaaアドベントカレンダーは本日が [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>これは <a href="http://qiita.com/advent-calendar/2015/mayaa">Mayaa Advent Calendar 2015</a> の25日目です。昨日は「<a href="http://www.susumuis.info/entry/2015/mayaa_advent24">Mayaaソースコードの読み方</a>」でした。</p>

<p>マヤー（メリー）・クリスマス！</p>

<p>今日はクリスマスです！Mayaaアドベントカレンダーは本日が最終日です。</p>

<p>結局最後まで一人で書きました。はじめは心細く、4,5日目あたりが一番つらかったです。今日まで続けてこれたのは、TwitterやFecebookで「いいね」をしてくれたり、リアルで応援をしてくれた皆さんのお陰です。</p>

<h2>ここまでを振り返って</h2>

<p>Mayaaアドベントカレンダーを通じて、自分の持っているMayaaのノウハウを放出することで、世界で一番詳しいMayaaのノウハウ集をアウトプットしようと考えていました。</p>

<p>振り返ってみると、コーディングルールだったり、フレームワークとの連携だったり、拡張方法だったり、教育や、ソースコードの読み方など、本当にあらゆることを書けました。</p>

<p>そこで、今日はここまで書いたこと、及び、公式ドキュメントや、このブログの過去の記事、別の方の記事などをインデックス化することで、Mayaaについて調べる時のポータルページを作りたいと思います。</p>

<p>この、世界一詳しいMayaaのノウハウ集を、皆さんへの本当のクリスマスプレゼントとして捧げたいと思います。</p>

<h2>Mayaaとは何か知りたい</h2>

<ul>
<li><a href="http://mayaa.seasar.org/">公式サイト</a><br />
<br />
<ul>
<li>大変素晴らしく整っているサイトです。ドキュメントの品質の良さがMayaaの良さと行っても過言ではありません。</li>
<li>まずは、Mayaaの導入とチュートリアルを読んでみてください！</li>
</ul></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent1">1日目:Mayaaとの出会い</a>, <a href="http://www.susumuis.info/entry/2015/mayaa_advent2">2日目:JSPで書かれたシステムをMayaaに移行する</a></p>

<ul>
<li>この2つを読めば、実案件での導入のイメージが掴めると思います</li>
</ul></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent8">8日目:mayaaの向いてるサイト、向いていないサイト</a></p>

<ul>
<li>Mayaaは個性の強いテンプレートエンジンですので、苦手なサイトに適用しないように、ご注意ください。</li>
</ul></li>
</ul>

<h2>プログラマー向け</h2>

<h3>Mayaaの使い方を覚えたい</h3>

<ul>
<li><a href="http://www.susumuis.info/entry/2015/mayaa_advent3">3日目:MayaaでWebサイトのビューを実装するときに押さえておくべき基本テクニック1 – m:idの命名規則と実装方法</a></li>
<li><a href="http://www.susumuis.info/entry/2015/mayaa_advent4">4日目:MayaaでWebサイトのビューを実装するときに押さえておくべき基本テクニック2 – m:idの実装における注意点</a></li>
<li><a href="http://www.susumuis.info/entry/2015/mayaa_advent5">5日目:MayaaでWebサイトのビューを実装するときに押さえておくべき基本テクニック3 – m:idを減らすテクニック</a></li>
<li><a href="http://www.susumuis.info/entry/2015/mayaa_advent6">6日目:MayaaでWebサイトのビューを実装するときに押さえておくべき基本テクニック4 – ヘッダー・フッター共通部分の扱い</a></li>
<li><a href="http://www.susumuis.info/entry/2015/mayaa_advent7">7日目:MayaaでWebサイトのビューを実装するときに押さえておくべき基本テクニック5 – その他雑多なテクニック</a><br />
<br />
<ul>
<li>Mayaaをなるべく標準状態で、実用活用する方法論として、いしがみメソッドを提唱しています。Mayaaの使い方は一つではありませんが、実際に大規模サイトを構築できている方法論なので、一つの指針として参考に頂きたく思います。</li>
<li>リーダー・アーキテクトの方は、もしいしがみメソッドを活用していただくならば、メンバーの方に一度見ていただくと良いかもしれません。</li>
<li>（教育用に適さない表現などあったら訂正しますのでご指摘ください）</li>
</ul></li>
</ul>

<h2>アーキテクト・上級プログラマー向け</h2>

<p>ここから先は、Mayaaをどのように活用するかという話になります。</p>

<h3>Mayaaを拡張・チューニングしたい、トラブルシューティングしたい</h3>

<ul>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent24">24日目:Mayaaソースコードの読み方</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent11">11日目:Mayaaの拡張ポイントベスト5</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent14">14日目:Mayaaでm:idの組み方が原因でページ全体がエラーになるのを防ごう（CompiledScript / ScriptEnvironmentの拡張例）</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent16">15日目:Mayaaで独自Processorを作ろう！</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/javaee_and_mayaa_advent10">10日目:Spring BootのテンプレートエンジンにMayaaを使おうとしてみた</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent13">13日目:Spring BootのテンプレートエンジンにMayaaを使おうとしてみるリベンジ編</a></p></li>
</ul>

<h2>プロジェクトマネージャ、リーダー向け</h2>

<h3>Mayaaを使ったプロジェクト運営論</h3>

<ul>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent12">12日目:ぶっちゃけ、Mayaaでデザイナーと仲良くなれたの？</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent15">15日目:Mayaaでサイトを作るときのワークフロー</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent23">23日目:Mayaaの学び方・教え方</a></p></li>
</ul>

<h2>豆知識系</h2>

<ul>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent9">9日目:Mayaaを使ってHTMLを出力するアイデア</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent17">17日目:Mayaaに慣れた僕がMixer2を試してみる</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent18">18日目:Mayaaに慣れた僕がThymeleafを試してみる</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent19">19日目:Mayaaに慣れた僕がJSF2.x Faceletsを試してみる</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent20">20日目:テンプレートエンジン（Mayaa, Mixer2, Thymeleaf, JSF2.x）を比較してみて</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent21">21日目:Mayaaの経験を活かして、JSPを注意して使う方法</a></p></li>
<li><p><a href="http://www.susumuis.info/entry/2015/mayaa_advent22">22日目:Mayaaの生まれた日から現在までのWebのフロント開発における時代背景の変化を振り返る</a></p></li>
</ul>

<h2>まとめ</h2>

<p>25日間お疲れ様でした。<br />
いかがでしたでしょうか？</p>

<p>ブログを毎日書くのは初めての体験で雑なところなどもあったと思います。半ば書ければいいやなどの投げやりな気持ちも1mmくらいはあったと思います。</p>

<p>しかし、今時派手ではない、テンプレートエンジンのノウハウはこうでもしないとアウトプットされないでしょうから、この機会があって良かったと思います。</p>

<p>今後僕は、あらゆる場面でこのアドベントカレンダーの一覧の記事を活用していこうと思います。その際にあらに気づいたら自ら直して行くことでしょう。</p>

<p>つまり、世界一詳しいMayaaノウハウ集づくりは、ここが起点なのです。Mayaaが続く限り、将来にわたってこれらの記事をメンテし続けることを約束します。</p>

<p>それではみなさん、メリークリスマス、そして良いお年を！</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1676</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Mayaaソースコードの読み方</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2015/mayaa_advent24</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2015/mayaa_advent24#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Wed, 23 Dec 2015 15:52:47 +0000</pubDate>
				<category><![CDATA[Java]]></category>
		<category><![CDATA[Mayaa]]></category>
		<category><![CDATA[Web技術]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1667</guid>

					<description><![CDATA[これは Mayaa Advent Calendar 2015 の24日目です。昨日は「Mayaaの学び方・教え方」でした。 今日はクリスマスイブです！リア充が爆発している中、硬派な皆さんはMayaaアドベントカレンダーを [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>これは <a href="http://qiita.com/advent-calendar/2015/mayaa">Mayaa Advent Calendar 2015</a> の24日目です。昨日は「<a href="http://www.susumuis.info/entry/2015/mayaa_advent23">Mayaaの学び方・教え方</a>」でした。</p>

<p>今日はクリスマスイブです！リア充が爆発している中、硬派な皆さんはMayaaアドベントカレンダーを読んでくださりありがとうございます。</p>

<p>クリスマスプレゼントとして、今日は徹底的にガチなことを書きます。</p>

<h2>Mayaaのソースコードの読み方</h2>

<p><a href="https://github.com/seasarorg/mayaa">MayaaのソースコードはGitHubにあります。</a></p>

<p>さて、git cloneで落としましたか？</p>

<p>今日はこいつの読み方を説明します。準備は良いでしょうか？</p>

<h2>プロジェクト構成を眺める</h2>

<p>プロジェクトフォルダをざっと見ると、</p>

<ul>
<li>src-api</li>
<li>src-impl</li>
</ul>

<p>2つのフォルダがあります。僕はこのようなフォルダ構成はMayaaしか知りません。試しにGoogleで「src-impl」と打ち込むと、Mayaaのソースが出てくるからMayaaの独特の構成かもしれません。</p>

<p>contect フォルダはライセンス情報や依存ライブラリ、Webアプリとして単体起動させるための設定情報などがあるだけで、ライブラリとしてあまり重要なものはありませんので、コードリーディング時は無視してよいです。</p>

<h2>src-apiでAPI構成を知る</h2>

<p>src-apiにはinterfaceが定義されています。つまり、src-apiに存在するインターフェースは何らかの方法で実装を交換可能になっているということです。</p>

<p>実装が交換可能ということは、独立した部品とみなされていると言って良いです。つまり、src-apiをざっと見れば、Mayaaがどんな部品によって構成されているかを知ることが出来ます。</p>

<p>パッケージ階層を見ると次のような構成であることが分かります。</p>

<ul>
<li>builder</li>
<li>cycle</li>
<li>engine</li>
<li>provider</li>
<li>source</li>
</ul>

<p>Mayaa内部の用語なので、これだけ見ても、最初は慣れないと思いますが、そこで、Mayaaの処理する流れをざっと説明します。</p>

<p>engineはMayaa中心で起点と考えてよいです。</p>

<p>engineの中は、processorと、specificationに分かれます。specificationはmayaaファイルやテンプレートの定義情報をモデル化したものです。processorは、テンプレートエンジンがそのノードをどのように処理するかをオブジェクト化したものです。つまり、specificationによって組み立てられたprocessorがあればMayaaエンジンはHTMLを出力することが出来ます。</p>

<p>providerはアプリケーションスコープのリソースです。エンジンの設定や、各インターフェースの実装クラスの選択はここが担当します。そのため、Mayaaの設定はorg.seasar.mayaa.provider.ServiceProviderなのです。</p>

<p>sourceは、mayaaファイルやhtmlテンプレートなどユーザーが作成するソースファイルを抽象化しています。他のインターフェースに依存しませんが、実装上は、ビルド時にほぼ必ず使用します。</p>

<p>cycleは、リクエスト処理のコンテキストを扱います。リクエスト・レスポンス、現在処理中のノードといったスレッドローカルなコンテキストはここに格納されていきます。</p>

<p>builderは（主にsourceを元にして）SpecificationNodeを組み立てます。</p>

<p><a href="http://www.susumuis.info/wp-content/uploads/2015/12/fff281fc93df2593db686b8134d64d85.png"><img loading="lazy" decoding="async" src="http://www.susumuis.info/wp-content/uploads/2015/12/fff281fc93df2593db686b8134d64d85.png" alt="Mayaaの構成" width="960" height="720" class="alignnone size-full wp-image-1673" srcset="https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/fff281fc93df2593db686b8134d64d85.png 960w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/fff281fc93df2593db686b8134d64d85-300x225.png 300w, https://susumuishigami.github.io/susumuisinfo/wp-content/uploads/2015/12/fff281fc93df2593db686b8134d64d85-624x468.png 624w" sizes="(max-width: 960px) 100vw, 960px" /></a></p>

<p>つまり、provider, cycleは事実上Engineを動かすのに必要ですが、何らかの方法でspecification/processorが構成できてしまえば、builder, sourceは切り離せるとも言えます。</p>

<h2>継承の起点としてのインターフェースを理解する</h2>

<p>次に、クラス階層から実装の作法を理解してみましょう。</p>

<p>こんなクラスが実装の起点に存在しています。</p>

<ul>
<li>PositionAware<br />
<br />
<ul>
<li>NodeTreeWalker</li>
<li>ParameterAware</li>
</ul></li>
<li>ContextAware</li>
<li>UnifiedFactory</li>
</ul>

<p>これらをざっと眺めておくと後々実装を追いやすくなります。</p>

<h2>実装クラスの起点はMayaaServletから</h2>

<p>なんだかんだ言っても実装はMayaaServletから追い始めるのがベターです。</p>

<p>MayaaServlet#doServiceで、Cycleを初期化し、ProviderからEngineを取得して実行しているのが分かります。</p>

<p>EngineImpl#doServiceを追って行くと、EngineImpl#doPageServiceという大きなメソッドに行き着きます。ここが、一リクエスト分のレンダリング処理の主要部分です。ここを起点に、テンプレートの情報を取得し、各部品を実行することで、結果としてのHTML文書が出力しされます。</p>

<h2>大枠を理解できたら後は部品ごとの設計を理解する</h2>

<p>例えば、SourceDescriptorは内部でCompositeパターンになっています。Processorを理解するには、TemplateProcessorSupportという巨大なクラスの機能を理解する必要があるでしょう。</p>

<p>また、Rhinoスクリプティング機能は、cycle.script.rhino内に収められています。したがって、これと同等の部品を実装して、独自のCompiledScriptが実装ができれば、スクリプトエンジンをRhino以外に切り替えることもできます。</p>

<h2>まとめ</h2>

<p>Mayaaのソースコードは、各部品の独立性と抽象度が高く設計されています。このため、全体を各部品に切り離して考えることが出来、一部分を拡張したり、変更することが行いやすくなっています。</p>

<p>FactoryFactoryがある時点で、DIコンテナが普及する以前の香りがしますね。Seasarプロジェクトと言いながらSeasarに依存しないのは、このように独自にフレームワークを作っているからなのです！また、今回は触れませんでしたが、内部には、GCの管理や、シリアライザーをガリガリいじったり、相当低レベルのこともしています。（それらを読んでいるととても勉強になります）</p>

<p>こういった低レベルな部分がソースを膨らませているとも言えます。何も知らないで読むと、溺れてしまいそうです。しかし、フレームワーク的なところ、低レベル過ぎるところは一旦置いておくと、読むべき範囲は限定されてきます。</p>

<p>ソースコードを読む動機というのは様々で、拡張したい時の他に、トラブルシューティングをするとき、パフォーマンスチューニングしたい時などいろいろあると思いますが、その時必要な範囲で読めるように、普段から慣れておけば、そんなに怖いものではありません。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1667</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Mayaaの学び方・教え方</title>
		<link>https://susumuishigami.github.io/susumuisinfo/entry/2015/mayaa_advent23</link>
					<comments>https://susumuishigami.github.io/susumuisinfo/entry/2015/mayaa_advent23#respond</comments>
		
		<dc:creator><![CDATA[susumuis]]></dc:creator>
		<pubDate>Wed, 23 Dec 2015 10:19:26 +0000</pubDate>
				<category><![CDATA[Java]]></category>
		<category><![CDATA[Mayaa]]></category>
		<category><![CDATA[Web技術]]></category>
		<guid isPermaLink="false">http://www.susumuis.info/?p=1664</guid>

					<description><![CDATA[これは Mayaa Advent Calendar 2015 の23日目です。昨日は「Mayaaの経験を活かして、JSPを注意して使う方法」でした。 あと3日です！ 明日はクリスマスイブ、今日は天皇誕生日、一気に年の瀬な [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>これは <a href="http://qiita.com/advent-calendar/2015/mayaa">Mayaa Advent Calendar 2015</a> の23日目です。昨日は「<a href="http://www.susumuis.info/entry/2015/mayaa_advent21">Mayaaの経験を活かして、JSPを注意して使う方法</a>」でした。</p>

<p>あと3日です！</p>

<p>明日はクリスマスイブ、今日は天皇誕生日、一気に年の瀬な感じです。皆さん、年賀状は書きましたか？まだの方は、年賀状ソフトをネット販売で買いましょう。私の勤務先のお客様です。ｗ</p>

<p>ちなみに僕は5年以上年賀状を書いていません。</p>

<h2>もし、プログラマー初案件がMayaaだったら</h2>

<p>今日のテーマは教育です。プログラミングは学校で習った程度で、Servletとか作るのは初めてな感じの新卒が、Mayaaを使っているチームに配属されたとします。</p>

<p>経験者なら良いんです。<br />
<a href="http://mayaa.seasar.org/documentation/index.html">Mayaaの公式ドキュメント</a>を読んでください。その後、僕のブログで、このアドベントカレンダーの<a href="http://www.susumuis.info/entry/2015/mayaa_advent1">1日目</a>から<a href="http://www.susumuis.info/entry/2015/mayaa_advent7">7日目</a>を読んでくれれば良いんです。</p>

<p>JSP、Thymeleaf、JSF、Mixer2を経験しているなら、<a href="http://www.susumuis.info/entry/2015/mayaa_advent17">17日目</a>から<a href="http://www.susumuis.info/entry/2015/mayaa_advent21">21日目</a>も読んでおくと理解の助けになるでしょう。</p>

<p>後の記事はアーキテクトやリーダープログラマー向けなので、ぶっちゃけ読まなくてもいいです。（笑）</p>

<p>さて、本当にど初心者が入ってしまったらどうでしょうか？「JSPでは〜」というのが言えなくなります。</p>

<h2>とりあえず、JSPを理解してもらう。</h2>

<p>最近はフレームワークでドーンと最初から統合されたシステム作りをするのが主流だと思いますが、MayaaはJSPと同じレイヤーにするために、そのものはシンプルでもないのですが、JSPを覚えておく必要はあります。</p>

<p>昔だったらStrutsを使ってMVCにしても良かったのですが、今はSpringとかJava EEのような重量級をいきなり使うのはきついので、いっそ、生のServletとJSPでページを構成する体験をしてもらうしかないのかなと思います。</p>

<h2>いしがみメソッドの4種類それぞれを実装してもらう</h2>

<p>Mayaaそのものは柔軟性のある技術ですが、実際のプロジェクトでは、デザイナーと協調するために、いしがみメソッドでは、4種類の書き方に限定することを提唱していました。</p>

<p>しっかりと、4種類だけに限定して書く癖をつけてもらいましょう。</p>

<p><a href="http://www.susumuis.info/entry/2015/mayaa_advent17">3日目</a>から引用すると、</p>

<ul>
<li>*_HERE<br />
<br />
<ul>
<li>その場所に文字列を出力する</li>
</ul></li>
<li>*_TAG<br />
<br />
<ul>
<li>そのタグの属性を変化させたり要素を足したりする</li>
</ul></li>
<li>IF_*<br />
<br />
<ul>
<li>そのタグ及びその子要素が特定の条件にもとづいて消える</li>
</ul></li>
<li>LOOP_*<br />
<br />
<ul>
<li>そのタグ及びその子要素を特定の条件に基づいて繰り返す</li>
</ul></li>
</ul>

<p>そして、それぞれの書き方は</p>

<pre><code class="language-markup">&lt;!-- タイトルを出力します --&gt;
&lt;m:write m:id="TITLE_HERE" value="${page.getTitle()}" /&gt;
</code></pre>

<pre><code class="language-markup">&lt;!-- 商品画像を表示します。src属性を制御します --&gt;
&lt;m:echo m:id="ITEM_IMAGE_TAG"&gt;
  &lt;m:attribute name="src" value="${image.getSrc()}" /&gt;
&lt;/m:echo&gt;

<pre><code>```markup
&lt;m:if m:id="IF_MEMBER" test=${context.isMember()}&gt;
  &lt;m:echo&gt;&lt;m:doBody /&gt;&lt;/m:echo&gt;
&lt;/m:if&gt;
</code></pre>

```markup
&lt;m:forEach m:id="LOOP_ITEM" items=${items}&gt;
  &lt;m:echo&gt;&lt;m:doBody /&gt;&lt;/m:echo&gt;
&lt;/m:if&gt;
</code></pre>

<p>きちんとレビューをしてこの通りに書いていなかったら直させるようにしましょう。</p>

<p>これらを書くことは業務の中で圧倒的に多いことです。</p>

<h2>まとめ</h2>

<p>使い方を絞ったことによって、教える時も絞って教えられるメリットがあります。</p>

<p>ただ、教え方は人それぞれ、教わる方も、それぞれ向いたやり方は違いますので、「これがベストだ」とは言いづらいところがあります。</p>

<p>なので、今回は歯切れが悪くなってしまいますが、まあ、適宜、教育する人、教わる人で、良く話して、ベストなやり方を模索してください。</p>
]]></content:encoded>
					
					<wfw:commentRss>https://susumuishigami.github.io/susumuisinfo/?feed=rss2&#038;p=1664</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>
