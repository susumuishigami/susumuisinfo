{"id":694,"date":"2009-08-22T11:40:09","date_gmt":"2009-08-22T02:40:09","guid":{"rendered":"http:\/\/blog.susumuis.info\/?p=694"},"modified":"2014-07-01T19:36:20","modified_gmt":"2014-07-01T10:36:20","slug":"html5-canvas%e3%82%92%e8%a9%a6%e3%81%97%e3%81%a6%e3%81%bf%e3%81%9f%e3%80%82","status":"publish","type":"post","link":"https:\/\/www.susumuis.info\/entry\/20090822\/1252377609","title":{"rendered":"HTML5 Canvas\u3092\u8a66\u3057\u3066\u307f\u305f\u3002"},"content":{"rendered":"<p>\u3061\u3087\u3063\u3068\u524d\u3067\u3059\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u52d5\u304f\u30b2\u30fc\u30e0\u3092\u4f5c\u308b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306b\u306a\u3089\u306a\u3044\u304b\u5b9f\u9a13\u3057\u3066\u307f\u307e\u3057\u305f\u306e\u3067\u3001\u30bd\u30fc\u30b9\u3092\u8cbc\u308a\u307e\u3059\u3002<\/p>\n\n<p>\u4ee5\u4e0b\u306e\u901a\u308a\u306b\u66f8\u3044\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u753b\u9762\u4e0a\u3092\u305f\u304f\u3055\u3093\u306e\"\u25a0\"\u304c\u98db\u3073\u306f\u306d\u3001\u7aef\u3063\u3053\u306b\u8a00\u3063\u305f\u3089\u30d0\u30a6\u30f3\u30c9\u3057\u307e\u3059\u3002<\/p>\n\n<p><span itemscope itemtype=\"http:\/\/schema.org\/Photograph\"><a href=\"http:\/\/f.hatena.ne.jp\/s-ishigami\/20090822131117\" class=\"hatena-fotolife\" itemprop=\"url\"><img decoding=\"async\" src=\"http:\/\/cdn-ak.f.st-hatena.com\/images\/fotolife\/s\/s-ishigami\/20090822\/20090822131117_120.jpg\" alt=\"f:id:s-ishigami:20090822131117p:image:medium\" title=\"f:id:s-ishigami:20090822131117p:image:medium\" class=\"hatena-fotolife\" itemprop=\"image\" \/><\/a><\/span><\/p>\n\n<p>html_canvas.html<\/p>\n\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!doctype html&gt;<\/span>\n<span class=\"synIdentifier\">&lt;<\/span><span class=\"synStatement\">html<\/span><span class=\"synIdentifier\"> <\/span><span class=\"synType\">lang<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"ja\"<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;<\/span><span class=\"synStatement\">head<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synPreProc\">   <\/span><span class=\"synIdentifier\">&lt;<\/span><span class=\"synStatement\">meta<\/span><span class=\"synIdentifier\"> <\/span><span class=\"synType\">charset<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"UTF-8\"<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synPreProc\">   <\/span><span class=\"synIdentifier\">&lt;<\/span><span class=\"synStatement\">title<\/span><span class=\"synIdentifier\">&gt;<\/span>Canvas DEMO<span class=\"synIdentifier\">&lt;\/<\/span><span class=\"synStatement\">title<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;\/<\/span><span class=\"synStatement\">head<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;<\/span><span class=\"synStatement\">body<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;<\/span>canvas<span class=\"synIdentifier\"> <\/span><span class=\"synType\">id<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"mainCanvas\"<\/span><span class=\"synIdentifier\"> <\/span><span class=\"synType\">width<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"640\"<\/span><span class=\"synIdentifier\"> <\/span><span class=\"synType\">height<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"480\"<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;\/<\/span>canvas<span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;<\/span><span class=\"synStatement\">script<\/span><span class=\"synIdentifier\"> <\/span><span class=\"synType\">src<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"canvas.js\"<\/span><span class=\"synIdentifier\"> <\/span><span class=\"synType\">type<\/span><span class=\"synIdentifier\">=<\/span><span class=\"synConstant\">\"text\/javascript\"<\/span><span class=\"synIdentifier\">&gt;&lt;\/<\/span><span class=\"synStatement\">script<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;\/<\/span><span class=\"synStatement\">body<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<span class=\"synIdentifier\">&lt;\/<\/span><span class=\"synStatement\">html<\/span><span class=\"synIdentifier\">&gt;<\/span>\n<\/pre>\n\n<p>canvas.js<\/p>\n\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>(<span class=\"synIdentifier\">function<\/span>() <span class=\"synIdentifier\">{<\/span>\n<span class=\"synIdentifier\">var<\/span> WIDTH = 300;\n<span class=\"synIdentifier\">var<\/span> HEIGHT = 200;\n<span class=\"synStatement\">window<\/span>.onload = <span class=\"synIdentifier\">function<\/span>() <span class=\"synIdentifier\">{<\/span>initCanvas();<span class=\"synIdentifier\">}<\/span>;\n<span class=\"synIdentifier\">var<\/span> canvas;\n<span class=\"synIdentifier\">var<\/span> context;\n<span class=\"synIdentifier\">var<\/span> x, y, dx, dy;\n<span class=\"synIdentifier\">var<\/span> balls;\n<span class=\"synIdentifier\">var<\/span> Ball = <span class=\"synIdentifier\">function<\/span>(x, y, dx, dy, color) <span class=\"synIdentifier\">{<\/span>\n<span class=\"synIdentifier\">this<\/span>.color = color;\n<span class=\"synIdentifier\">this<\/span>.x = x;\n<span class=\"synIdentifier\">this<\/span>.y = y;\n<span class=\"synIdentifier\">this<\/span>.dx = dx;\n<span class=\"synIdentifier\">this<\/span>.dy = dy;\n<span class=\"synIdentifier\">this<\/span>.move = <span class=\"synIdentifier\">function<\/span>() <span class=\"synIdentifier\">{<\/span>\n<span class=\"synIdentifier\">this<\/span>.x += <span class=\"synIdentifier\">this<\/span>.dx;\n<span class=\"synIdentifier\">this<\/span>.y += <span class=\"synIdentifier\">this<\/span>.dy;\n<span class=\"synStatement\">if<\/span> (<span class=\"synIdentifier\">this<\/span>.x &lt; 0 || <span class=\"synIdentifier\">this<\/span>.x &gt; WIDTH) <span class=\"synIdentifier\">{<\/span>\n<span class=\"synIdentifier\">this<\/span>.dx = -<span class=\"synIdentifier\">this<\/span>.dx;\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synStatement\">if<\/span> (<span class=\"synIdentifier\">this<\/span>.y &lt; 0 || <span class=\"synIdentifier\">this<\/span>.y &gt; HEIGHT) <span class=\"synIdentifier\">{<\/span>\n<span class=\"synIdentifier\">this<\/span>.dy = -<span class=\"synIdentifier\">this<\/span>.dy;\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">}<\/span>;\n<span class=\"synIdentifier\">this<\/span>.draw = <span class=\"synIdentifier\">function<\/span>() <span class=\"synIdentifier\">{<\/span>\ncontext.fillStyle = color;\ncontext.fillRect(<span class=\"synIdentifier\">this<\/span>.x, <span class=\"synIdentifier\">this<\/span>.y, 10, 10);\n<span class=\"synIdentifier\">}<\/span>;\n<span class=\"synIdentifier\">}<\/span>;\n<span class=\"synIdentifier\">function<\/span> initCanvas() <span class=\"synIdentifier\">{<\/span>\ncanvas = <span class=\"synStatement\">document<\/span>.getElementById(<span class=\"synConstant\">'mainCanvas'<\/span>);\n<span class=\"synStatement\">if<\/span>(!canvas.getContext) <span class=\"synIdentifier\">{<\/span>\n<span class=\"synStatement\">alert<\/span>(<span class=\"synConstant\">'unsupported browser'<\/span>);\n<span class=\"synStatement\">return<\/span>;\n<span class=\"synIdentifier\">}<\/span>\ncontext = canvas.getContext(<span class=\"synConstant\">'2d'<\/span>);\nballs = <span class=\"synIdentifier\">[<\/span><span class=\"synStatement\">new<\/span> Ball(100, 100, rndVelocity(), rndVelocity)<span class=\"synIdentifier\">]<\/span>;\n<span class=\"synStatement\">for<\/span> (<span class=\"synIdentifier\">var<\/span> i = 0; i &lt; 30; i++) <span class=\"synIdentifier\">{<\/span>\nballs<span class=\"synIdentifier\">[<\/span>i<span class=\"synIdentifier\">]<\/span> = <span class=\"synStatement\">new<\/span> Ball(100, 100, rndVelocity(), rndVelocity(), rndColor());\n<span class=\"synIdentifier\">}<\/span>\nsetInterval(next, 50);\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">function<\/span> rndVelocity() <span class=\"synIdentifier\">{<\/span>\n<span class=\"synStatement\">return<\/span> (Math.random() - 0.5) * 30;\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">function<\/span> rndColor() <span class=\"synIdentifier\">{<\/span>\n<span class=\"synStatement\">return<\/span> <span class=\"synConstant\">'#'<\/span> + ((Math.floor((Math.random()) * 0xFFFFFF)));\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">function<\/span> move() <span class=\"synIdentifier\">{<\/span>\n<span class=\"synStatement\">for<\/span> (<span class=\"synIdentifier\">var<\/span> i = 0; i &lt; balls.length; i++) <span class=\"synIdentifier\">{<\/span>\nballs<span class=\"synIdentifier\">[<\/span>i<span class=\"synIdentifier\">]<\/span>.move();\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">function<\/span> draw() <span class=\"synIdentifier\">{<\/span>\ncontext.clearRect(0,0,640,480);\ncontext.beginPath();\n<span class=\"synStatement\">for<\/span> (<span class=\"synIdentifier\">var<\/span> i = 0; i &lt; balls.length; i++) <span class=\"synIdentifier\">{<\/span>\nballs<span class=\"synIdentifier\">[<\/span>i<span class=\"synIdentifier\">]<\/span>.draw();\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">function<\/span> next() <span class=\"synIdentifier\">{<\/span>\nmove();\ndraw();\n<span class=\"synIdentifier\">}<\/span>\n<span class=\"synIdentifier\">}<\/span>)();\n<\/pre>\n\n<p>\u666e\u6bb5\u306fJavaScript\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308d\u3046\u3068\u306f\u601d\u308f\u306a\u3044\u306e\u3067\u3059\u304c\u3001<br \/>\n\u3053\u3046\u3044\u3046\u30b2\u30fc\u30e0\u3063\u307d\u3044\u3082\u306e\u3092\u4f5c\u308d\u3046\u3068\u601d\u3046\u3068\u81ea\u7136\u3068\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411<br \/>\n\u306b\u306a\u308b\u307f\u305f\u3044\u3067\u3059\u3002<\/p>\n\n<p>\u30e2\u30c7\u30eb\u5316\u3057\u3084\u3059\u3044\u304b\u3089\u304b\u306a\u3002<\/p>\n\n<p>\u76ee\u4e0b\u306e\u8ab2\u984c\u306f\u3053\u3093\u306a\u3068\u3053\u308d\u3067\u3059\u306d\u3002<\/p>\n\n<ul>\n<li>\u30bf\u30a4\u30de\u30fc\u304c\u3001setInterval(\u307e\u305f\u306fsetTimeout\uff09\u304f\u3089\u3044\u3057\u304b\u306a\u3044 \n\n<ul>\n<li>\u672c\u5f53\u306fsleep+\u7121\u9650\u30eb\u30fc\u30d7\u3067\u52d5\u304b\u3057\u305f\u3044\u3002<\/li>\n<li>\u6a21\u64ec\u7684\u306bsleep\u3092\u4f5c\u3063\u3066\u3082\u3001\u4eca\u5ea6\u306frefresh\u304c\u306a\u3044(?)\u304b\u3089\u518d\u63cf\u753b\u3055\u308c\u306a\u3044\u3002\uff08\u30eb\u30fc\u30d7\u3092\u629c\u3051\u308b\u307e\u3067\u4f55\u3082\u63cf\u304b\u308c\u306a\u3044\uff09<\/li>\n<\/ul><\/li>\n<li>\u305d\u306e\u305f\u3081\u3001FPS60\u3067\u56fa\u5b9a\u3059\u308b\u306e\u304c\u96e3\u3057\u3044\u3002 \n\n<ul>\n<li>\u30b3\u30de\u843d\u3061\u3057\u305f\u3068\u304d\u306e\u6271\u3044\u3068\u304b\u4e0d\u5b89<\/li>\n<\/ul><\/li>\n<li>IE\u3060\u3068excanvas\u3092\u4f7f\u3048\u3070\u3067\u304d\u308b\u3051\u3069\u30b2\u30fc\u30e0\u3068\u3057\u3066\u306f\u4f7f\u3044\u7269\u306b\u306a\u3089\u306a\u3044\u304f\u3089\u3044\u9045\u3044\u3002<\/li>\n<li>\u30e9\u30f3\u30c0\u30e0\u306b\u8272\u3092\u4e0e\u3048\u3066\u308b\u306f\u305a\u306a\u306e\u306b\u3001\u540c\u3058\u3088\u3046\u306a\u8272\u306b\u306a\u308b\u3002JavaScript\u306eMath.random()\u306e\u4ed5\u69d8\uff1f<\/li>\n<\/ul>\n\n<p>context\u30922D\u3067\u306f\u306a\u304f\u3001\u4eca\u5f8c\u5b9f\u88c5\u3055\u308c\u308b\u3067\u3042\u308d\u30463D\u3092\u4f7f\u3048\u3070\u306a\u3089\u3082\u3063\u3068\u63cf\u753b\u901f\u5ea6\u304c\u901f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002<\/p>\n<p style=\"margin-top: 0px; margin-bottom: 32px;>\n<script async src=\"\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:336px;height:280px\"\n     data-ad-client=\"ca-pub-4600091038664361\"\n     data-ad-slot=\"6658249733\"><\/ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n<\/script>\n<\/p>","protected":false},"excerpt":{"rendered":"<p>\u3061\u3087\u3063\u3068\u524d\u3067\u3059\u304c\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u52d5\u304f\u30b2\u30fc\u30e0\u3092\u4f5c\u308b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306b\u306a\u3089\u306a\u3044\u304b\u5b9f\u9a13\u3057\u3066\u307f\u307e\u3057\u305f\u306e\u3067\u3001\u30bd\u30fc\u30b9\u3092\u8cbc\u308a\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u901a\u308a\u306b\u66f8\u3044\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u753b\u9762\u4e0a\u3092\u305f\u304f\u3055\u3093\u306e\"\u25a0\"\u304c\u98db\u3073\u306f\u306d\u3001\u7aef\u3063\u3053\u306b\u8a00\u3063\u305f\u3089\u30d0\u30a6\u30f3\u30c9\u3057\u307e\u3059\u3002 ht [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[40],"tags":[],"_links":{"self":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts\/694"}],"collection":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=694"}],"version-history":[{"count":2,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts\/694\/revisions"}],"predecessor-version":[{"id":1057,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=\/wp\/v2\/posts\/694\/revisions\/1057"}],"wp:attachment":[{"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=694"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=694"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.susumuis.info\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=694"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}